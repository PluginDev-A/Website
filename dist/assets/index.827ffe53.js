var vA=Object.defineProperty,yA=Object.defineProperties;var xA=Object.getOwnPropertyDescriptors;var Rd=Object.getOwnPropertySymbols;var Z_=Object.prototype.hasOwnProperty,Q_=Object.prototype.propertyIsEnumerable;var Y_=(n,e,t)=>e in n?vA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,It=(n,e)=>{for(var t in e||(e={}))Z_.call(e,t)&&Y_(n,t,e[t]);if(Rd)for(var t of Rd(e))Q_.call(e,t)&&Y_(n,t,e[t]);return n},Ai=(n,e)=>yA(n,xA(e));var Ji=(n,e)=>{var t={};for(var i in n)Z_.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Rd)for(var i of Rd(n))e.indexOf(i)<0&&Q_.call(n,i)&&(t[i]=n[i]);return t};const _A=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};_A();var _e={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf=Symbol.for("react.element"),wA=Symbol.for("react.portal"),SA=Symbol.for("react.fragment"),MA=Symbol.for("react.strict_mode"),EA=Symbol.for("react.profiler"),TA=Symbol.for("react.provider"),bA=Symbol.for("react.context"),AA=Symbol.for("react.forward_ref"),CA=Symbol.for("react.suspense"),RA=Symbol.for("react.memo"),PA=Symbol.for("react.lazy"),J_=Symbol.iterator;function LA(n){return n===null||typeof n!="object"?null:(n=J_&&n[J_]||n["@@iterator"],typeof n=="function"?n:null)}var jM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qM=Object.assign,XM={};function Su(n,e,t){this.props=n,this.context=e,this.refs=XM,this.updater=t||jM}Su.prototype.isReactComponent={};Su.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Su.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function YM(){}YM.prototype=Su.prototype;function Ry(n,e,t){this.props=n,this.context=e,this.refs=XM,this.updater=t||jM}var Py=Ry.prototype=new YM;Py.constructor=Ry;qM(Py,Su.prototype);Py.isPureReactComponent=!0;var K_=Array.isArray,ZM=Object.prototype.hasOwnProperty,Ly={current:null},QM={key:!0,ref:!0,__self:!0,__source:!0};function JM(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ZM.call(e,i)&&!QM.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];r.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:yf,type:n,key:s,ref:o,props:r,_owner:Ly.current}}function DA(n,e){return{$$typeof:yf,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Dy(n){return typeof n=="object"&&n!==null&&n.$$typeof===yf}function IA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $_=/\/+/g;function Lg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?IA(""+n.key):e.toString(36)}function Uh(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case yf:case wA:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Lg(o,0):i,K_(r)?(t="",n!=null&&(t=n.replace($_,"$&/")+"/"),Uh(r,e,t,"",function(f){return f})):r!=null&&(Dy(r)&&(r=DA(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace($_,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",K_(n))for(var l=0;l<n.length;l++){s=n[l];var c=i+Lg(s,l);o+=Uh(s,e,t,c,r)}else if(c=LA(n),typeof c=="function")for(n=c.call(n),l=0;!(s=n.next()).done;)s=s.value,c=i+Lg(s,l++),o+=Uh(s,e,t,c,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pd(n,e,t){if(n==null)return n;var i=[],r=0;return Uh(n,i,"","",function(s){return e.call(t,s,r++)}),i}function NA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ri={current:null},Hh={transition:null},zA={ReactCurrentDispatcher:ri,ReactCurrentBatchConfig:Hh,ReactCurrentOwner:Ly};_t.Children={map:Pd,forEach:function(n,e,t){Pd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Pd(n,function(){e++}),e},toArray:function(n){return Pd(n,function(e){return e})||[]},only:function(n){if(!Dy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};_t.Component=Su;_t.Fragment=SA;_t.Profiler=EA;_t.PureComponent=Ry;_t.StrictMode=MA;_t.Suspense=CA;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zA;_t.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=qM({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ly.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)ZM.call(e,c)&&!QM.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];i.children=l}return{$$typeof:yf,type:n.type,key:r,ref:s,props:i,_owner:o}};_t.createContext=function(n){return n={$$typeof:bA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TA,_context:n},n.Consumer=n};_t.createElement=JM;_t.createFactory=function(n){var e=JM.bind(null,n);return e.type=n,e};_t.createRef=function(){return{current:null}};_t.forwardRef=function(n){return{$$typeof:AA,render:n}};_t.isValidElement=Dy;_t.lazy=function(n){return{$$typeof:PA,_payload:{_status:-1,_result:n},_init:NA}};_t.memo=function(n,e){return{$$typeof:RA,type:n,compare:e===void 0?null:e}};_t.startTransition=function(n){var e=Hh.transition;Hh.transition={};try{n()}finally{Hh.transition=e}};_t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};_t.useCallback=function(n,e){return ri.current.useCallback(n,e)};_t.useContext=function(n){return ri.current.useContext(n)};_t.useDebugValue=function(){};_t.useDeferredValue=function(n){return ri.current.useDeferredValue(n)};_t.useEffect=function(n,e){return ri.current.useEffect(n,e)};_t.useId=function(){return ri.current.useId()};_t.useImperativeHandle=function(n,e,t){return ri.current.useImperativeHandle(n,e,t)};_t.useInsertionEffect=function(n,e){return ri.current.useInsertionEffect(n,e)};_t.useLayoutEffect=function(n,e){return ri.current.useLayoutEffect(n,e)};_t.useMemo=function(n,e){return ri.current.useMemo(n,e)};_t.useReducer=function(n,e,t){return ri.current.useReducer(n,e,t)};_t.useRef=function(n){return ri.current.useRef(n)};_t.useState=function(n){return ri.current.useState(n)};_t.useSyncExternalStore=function(n,e,t){return ri.current.useSyncExternalStore(n,e,t)};_t.useTransition=function(){return ri.current.useTransition()};_t.version="18.0.0-fc46dba67-20220329";_e.exports=_t;var ys=_e.exports,Q0={},KM={exports:{}},ki={},zc={exports:{}},$M={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,q){var Q=O.length;O.push(q);e:for(;0<Q;){var oe=Q-1>>>1,de=O[oe];if(0<r(de,q))O[oe]=q,O[Q]=de,Q=oe;else break e}}function t(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var q=O[0],Q=O.pop();if(Q!==q){O[0]=Q;e:for(var oe=0,de=O.length,ve=de>>>1;oe<ve;){var Ye=2*(oe+1)-1,Ue=O[Ye],ae=Ye+1,at=O[ae];if(0>r(Ue,Q))ae<de&&0>r(at,Ue)?(O[oe]=at,O[ae]=Q,oe=ae):(O[oe]=Ue,O[Ye]=Q,oe=Ye);else if(ae<de&&0>r(at,Q))O[oe]=at,O[ae]=Q,oe=ae;else break e}}return q}function r(O,q){var Q=O.sortIndex-q.sortIndex;return Q!==0?Q:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],f=[],d=1,p=null,m=3,g=!1,x=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(O){for(var q=t(f);q!==null;){if(q.callback===null)i(f);else if(q.startTime<=O)i(f),q.sortIndex=q.expirationTime,e(c,q);else break;q=t(f)}}function b(O){if(y=!1,E(O),!x)if(t(c)!==null)x=!0,X(A);else{var q=t(f);q!==null&&$(b,q.startTime-O)}}function A(O,q){x=!1,y&&(y=!1,S(D),D=-1),g=!0;var Q=m;try{for(E(q),p=t(c);p!==null&&(!(p.expirationTime>q)||O&&!C());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,m=p.priorityLevel;var de=oe(p.expirationTime<=q);q=n.unstable_now(),typeof de=="function"?p.callback=de:p===t(c)&&i(c),E(q)}else i(c);p=t(c)}if(p!==null)var ve=!0;else{var Ye=t(f);Ye!==null&&$(b,Ye.startTime-q),ve=!1}return ve}finally{p=null,m=Q,g=!1}}var R=!1,P=null,D=-1,V=5,U=-1;function C(){return!(n.unstable_now()-U<V)}function k(){if(P!==null){var O=n.unstable_now();U=O;var q=!0;try{q=P(!0,O)}finally{q?ee():(R=!1,P=null)}}else R=!1}var ee;if(typeof _=="function")ee=function(){_(k)};else if(typeof MessageChannel!="undefined"){var W=new MessageChannel,K=W.port2;W.port1.onmessage=k,ee=function(){K.postMessage(null)}}else ee=function(){w(k,0)};function X(O){P=O,R||(R=!0,ee())}function $(O,q){D=w(function(){O(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,X(A))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(O){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var Q=m;m=q;try{return O()}finally{m=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=m;m=O;try{return q()}finally{m=Q}},n.unstable_scheduleCallback=function(O,q,Q){var oe=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,O){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Q+de,O={id:d++,callback:q,priorityLevel:O,startTime:Q,expirationTime:de,sortIndex:-1},Q>oe?(O.sortIndex=Q,e(f,O),t(c)===null&&O===t(f)&&(y?(S(D),D=-1):y=!0,$(b,Q-oe))):(O.sortIndex=de,e(c,O),x||g||(x=!0,X(A))),O},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(O){var q=m;return function(){var Q=m;m=q;try{return O.apply(this,arguments)}finally{m=Q}}}})($M);zc.exports=$M;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE=_e.exports,zi=zc.exports;function ge(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tE=new Set,Fc={};function Fa(n,e){Jl(n,e),Jl(n+"Capture",e)}function Jl(n,e){for(Fc[n]=e,n=0;n<e.length;n++)tE.add(e[n])}var Ss=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),J0=Object.prototype.hasOwnProperty,FA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ew={},tw={};function kA(n){return J0.call(tw,n)?!0:J0.call(ew,n)?!1:FA.test(n)?tw[n]=!0:(ew[n]=!0,!1)}function BA(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function OA(n,e,t,i){if(e===null||typeof e=="undefined"||BA(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function si(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Fn[n]=new si(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Fn[e]=new si(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Fn[n]=new si(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Fn[n]=new si(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Fn[n]=new si(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Fn[n]=new si(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Fn[n]=new si(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Fn[n]=new si(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Fn[n]=new si(n,5,!1,n.toLowerCase(),null,!1,!1)});var Iy=/[\-:]([a-z])/g;function Ny(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Iy,Ny);Fn[e]=new si(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Iy,Ny);Fn[e]=new si(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Iy,Ny);Fn[e]=new si(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Fn[n]=new si(n,1,!1,n.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Fn[n]=new si(n,1,!1,n.toLowerCase(),null,!0,!0)});function zy(n,e,t,i){var r=Fn.hasOwnProperty(e)?Fn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OA(e,t,r,i)&&(t=null),i||r===null?kA(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Cs=eE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ld=Symbol.for("react.element"),Cl=Symbol.for("react.portal"),Rl=Symbol.for("react.fragment"),Fy=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),nE=Symbol.for("react.provider"),iE=Symbol.for("react.context"),ky=Symbol.for("react.forward_ref"),$0=Symbol.for("react.suspense"),ev=Symbol.for("react.suspense_list"),By=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),rE=Symbol.for("react.offscreen"),nw=Symbol.iterator;function $u(n){return n===null||typeof n!="object"?null:(n=nw&&n[nw]||n["@@iterator"],typeof n=="function"?n:null)}var nn=Object.assign,Dg;function xc(n){if(Dg===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Dg=e&&e[1]||""}return`
`+Dg+n}var Ig=!1;function Ng(n,e){if(!n||Ig)return"";Ig=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(n,[],e)}else{try{e.call()}catch(f){i=f}n.call(e.prototype)}else{try{throw Error()}catch(f){i=f}n()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var c=`
`+r[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ig=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?xc(n):""}function UA(n){switch(n.tag){case 5:return xc(n.type);case 16:return xc("Lazy");case 13:return xc("Suspense");case 19:return xc("SuspenseList");case 0:case 2:case 15:return n=Ng(n.type,!1),n;case 11:return n=Ng(n.type.render,!1),n;case 1:return n=Ng(n.type,!0),n;default:return""}}function tv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Rl:return"Fragment";case Cl:return"Portal";case K0:return"Profiler";case Fy:return"StrictMode";case $0:return"Suspense";case ev:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case iE:return(n.displayName||"Context")+".Consumer";case nE:return(n._context.displayName||"Context")+".Provider";case ky:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case By:return e=n.displayName||null,e!==null?e:tv(n.type)||"Memo";case Ks:e=n._payload,n=n._init;try{return tv(n(e))}catch{}}return null}function HA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tv(e);case 8:return e===Fy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function sE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function GA(n){var e=sE(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Dd(n){n._valueTracker||(n._valueTracker=GA(n))}function oE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=sE(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function rp(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch{return n.body}}function nv(n,e){var t=e.checked;return nn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function iw(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=yo(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aE(n,e){e=e.checked,e!=null&&zy(n,"checked",e,!1)}function iv(n,e){aE(n,e);var t=yo(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?rv(n,e.type,t):e.hasOwnProperty("defaultValue")&&rv(n,e.type,yo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function rw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function rv(n,e,t){(e!=="number"||rp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var _c=Array.isArray;function Vl(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+yo(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function sv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return nn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ge(92));if(_c(t)){if(1<t.length)throw Error(ge(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:yo(t)}}function lE(n,e){var t=yo(e.value),i=yo(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function ow(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function uE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ov(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?uE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Id,cE=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Id=Id||document.createElement("div"),Id.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Id.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function kc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Ec={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VA=["Webkit","ms","Moz","O"];Object.keys(Ec).forEach(function(n){VA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Ec[e]=Ec[n]})});function fE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Ec.hasOwnProperty(n)&&Ec[n]?(""+e).trim():e+"px"}function dE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=fE(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var WA=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function av(n,e){if(e){if(WA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function lv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uv=null;function Oy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var cv=null,Wl=null,jl=null;function aw(n){if(n=wf(n)){if(typeof cv!="function")throw Error(ge(280));var e=n.stateNode;e&&(e=Up(e),cv(n.stateNode,n.type,e))}}function hE(n){Wl?jl?jl.push(n):jl=[n]:Wl=n}function pE(){if(Wl){var n=Wl,e=jl;if(jl=Wl=null,aw(n),e)for(n=0;n<e.length;n++)aw(e[n])}}function mE(n,e){return n(e)}function gE(){}var zg=!1;function vE(n,e,t){if(zg)return n(e,t);zg=!0;try{return mE(n,e,t)}finally{zg=!1,(Wl!==null||jl!==null)&&(gE(),pE())}}function Bc(n,e){var t=n.stateNode;if(t===null)return null;var i=Up(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ge(231,e,typeof t));return t}var fv=!1;if(Ss)try{var ec={};Object.defineProperty(ec,"passive",{get:function(){fv=!0}}),window.addEventListener("test",ec,ec),window.removeEventListener("test",ec,ec)}catch{fv=!1}function jA(n,e,t,i,r,s,o,l,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(t,f)}catch(d){this.onError(d)}}var Tc=!1,sp=null,op=!1,dv=null,qA={onError:function(n){Tc=!0,sp=n}};function XA(n,e,t,i,r,s,o,l,c){Tc=!1,sp=null,jA.apply(qA,arguments)}function YA(n,e,t,i,r,s,o,l,c){if(XA.apply(this,arguments),Tc){if(Tc){var f=sp;Tc=!1,sp=null}else throw Error(ge(198));op||(op=!0,dv=f)}}function ka(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&4098)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function yE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function lw(n){if(ka(n)!==n)throw Error(ge(188))}function ZA(n){var e=n.alternate;if(!e){if(e=ka(n),e===null)throw Error(ge(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return lw(r),n;if(s===i)return lw(r),e;s=s.sibling}throw Error(ge(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===t){o=!0,t=r,i=s;break}if(l===i){o=!0,i=r,t=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===t){o=!0,t=s,i=r;break}if(l===i){o=!0,i=s,t=r;break}l=l.sibling}if(!o)throw Error(ge(189))}}if(t.alternate!==i)throw Error(ge(190))}if(t.tag!==3)throw Error(ge(188));return t.stateNode.current===t?n:e}function xE(n){return n=ZA(n),n!==null?_E(n):null}function _E(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=_E(n);if(e!==null)return e;n=n.sibling}return null}var wE=zi.unstable_scheduleCallback,uw=zi.unstable_cancelCallback,QA=zi.unstable_shouldYield,JA=zi.unstable_requestPaint,un=zi.unstable_now,KA=zi.unstable_getCurrentPriorityLevel,Uy=zi.unstable_ImmediatePriority,SE=zi.unstable_UserBlockingPriority,ap=zi.unstable_NormalPriority,$A=zi.unstable_LowPriority,ME=zi.unstable_IdlePriority,Fp=null,Gr=null;function eC(n){if(Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(Fp,n,void 0,(n.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:iC,tC=Math.log,nC=Math.LN2;function iC(n){return n>>>=0,n===0?32:31-(tC(n)/nC|0)|0}var Nd=64,zd=4194304;function wc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function lp(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~r;l!==0?i=wc(l):(s&=o,s!==0&&(i=wc(s)))}else o=t&~r,o!==0?i=wc(o):s!==0&&(i=wc(s));if(i===0)return 0;if(e!==0&&e!==i&&(e&r)===0&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if((i&4)!==0&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Mr(e),r=1<<t,i|=n[t],e&=~r;return i}function rC(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sC(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Mr(s),l=1<<o,c=r[o];c===-1?((l&t)===0||(l&i)!==0)&&(r[o]=rC(l,e)):c<=e&&(n.expiredLanes|=l),s&=~l}}function hv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Fg(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function xf(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Mr(e),n[e]=t}function oC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Mr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Hy(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Mr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var kt=0;function EE(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var TE,Gy,bE,AE,CE,pv=!1,Fd=[],oo=null,ao=null,lo=null,Oc=new Map,Uc=new Map,eo=[],aC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cw(n,e){switch(n){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(e.pointerId)}}function tc(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=wf(e),e!==null&&Gy(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function lC(n,e,t,i,r){switch(e){case"focusin":return oo=tc(oo,n,e,t,i,r),!0;case"dragenter":return ao=tc(ao,n,e,t,i,r),!0;case"mouseover":return lo=tc(lo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Oc.set(s,tc(Oc.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Uc.set(s,tc(Uc.get(s)||null,n,e,t,i,r)),!0}return!1}function RE(n){var e=ca(n.target);if(e!==null){var t=ka(e);if(t!==null){if(e=t.tag,e===13){if(e=yE(t),e!==null){n.blockedOn=e,CE(n.priority,function(){bE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Gh(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=mv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);uv=i,t.target.dispatchEvent(i),uv=null}else return e=wf(t),e!==null&&Gy(e),n.blockedOn=t,!1;e.shift()}return!0}function fw(n,e,t){Gh(n)&&t.delete(e)}function uC(){pv=!1,oo!==null&&Gh(oo)&&(oo=null),ao!==null&&Gh(ao)&&(ao=null),lo!==null&&Gh(lo)&&(lo=null),Oc.forEach(fw),Uc.forEach(fw)}function nc(n,e){n.blockedOn===e&&(n.blockedOn=null,pv||(pv=!0,zi.unstable_scheduleCallback(zi.unstable_NormalPriority,uC)))}function Hc(n){function e(r){return nc(r,n)}if(0<Fd.length){nc(Fd[0],n);for(var t=1;t<Fd.length;t++){var i=Fd[t];i.blockedOn===n&&(i.blockedOn=null)}}for(oo!==null&&nc(oo,n),ao!==null&&nc(ao,n),lo!==null&&nc(lo,n),Oc.forEach(e),Uc.forEach(e),t=0;t<eo.length;t++)i=eo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<eo.length&&(t=eo[0],t.blockedOn===null);)RE(t),t.blockedOn===null&&eo.shift()}var ql=Cs.ReactCurrentBatchConfig;function cC(n,e,t,i){var r=kt,s=ql.transition;ql.transition=null;try{kt=1,Vy(n,e,t,i)}finally{kt=r,ql.transition=s}}function fC(n,e,t,i){var r=kt,s=ql.transition;ql.transition=null;try{kt=4,Vy(n,e,t,i)}finally{kt=r,ql.transition=s}}function Vy(n,e,t,i){var r=mv(n,e,t,i);if(r===null)qg(n,e,i,up,t),cw(n,i);else if(lC(r,n,e,t,i))i.stopPropagation();else if(cw(n,i),e&4&&-1<aC.indexOf(n)){for(;r!==null;){var s=wf(r);if(s!==null&&TE(s),s=mv(n,e,t,i),s===null&&qg(n,e,i,up,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else qg(n,e,i,null,t)}var up=null;function mv(n,e,t,i){if(up=null,n=Oy(i),n=ca(n),n!==null)if(e=ka(n),e===null)n=null;else if(t=e.tag,t===13){if(n=yE(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return up=n,null}function PE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KA()){case Uy:return 1;case SE:return 4;case ap:case $A:return 16;case ME:return 536870912;default:return 16}default:return 16}}var no=null,Wy=null,Vh=null;function LE(){if(Vh)return Vh;var n,e=Wy,t=e.length,i,r="value"in no?no.value:no.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Vh=r.slice(n,1<i?1-i:void 0)}function Wh(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function kd(){return!0}function dw(){return!1}function Bi(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kd:dw,this.isPropagationStopped=dw,this}return nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=kd)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=kd)},persist:function(){},isPersistent:kd}),e}var Mu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jy=Bi(Mu),_f=nn({},Mu,{view:0,detail:0}),dC=Bi(_f),kg,Bg,ic,kp=nn({},_f,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ic&&(ic&&n.type==="mousemove"?(kg=n.screenX-ic.screenX,Bg=n.screenY-ic.screenY):Bg=kg=0,ic=n),kg)},movementY:function(n){return"movementY"in n?n.movementY:Bg}}),hw=Bi(kp),hC=nn({},kp,{dataTransfer:0}),pC=Bi(hC),mC=nn({},_f,{relatedTarget:0}),Og=Bi(mC),gC=nn({},Mu,{animationName:0,elapsedTime:0,pseudoElement:0}),vC=Bi(gC),yC=nn({},Mu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xC=Bi(yC),_C=nn({},Mu,{data:0}),pw=Bi(_C),wC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EC(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=MC[n])?!!e[n]:!1}function qy(){return EC}var TC=nn({},_f,{key:function(n){if(n.key){var e=wC[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Wh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?SC[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qy,charCode:function(n){return n.type==="keypress"?Wh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),bC=Bi(TC),AC=nn({},kp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mw=Bi(AC),CC=nn({},_f,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qy}),RC=Bi(CC),PC=nn({},Mu,{propertyName:0,elapsedTime:0,pseudoElement:0}),LC=Bi(PC),DC=nn({},kp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),IC=Bi(DC),NC=[9,13,27,32],Xy=Ss&&"CompositionEvent"in window,bc=null;Ss&&"documentMode"in document&&(bc=document.documentMode);var zC=Ss&&"TextEvent"in window&&!bc,DE=Ss&&(!Xy||bc&&8<bc&&11>=bc),gw=String.fromCharCode(32),vw=!1;function IE(n,e){switch(n){case"keyup":return NC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pl=!1;function FC(n,e){switch(n){case"compositionend":return NE(e);case"keypress":return e.which!==32?null:(vw=!0,gw);case"textInput":return n=e.data,n===gw&&vw?null:n;default:return null}}function kC(n,e){if(Pl)return n==="compositionend"||!Xy&&IE(n,e)?(n=LE(),Vh=Wy=no=null,Pl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DE&&e.locale!=="ko"?null:e.data;default:return null}}var BC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!BC[n.type]:e==="textarea"}function zE(n,e,t,i){hE(i),e=cp(e,"onChange"),0<e.length&&(t=new jy("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Ac=null,Gc=null;function OC(n){qE(n,0)}function Bp(n){var e=Il(n);if(oE(e))return n}function UC(n,e){if(n==="change")return e}var FE=!1;if(Ss){var Ug;if(Ss){var Hg="oninput"in document;if(!Hg){var xw=document.createElement("div");xw.setAttribute("oninput","return;"),Hg=typeof xw.oninput=="function"}Ug=Hg}else Ug=!1;FE=Ug&&(!document.documentMode||9<document.documentMode)}function _w(){Ac&&(Ac.detachEvent("onpropertychange",kE),Gc=Ac=null)}function kE(n){if(n.propertyName==="value"&&Bp(Gc)){var e=[];zE(e,Gc,n,Oy(n)),vE(OC,e)}}function HC(n,e,t){n==="focusin"?(_w(),Ac=e,Gc=t,Ac.attachEvent("onpropertychange",kE)):n==="focusout"&&_w()}function GC(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bp(Gc)}function VC(n,e){if(n==="click")return Bp(e)}function WC(n,e){if(n==="input"||n==="change")return Bp(e)}function jC(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qr=typeof Object.is=="function"?Object.is:jC;function Vc(n,e){if(qr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!J0.call(e,r)||!qr(n[r],e[r]))return!1}return!0}function ww(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Sw(n,e){var t=ww(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ww(t)}}function BE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?BE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function OE(){for(var n=window,e=rp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=rp(n.document)}return e}function Yy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function qC(n){var e=OE(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&BE(t.ownerDocument.documentElement,t)){if(i!==null&&Yy(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=Sw(t,s);var o=Sw(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var XC=Ss&&"documentMode"in document&&11>=document.documentMode,Ll=null,gv=null,Cc=null,vv=!1;function Mw(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;vv||Ll==null||Ll!==rp(i)||(i=Ll,"selectionStart"in i&&Yy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Cc&&Vc(Cc,i)||(Cc=i,i=cp(gv,"onSelect"),0<i.length&&(e=new jy("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Ll)))}function Bd(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Dl={animationend:Bd("Animation","AnimationEnd"),animationiteration:Bd("Animation","AnimationIteration"),animationstart:Bd("Animation","AnimationStart"),transitionend:Bd("Transition","TransitionEnd")},Gg={},UE={};Ss&&(UE=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function Op(n){if(Gg[n])return Gg[n];if(!Dl[n])return n;var e=Dl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in UE)return Gg[n]=e[t];return n}var HE=Op("animationend"),GE=Op("animationiteration"),VE=Op("animationstart"),WE=Op("transitionend"),jE=new Map,Ew="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Co(n,e){jE.set(n,e),Fa(e,[n])}for(var Vg=0;Vg<Ew.length;Vg++){var Wg=Ew[Vg],YC=Wg.toLowerCase(),ZC=Wg[0].toUpperCase()+Wg.slice(1);Co(YC,"on"+ZC)}Co(HE,"onAnimationEnd");Co(GE,"onAnimationIteration");Co(VE,"onAnimationStart");Co("dblclick","onDoubleClick");Co("focusin","onFocus");Co("focusout","onBlur");Co(WE,"onTransitionEnd");Jl("onMouseEnter",["mouseout","mouseover"]);Jl("onMouseLeave",["mouseout","mouseover"]);Jl("onPointerEnter",["pointerout","pointerover"]);Jl("onPointerLeave",["pointerout","pointerover"]);Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sc));function Tw(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,YA(i,e,void 0,n),n.currentTarget=null}function qE(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==s&&r.isPropagationStopped())break e;Tw(r,l,f),s=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,f=l.currentTarget,l=l.listener,c!==s&&r.isPropagationStopped())break e;Tw(r,l,f),s=c}}}if(op)throw n=dv,op=!1,dv=null,n}function Vt(n,e){var t=e[wv];t===void 0&&(t=e[wv]=new Set);var i=n+"__bubble";t.has(i)||(XE(e,n,2,!1),t.add(i))}function jg(n,e,t){var i=0;e&&(i|=4),XE(t,n,i,e)}var Od="_reactListening"+Math.random().toString(36).slice(2);function Wc(n){if(!n[Od]){n[Od]=!0,tE.forEach(function(t){t!=="selectionchange"&&(QC.has(t)||jg(t,!1,n),jg(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Od]||(e[Od]=!0,jg("selectionchange",!1,e))}}function XE(n,e,t,i){switch(PE(e)){case 1:var r=cC;break;case 4:r=fC;break;default:r=Vy}t=r.bind(null,e,t,n),r=void 0,!fv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function qg(n,e,t,i,r){var s=i;if((e&1)===0&&(e&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=ca(l),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue e}l=l.parentNode}}i=i.return}vE(function(){var f=s,d=Oy(t),p=[];e:{var m=jE.get(n);if(m!==void 0){var g=jy,x=n;switch(n){case"keypress":if(Wh(t)===0)break e;case"keydown":case"keyup":g=bC;break;case"focusin":x="focus",g=Og;break;case"focusout":x="blur",g=Og;break;case"beforeblur":case"afterblur":g=Og;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=pC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=RC;break;case HE:case GE:case VE:g=vC;break;case WE:g=LC;break;case"scroll":g=dC;break;case"wheel":g=IC;break;case"copy":case"cut":case"paste":g=xC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=mw}var y=(e&4)!==0,w=!y&&n==="scroll",S=y?m!==null?m+"Capture":null:m;y=[];for(var _=f,E;_!==null;){E=_;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,S!==null&&(b=Bc(_,S),b!=null&&y.push(jc(_,b,E)))),w)break;_=_.return}0<y.length&&(m=new g(m,x,null,t,d),p.push({event:m,listeners:y}))}}if((e&7)===0){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==uv&&(x=t.relatedTarget||t.fromElement)&&(ca(x)||x[Ms]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=t.relatedTarget||t.toElement,g=f,x=x?ca(x):null,x!==null&&(w=ka(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=f),g!==x)){if(y=hw,b="onMouseLeave",S="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(y=mw,b="onPointerLeave",S="onPointerEnter",_="pointer"),w=g==null?m:Il(g),E=x==null?m:Il(x),m=new y(b,_+"leave",g,t,d),m.target=w,m.relatedTarget=E,b=null,ca(d)===f&&(y=new y(S,_+"enter",x,t,d),y.target=E,y.relatedTarget=w,b=y),w=b,g&&x)t:{for(y=g,S=x,_=0,E=y;E;E=ol(E))_++;for(E=0,b=S;b;b=ol(b))E++;for(;0<_-E;)y=ol(y),_--;for(;0<E-_;)S=ol(S),E--;for(;_--;){if(y===S||S!==null&&y===S.alternate)break t;y=ol(y),S=ol(S)}y=null}else y=null;g!==null&&bw(p,m,g,y,!1),x!==null&&w!==null&&bw(p,w,x,y,!0)}}e:{if(m=f?Il(f):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=UC;else if(yw(m))if(FE)A=WC;else{A=GC;var R=HC}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=VC);if(A&&(A=A(n,f))){zE(p,A,t,d);break e}R&&R(n,m,f),n==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&rv(m,"number",m.value)}switch(R=f?Il(f):window,n){case"focusin":(yw(R)||R.contentEditable==="true")&&(Ll=R,gv=f,Cc=null);break;case"focusout":Cc=gv=Ll=null;break;case"mousedown":vv=!0;break;case"contextmenu":case"mouseup":case"dragend":vv=!1,Mw(p,t,d);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":Mw(p,t,d)}var P;if(Xy)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Pl?IE(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(DE&&t.locale!=="ko"&&(Pl||D!=="onCompositionStart"?D==="onCompositionEnd"&&Pl&&(P=LE()):(no=d,Wy="value"in no?no.value:no.textContent,Pl=!0)),R=cp(f,D),0<R.length&&(D=new pw(D,n,null,t,d),p.push({event:D,listeners:R}),P?D.data=P:(P=NE(t),P!==null&&(D.data=P)))),(P=zC?FC(n,t):kC(n,t))&&(f=cp(f,"onBeforeInput"),0<f.length&&(d=new pw("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:f}),d.data=P))}qE(p,e)})}function jc(n,e,t){return{instance:n,listener:e,currentTarget:t}}function cp(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Bc(n,t),s!=null&&i.unshift(jc(n,s,r)),s=Bc(n,e),s!=null&&i.push(jc(n,s,r))),n=n.return}return i}function ol(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function bw(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var l=t,c=l.alternate,f=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&f!==null&&(l=f,r?(c=Bc(t,s),c!=null&&o.unshift(jc(t,c,l))):r||(c=Bc(t,s),c!=null&&o.push(jc(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var JC=/\r\n?/g,KC=/\u0000|\uFFFD/g;function Aw(n){return(typeof n=="string"?n:""+n).replace(JC,`
`).replace(KC,"")}function Ud(n,e,t){if(e=Aw(e),Aw(n)!==e&&t)throw Error(ge(425))}function fp(){}var yv=null;function xv(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _v=typeof setTimeout=="function"?setTimeout:void 0,$C=typeof clearTimeout=="function"?clearTimeout:void 0,Cw=typeof Promise=="function"?Promise:void 0,eR=typeof queueMicrotask=="function"?queueMicrotask:typeof Cw!="undefined"?function(n){return Cw.resolve(null).then(n).catch(tR)}:_v;function tR(n){setTimeout(function(){throw n})}function Xg(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Hc(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Hc(e)}function ms(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Rw(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Eu=Math.random().toString(36).slice(2),Or="__reactFiber$"+Eu,qc="__reactProps$"+Eu,Ms="__reactContainer$"+Eu,wv="__reactEvents$"+Eu,nR="__reactListeners$"+Eu,iR="__reactHandles$"+Eu;function ca(n){var e=n[Or];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ms]||t[Or]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Rw(n);n!==null;){if(t=n[Or])return t;n=Rw(n)}return e}n=t,t=n.parentNode}return null}function wf(n){return n=n[Or]||n[Ms],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Il(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ge(33))}function Up(n){return n[qc]||null}var Sv=[],Nl=-1;function Ro(n){return{current:n}}function qt(n){0>Nl||(n.current=Sv[Nl],Sv[Nl]=null,Nl--)}function Gt(n,e){Nl++,Sv[Nl]=n.current,n.current=e}var xo={},qn=Ro(xo),vi=Ro(!1),ba=xo;function Kl(n,e){var t=n.type.contextTypes;if(!t)return xo;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function yi(n){return n=n.childContextTypes,n!=null}function dp(){qt(vi),qt(qn)}function Pw(n,e,t){if(qn.current!==xo)throw Error(ge(168));Gt(qn,e),Gt(vi,t)}function YE(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ge(108,HA(n)||"Unknown",r));return nn({},t,i)}function hp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||xo,ba=qn.current,Gt(qn,n),Gt(vi,vi.current),!0}function Lw(n,e,t){var i=n.stateNode;if(!i)throw Error(ge(169));t?(n=YE(n,e,ba),i.__reactInternalMemoizedMergedChildContext=n,qt(vi),qt(qn),Gt(qn,n)):qt(vi),Gt(vi,t)}var ps=null,Hp=!1,Yg=!1;function ZE(n){ps===null?ps=[n]:ps.push(n)}function rR(n){Hp=!0,ZE(n)}function Po(){if(!Yg&&ps!==null){Yg=!0;var n=0,e=kt;try{var t=ps;for(kt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}ps=null,Hp=!1}catch(r){throw ps!==null&&(ps=ps.slice(n+1)),wE(Uy,Po),r}finally{kt=e,Yg=!1}}return null}var sR=Cs.ReactCurrentBatchConfig;function xr(n,e){if(n&&n.defaultProps){e=nn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var pp=Ro(null),mp=null,zl=null,Zy=null;function Qy(){Zy=zl=mp=null}function Jy(n){var e=pp.current;qt(pp),n._currentValue=e}function Mv(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Xl(n,e){mp=n,Zy=zl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(Li=!0),n.firstContext=null)}function or(n){var e=n._currentValue;if(Zy!==n)if(n={context:n,memoizedValue:e,next:null},zl===null){if(mp===null)throw Error(ge(308));zl=n,mp.dependencies={lanes:0,firstContext:n}}else zl=zl.next=n;return e}var Ur=null,$s=!1;function Ky(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QE(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(n,e){var t=n.updateQueue;t!==null&&(t=t.shared,xn!==null&&(n.mode&1)!==0&&(Mt&2)===0?(n=t.interleaved,n===null?(e.next=e,Ur===null?Ur=[t]:Ur.push(t)):(e.next=n.next,n.next=e),t.interleaved=e):(n=t.pending,n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e))}function jh(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Hy(n,t)}}function Dw(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function gp(n,e,t,i){var r=n.updateQueue;$s=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,f=c.next;c.next=null,o===null?s=f:o.next=f,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=f:l.next=f,d.lastBaseUpdate=c))}if(s!==null){var p=r.baseState;o=0,d=f=c=null,l=s;do{var m=l.lane,g=l.eventTime;if((i&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=n,y=l;switch(m=e,g=t,y.tag){case 1:if(x=y.payload,typeof x=="function"){p=x.call(g,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,m=typeof x=="function"?x.call(g,p,m):x,m==null)break e;p=nn({},p,m);break e;case 2:$s=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(f=d=g,c=p):d=d.next=g,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(1);if(d===null&&(c=p),r.baseState=c,r.firstBaseUpdate=f,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);iu|=o,n.lanes=o,n.memoizedState=p}}function Iw(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ge(191,r));r.call(i)}}}var JE=new eE.Component().refs;function Ev(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:nn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Gp={isMounted:function(n){return(n=n._reactInternals)?ka(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=ti(),r=fo(n),s=xs(i,r);s.payload=e,t!=null&&(s.callback=t),uo(n,s),e=sr(n,r,i),e!==null&&jh(e,n,r)},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=ti(),r=fo(n),s=xs(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),uo(n,s),e=sr(n,r,i),e!==null&&jh(e,n,r)},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ti(),i=fo(n),r=xs(t,i);r.tag=2,e!=null&&(r.callback=e),uo(n,r),e=sr(n,i,t),e!==null&&jh(e,n,i)}};function Nw(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vc(t,i)||!Vc(r,s):!0}function KE(n,e,t){var i=!1,r=xo,s=e.contextType;return typeof s=="object"&&s!==null?s=or(s):(r=yi(e)?ba:qn.current,i=e.contextTypes,s=(i=i!=null)?Kl(n,r):xo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gp,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function zw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Gp.enqueueReplaceState(e,e.state,null)}function Tv(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=JE,Ky(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=or(s):(s=yi(e)?ba:qn.current,r.context=Kl(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ev(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Gp.enqueueReplaceState(r,r.state,null),gp(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}var Fl=[],kl=0,vp=null,yp=0,er=[],tr=0,Aa=null,gs=1,vs="";function ia(n,e){Fl[kl++]=yp,Fl[kl++]=vp,vp=n,yp=e}function $E(n,e,t){er[tr++]=gs,er[tr++]=vs,er[tr++]=Aa,Aa=n;var i=gs;n=vs;var r=32-Mr(i)-1;i&=~(1<<r),t+=1;var s=32-Mr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,gs=1<<32-Mr(e)+r|t<<r|i,vs=s+n}else gs=1<<s|t<<r|i,vs=n}function $y(n){n.return!==null&&(ia(n,1),$E(n,1,0))}function ex(n){for(;n===vp;)vp=Fl[--kl],Fl[kl]=null,yp=Fl[--kl],Fl[kl]=null;for(;n===Aa;)Aa=er[--tr],er[tr]=null,vs=er[--tr],er[tr]=null,gs=er[--tr],er[tr]=null}var Ii=null,mi=null,Qt=!1,_r=null;function eT(n,e){var t=nr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Fw(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ii=n,mi=ms(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ii=n,mi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Aa!==null?{id:gs,overflow:vs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=nr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ii=n,mi=null,!0):!1;default:return!1}}function bv(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Av(n){if(Qt){var e=mi;if(e){var t=e;if(!Fw(n,e)){if(bv(n))throw Error(ge(418));e=ms(t.nextSibling);var i=Ii;e&&Fw(n,e)?eT(i,t):(n.flags=n.flags&-4097|2,Qt=!1,Ii=n)}}else{if(bv(n))throw Error(ge(418));n.flags=n.flags&-4097|2,Qt=!1,Ii=n}}}function kw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ii=n}function rc(n){if(n!==Ii)return!1;if(!Qt)return kw(n),Qt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!xv(n.type,n.memoizedProps)),e&&(e=mi)){if(bv(n)){for(n=mi;n;)n=ms(n.nextSibling);throw Error(ge(418))}for(;e;)eT(n,e),e=ms(e.nextSibling)}if(kw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ge(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){mi=ms(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}mi=null}}else mi=Ii?ms(n.stateNode.nextSibling):null;return!0}function $l(){mi=Ii=null,Qt=!1}function tx(n){_r===null?_r=[n]:_r.push(n)}function sc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ge(309));var i=t.stateNode}if(!i)throw Error(ge(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;l===JE&&(l=r.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ge(284));if(!t._owner)throw Error(ge(290,n))}return n}function Hd(n,e){throw n=Object.prototype.toString.call(e),Error(ge(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Bw(n){var e=n._init;return e(n._payload)}function tT(n){function e(S,_){if(n){var E=S.deletions;E===null?(S.deletions=[_],S.flags|=16):E.push(_)}}function t(S,_){if(!n)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function i(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function r(S,_){return S=_o(S,_),S.index=0,S.sibling=null,S}function s(S,_,E){return S.index=E,n?(E=S.alternate,E!==null?(E=E.index,E<_?(S.flags|=2,_):E):(S.flags|=2,_)):(S.flags|=1048576,_)}function o(S){return n&&S.alternate===null&&(S.flags|=2),S}function l(S,_,E,b){return _===null||_.tag!==6?(_=e0(E,S.mode,b),_.return=S,_):(_=r(_,E),_.return=S,_)}function c(S,_,E,b){var A=E.type;return A===Rl?d(S,_,E.props.children,b,E.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ks&&Bw(A)===_.type)?(b=r(_,E.props),b.ref=sc(S,_,E),b.return=S,b):(b=Qh(E.type,E.key,E.props,null,S.mode,b),b.ref=sc(S,_,E),b.return=S,b)}function f(S,_,E,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=t0(E,S.mode,b),_.return=S,_):(_=r(_,E.children||[]),_.return=S,_)}function d(S,_,E,b,A){return _===null||_.tag!==7?(_=xa(E,S.mode,b,A),_.return=S,_):(_=r(_,E),_.return=S,_)}function p(S,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=e0(""+_,S.mode,E),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ld:return E=Qh(_.type,_.key,_.props,null,S.mode,E),E.ref=sc(S,null,_),E.return=S,E;case Cl:return _=t0(_,S.mode,E),_.return=S,_;case Ks:var b=_._init;return p(S,b(_._payload),E)}if(_c(_)||$u(_))return _=xa(_,S.mode,E,null),_.return=S,_;Hd(S,_)}return null}function m(S,_,E,b){var A=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:l(S,_,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ld:return E.key===A?c(S,_,E,b):null;case Cl:return E.key===A?f(S,_,E,b):null;case Ks:return A=E._init,m(S,_,A(E._payload),b)}if(_c(E)||$u(E))return A!==null?null:d(S,_,E,b,null);Hd(S,E)}return null}function g(S,_,E,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return S=S.get(E)||null,l(_,S,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ld:return S=S.get(b.key===null?E:b.key)||null,c(_,S,b,A);case Cl:return S=S.get(b.key===null?E:b.key)||null,f(_,S,b,A);case Ks:var R=b._init;return g(S,_,E,R(b._payload),A)}if(_c(b)||$u(b))return S=S.get(E)||null,d(_,S,b,A,null);Hd(_,b)}return null}function x(S,_,E,b){for(var A=null,R=null,P=_,D=_=0,V=null;P!==null&&D<E.length;D++){P.index>D?(V=P,P=null):V=P.sibling;var U=m(S,P,E[D],b);if(U===null){P===null&&(P=V);break}n&&P&&U.alternate===null&&e(S,P),_=s(U,_,D),R===null?A=U:R.sibling=U,R=U,P=V}if(D===E.length)return t(S,P),Qt&&ia(S,D),A;if(P===null){for(;D<E.length;D++)P=p(S,E[D],b),P!==null&&(_=s(P,_,D),R===null?A=P:R.sibling=P,R=P);return Qt&&ia(S,D),A}for(P=i(S,P);D<E.length;D++)V=g(P,S,D,E[D],b),V!==null&&(n&&V.alternate!==null&&P.delete(V.key===null?D:V.key),_=s(V,_,D),R===null?A=V:R.sibling=V,R=V);return n&&P.forEach(function(C){return e(S,C)}),Qt&&ia(S,D),A}function y(S,_,E,b){var A=$u(E);if(typeof A!="function")throw Error(ge(150));if(E=A.call(E),E==null)throw Error(ge(151));for(var R=A=null,P=_,D=_=0,V=null,U=E.next();P!==null&&!U.done;D++,U=E.next()){P.index>D?(V=P,P=null):V=P.sibling;var C=m(S,P,U.value,b);if(C===null){P===null&&(P=V);break}n&&P&&C.alternate===null&&e(S,P),_=s(C,_,D),R===null?A=C:R.sibling=C,R=C,P=V}if(U.done)return t(S,P),Qt&&ia(S,D),A;if(P===null){for(;!U.done;D++,U=E.next())U=p(S,U.value,b),U!==null&&(_=s(U,_,D),R===null?A=U:R.sibling=U,R=U);return Qt&&ia(S,D),A}for(P=i(S,P);!U.done;D++,U=E.next())U=g(P,S,D,U.value,b),U!==null&&(n&&U.alternate!==null&&P.delete(U.key===null?D:U.key),_=s(U,_,D),R===null?A=U:R.sibling=U,R=U);return n&&P.forEach(function(k){return e(S,k)}),Qt&&ia(S,D),A}function w(S,_,E,b){if(typeof E=="object"&&E!==null&&E.type===Rl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ld:e:{for(var A=E.key,R=_;R!==null;){if(R.key===A){if(A=E.type,A===Rl){if(R.tag===7){t(S,R.sibling),_=r(R,E.props.children),_.return=S,S=_;break e}}else if(R.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ks&&Bw(A)===R.type){t(S,R.sibling),_=r(R,E.props),_.ref=sc(S,R,E),_.return=S,S=_;break e}t(S,R);break}else e(S,R);R=R.sibling}E.type===Rl?(_=xa(E.props.children,S.mode,b,E.key),_.return=S,S=_):(b=Qh(E.type,E.key,E.props,null,S.mode,b),b.ref=sc(S,_,E),b.return=S,S=b)}return o(S);case Cl:e:{for(R=E.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){t(S,_.sibling),_=r(_,E.children||[]),_.return=S,S=_;break e}else{t(S,_);break}else e(S,_);_=_.sibling}_=t0(E,S.mode,b),_.return=S,S=_}return o(S);case Ks:return R=E._init,w(S,_,R(E._payload),b)}if(_c(E))return x(S,_,E,b);if($u(E))return y(S,_,E,b);Hd(S,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(t(S,_.sibling),_=r(_,E),_.return=S,S=_):(t(S,_),_=e0(E,S.mode,b),_.return=S,S=_),o(S)):t(S,_)}return w}var eu=tT(!0),nT=tT(!1),Sf={},Vr=Ro(Sf),Xc=Ro(Sf),Yc=Ro(Sf);function fa(n){if(n===Sf)throw Error(ge(174));return n}function nx(n,e){switch(Gt(Yc,e),Gt(Xc,n),Gt(Vr,Sf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ov(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=ov(e,n)}qt(Vr),Gt(Vr,e)}function tu(){qt(Vr),qt(Xc),qt(Yc)}function iT(n){fa(Yc.current);var e=fa(Vr.current),t=ov(e,n.type);e!==t&&(Gt(Xc,n),Gt(Vr,t))}function ix(n){Xc.current===n&&(qt(Vr),qt(Xc))}var $t=Ro(0);function xp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zg=[];function rx(){for(var n=0;n<Zg.length;n++)Zg[n]._workInProgressVersionPrimary=null;Zg.length=0}var qh=Cs.ReactCurrentDispatcher,ir=Cs.ReactCurrentBatchConfig,nu=0,on=null,jn=null,Rn=null,_p=!1,Rc=!1,Zc=0,oR=0;function Gn(){throw Error(ge(321))}function sx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!qr(n[t],e[t]))return!1;return!0}function ox(n,e,t,i,r,s){if(nu=s,on=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qh.current=n===null||n.memoizedState===null?cR:fR,n=t(i,r),Rc){s=0;do{if(Rc=!1,Zc=0,25<=s)throw Error(ge(301));s+=1,Rn=jn=null,e.updateQueue=null,qh.current=dR,n=t(i,r)}while(Rc)}if(qh.current=wp,e=jn!==null&&jn.next!==null,nu=0,Rn=jn=on=null,_p=!1,e)throw Error(ge(300));return n}function ax(){var n=Zc!==0;return Zc=0,n}function hs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?on.memoizedState=Rn=n:Rn=Rn.next=n,Rn}function Jr(){if(jn===null){var n=on.alternate;n=n!==null?n.memoizedState:null}else n=jn.next;var e=Rn===null?on.memoizedState:Rn.next;if(e!==null)Rn=e,jn=n;else{if(n===null)throw Error(ge(310));jn=n,n={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},Rn===null?on.memoizedState=Rn=n:Rn=Rn.next=n}return Rn}function va(n,e){return typeof e=="function"?e(n):e}function Gd(n){var e=Jr(),t=e.queue;if(t===null)throw Error(ge(311));t.lastRenderedReducer=n;var i=jn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,c=null,f=s;do{var d=f.lane;if((nu&d)===d)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:n(i,f.action);else{var p={lane:d,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=p,o=i):c=c.next=p,on.lanes|=d,iu|=d}f=f.next}while(f!==null&&f!==s);c===null?o=i:c.next=l,qr(i,e.memoizedState)||(Li=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,on.lanes|=s,iu|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Vd(n){var e=Jr(),t=e.queue;if(t===null)throw Error(ge(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);qr(s,e.memoizedState)||(Li=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function rT(){}function sT(n,e){var t=on,i=Jr(),r=e(),s=!qr(i.memoizedState,r);if(s&&(i.memoizedState=r,Li=!0),i=i.queue,Jc(lT.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Rn!==null&&Rn.memoizedState.tag&1){if(t.flags|=2048,Qc(9,aT.bind(null,t,i,r,e),void 0,null),xn===null)throw Error(ge(349));(nu&30)!==0||oT(t,e,r)}return r}function oT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=on.updateQueue,e===null?(e={lastEffect:null,stores:null},on.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function aT(n,e,t,i){e.value=t,e.getSnapshot=i,uT(e)&&sr(n,1,-1)}function lT(n,e,t){return t(function(){uT(e)&&sr(n,1,-1)})}function uT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!qr(n,t)}catch{return!0}}function Qg(n){var e=hs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:n},e.queue=n,n=n.dispatch=uR.bind(null,on,n),[e.memoizedState,n]}function Qc(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=on.updateQueue,e===null?(e={lastEffect:null,stores:null},on.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function cT(){return Jr().memoizedState}function Xh(n,e,t,i){var r=hs();on.flags|=n,r.memoizedState=Qc(1|e,t,void 0,i===void 0?null:i)}function Vp(n,e,t,i){var r=Jr();i=i===void 0?null:i;var s=void 0;if(jn!==null){var o=jn.memoizedState;if(s=o.destroy,i!==null&&sx(i,o.deps)){r.memoizedState=Qc(e,t,s,i);return}}on.flags|=n,r.memoizedState=Qc(1|e,t,s,i)}function Jg(n,e){return Xh(8390656,8,n,e)}function Jc(n,e){return Vp(2048,8,n,e)}function fT(n,e){return Vp(4,2,n,e)}function dT(n,e){return Vp(4,4,n,e)}function hT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function pT(n,e,t){return t=t!=null?t.concat([n]):null,Vp(4,4,hT.bind(null,e,n),t)}function lx(){}function mT(n,e){var t=Jr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&sx(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function gT(n,e){var t=Jr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&sx(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function aR(n,e){var t=kt;kt=t!==0&&4>t?t:4,n(!0);var i=ir.transition;ir.transition={};try{n(!1),e()}finally{kt=t,ir.transition=i}}function vT(){return Jr().memoizedState}function lR(n,e,t){var i=fo(n);t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},yT(n)?xT(e,t):(_T(n,e,t),t=ti(),n=sr(n,i,t),n!==null&&wT(n,e,i))}function uR(n,e,t){var i=fo(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(yT(n))xT(e,r);else{_T(n,e,r);var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,t);if(r.hasEagerState=!0,r.eagerState=l,qr(l,o))return}catch{}finally{}t=ti(),n=sr(n,i,t),n!==null&&wT(n,e,i)}}function yT(n){var e=n.alternate;return n===on||e!==null&&e===on}function xT(n,e){Rc=_p=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function _T(n,e,t){xn!==null&&(n.mode&1)!==0&&(Mt&2)===0?(n=e.interleaved,n===null?(t.next=t,Ur===null?Ur=[e]:Ur.push(e)):(t.next=n.next,n.next=t),e.interleaved=t):(n=e.pending,n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t)}function wT(n,e,t){if((t&4194240)!==0){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Hy(n,t)}}var wp={readContext:or,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},cR={readContext:or,useCallback:function(n,e){return hs().memoizedState=[n,e===void 0?null:e],n},useContext:or,useEffect:Jg,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Xh(4194308,4,hT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Xh(4194308,4,n,e)},useInsertionEffect:function(n,e){return Xh(4,2,n,e)},useMemo:function(n,e){var t=hs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=hs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=lR.bind(null,on,n),[i.memoizedState,n]},useRef:function(n){var e=hs();return n={current:n},e.memoizedState=n},useState:Qg,useDebugValue:lx,useDeferredValue:function(n){var e=Qg(n),t=e[0],i=e[1];return Jg(function(){var r=ir.transition;ir.transition={};try{i(n)}finally{ir.transition=r}},[n]),t},useTransition:function(){var n=Qg(!1),e=n[0];return n=aR.bind(null,n[1]),hs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=on,r=hs();if(Qt){if(t===void 0)throw Error(ge(407));t=t()}else{if(t=e(),xn===null)throw Error(ge(349));(nu&30)!==0||oT(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,Jg(lT.bind(null,i,s,n),[n]),i.flags|=2048,Qc(9,aT.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=hs(),e=xn.identifierPrefix;if(Qt){var t=vs,i=gs;t=(i&~(1<<32-Mr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Zc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=oR++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},fR={readContext:or,useCallback:mT,useContext:or,useEffect:Jc,useImperativeHandle:pT,useInsertionEffect:fT,useLayoutEffect:dT,useMemo:gT,useReducer:Gd,useRef:cT,useState:function(){return Gd(va)},useDebugValue:lx,useDeferredValue:function(n){var e=Gd(va),t=e[0],i=e[1];return Jc(function(){var r=ir.transition;ir.transition={};try{i(n)}finally{ir.transition=r}},[n]),t},useTransition:function(){var n=Gd(va)[0],e=Jr().memoizedState;return[n,e]},useMutableSource:rT,useSyncExternalStore:sT,useId:vT,unstable_isNewReconciler:!1},dR={readContext:or,useCallback:mT,useContext:or,useEffect:Jc,useImperativeHandle:pT,useInsertionEffect:fT,useLayoutEffect:dT,useMemo:gT,useReducer:Vd,useRef:cT,useState:function(){return Vd(va)},useDebugValue:lx,useDeferredValue:function(n){var e=Vd(va),t=e[0],i=e[1];return Jc(function(){var r=ir.transition;ir.transition={};try{i(n)}finally{ir.transition=r}},[n]),t},useTransition:function(){var n=Vd(va)[0],e=Jr().memoizedState;return[n,e]},useMutableSource:rT,useSyncExternalStore:sT,useId:vT,unstable_isNewReconciler:!1};function ux(n,e){try{var t="",i=e;do t+=UA(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r}}function Cv(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var hR=typeof WeakMap=="function"?WeakMap:Map;function ST(n,e,t){t=xs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Ep||(Ep=!0,kv=i),Cv(n,e)},t}function MT(n,e,t){t=xs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Cv(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Cv(n,e),typeof i!="function"&&(co===null?co=new Set([this]):co.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Ow(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new hR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=AR.bind(null,n,e,t),e.then(n,n))}function Uw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Hw(n,e,t,i,r){return(n.mode&1)===0?(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=xs(-1,1),e.tag=2,uo(t,e))),t.lanes|=1),n):(n.flags|=65536,n.lanes=r,n)}var ET,Rv,TT,bT;ET=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Rv=function(){};TT=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,fa(Vr.current);var s=null;switch(t){case"input":r=nv(n,r),i=nv(n,i),s=[];break;case"select":r=nn({},r,{value:void 0}),i=nn({},i,{value:void 0}),s=[];break;case"textarea":r=sv(n,r),i=sv(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=fp)}av(t,i);var o;t=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var l=r[f];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Fc.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in i){var c=i[f];if(l=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(s||(s=[]),s.push(f,t)),t=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Fc.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&Vt("scroll",n),s||l===c||(s=[])):(s=s||[]).push(f,c))}t&&(s=s||[]).push("style",t);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};bT=function(n,e,t,i){t!==i&&(e.flags|=4)};function oc(n,e){if(!Qt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Vn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function pR(n,e,t){var i=e.pendingProps;switch(ex(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(e),null;case 1:return yi(e.type)&&dp(),Vn(e),null;case 3:return i=e.stateNode,tu(),qt(vi),qt(qn),rx(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(rc(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,_r!==null&&(Uv(_r),_r=null))),Rv(n,e),Vn(e),null;case 5:ix(e);var r=fa(Yc.current);if(t=e.type,n!==null&&e.stateNode!=null)TT(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ge(166));return Vn(e),null}if(n=fa(Vr.current),rc(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Or]=e,i[qc]=s,n=(e.mode&1)!==0,t){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(r=0;r<Sc.length;r++)Vt(Sc[r],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":iw(i,s),Vt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Vt("invalid",i);break;case"textarea":sw(i,s),Vt("invalid",i)}av(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(Ud(i.textContent,l,n),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(Ud(i.textContent,l,n),r=["children",""+l]):Fc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Vt("scroll",i)}switch(t){case"input":Dd(i),rw(i,s,!0);break;case"textarea":Dd(i),ow(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=fp)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=uE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Or]=e,n[qc]=i,ET(n,e,!1,!1),e.stateNode=n;e:{switch(o=lv(t,i),t){case"dialog":Vt("cancel",n),Vt("close",n),r=i;break;case"iframe":case"object":case"embed":Vt("load",n),r=i;break;case"video":case"audio":for(r=0;r<Sc.length;r++)Vt(Sc[r],n);r=i;break;case"source":Vt("error",n),r=i;break;case"img":case"image":case"link":Vt("error",n),Vt("load",n),r=i;break;case"details":Vt("toggle",n),r=i;break;case"input":iw(n,i),r=nv(n,i),Vt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=nn({},i,{value:void 0}),Vt("invalid",n);break;case"textarea":sw(n,i),r=sv(n,i),Vt("invalid",n);break;default:r=i}av(t,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?dE(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cE(n,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&kc(n,c):typeof c=="number"&&kc(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fc.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Vt("scroll",n):c!=null&&zy(n,s,c,o))}switch(t){case"input":Dd(n),rw(n,i,!1);break;case"textarea":Dd(n),ow(n);break;case"option":i.value!=null&&n.setAttribute("value",""+yo(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Vl(n,!!i.multiple,s,!1):i.defaultValue!=null&&Vl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=fp)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vn(e),null;case 6:if(n&&e.stateNode!=null)bT(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ge(166));if(t=fa(Yc.current),fa(Vr.current),rc(e)){if(i=e.stateNode,t=e.memoizedProps,i[Or]=e,(s=i.nodeValue!==t)&&(n=Ii,n!==null))switch(o=(n.mode&1)!==0,n.tag){case 3:Ud(i.nodeValue,t,o);break;case 5:n.memoizedProps[void 0]!==!0&&Ud(i.nodeValue,t,o)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Or]=e,e.stateNode=i}return Vn(e),null;case 13:if(qt($t),i=e.memoizedState,Qt&&mi!==null&&(e.mode&1)!==0&&(e.flags&128)===0){for(i=mi;i;)i=ms(i.nextSibling);return $l(),e.flags|=98560,e}if(i!==null&&i.dehydrated!==null){if(i=rc(e),n===null){if(!i)throw Error(ge(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[Or]=e}else $l(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return Vn(e),null}return _r!==null&&(Uv(_r),_r=null),(e.flags&128)!==0?(e.lanes=t,e):(i=i!==null,t=!1,n===null?rc(e):t=n.memoizedState!==null,i&&!t&&(e.child.flags|=8192,(e.mode&1)!==0&&(n===null||($t.current&1)!==0?Sn===0&&(Sn=3):mx())),e.updateQueue!==null&&(e.flags|=4),Vn(e),null);case 4:return tu(),Rv(n,e),n===null&&Wc(e.stateNode.containerInfo),Vn(e),null;case 10:return Jy(e.type._context),Vn(e),null;case 17:return yi(e.type)&&dp(),Vn(e),null;case 19:if(qt($t),s=e.memoizedState,s===null)return Vn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)oc(s,!1);else{if(Sn!==0||n!==null&&(n.flags&128)!==0)for(n=e.child;n!==null;){if(o=xp(n),o!==null){for(e.flags|=128,oc(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Gt($t,$t.current&1|2),e.child}n=n.sibling}s.tail!==null&&un()>ru&&(e.flags|=128,i=!0,oc(s,!1),e.lanes=4194304)}else{if(!i)if(n=xp(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),oc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Qt)return Vn(e),null}else 2*un()-s.renderingStartTime>ru&&t!==1073741824&&(e.flags|=128,i=!0,oc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=un(),e.sibling=null,t=$t.current,Gt($t,i?t&1|2:t&1),e):(Vn(e),null);case 22:case 23:return px(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&(e.mode&1)!==0?(Pi&1073741824)!==0&&(Vn(e),e.subtreeFlags&6&&(e.flags|=8192)):Vn(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}var mR=Cs.ReactCurrentOwner,Li=!1;function Kn(n,e,t,i){e.child=n===null?nT(e,null,t,i):eu(e,n.child,t,i)}function Gw(n,e,t,i,r){t=t.render;var s=e.ref;return Xl(e,r),i=ox(n,e,t,i,s,r),t=ax(),n!==null&&!Li?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Es(n,e,r)):(Qt&&t&&$y(e),e.flags|=1,Kn(n,e,i,r),e.child)}function Vw(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!gx(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,AT(n,e,s,i,r)):(n=Qh(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,(n.lanes&r)===0){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Vc,t(o,i)&&n.ref===e.ref)return Es(n,e,r)}return e.flags|=1,n=_o(s,i),n.ref=e.ref,n.return=e,e.child=n}function AT(n,e,t,i,r){if(n!==null&&Vc(n.memoizedProps,i)&&n.ref===e.ref)if(Li=!1,(n.lanes&r)!==0)(n.flags&131072)!==0&&(Li=!0);else return e.lanes=n.lanes,Es(n,e,r);return Pv(n,e,t,i,r)}function CT(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null},Gt(Bl,Pi),Pi|=t;else if((t&1073741824)!==0)e.memoizedState={baseLanes:0,cachePool:null},i=s!==null?s.baseLanes:t,Gt(Bl,Pi),Pi|=i;else return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null},e.updateQueue=null,Gt(Bl,Pi),Pi|=n,null;else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Gt(Bl,Pi),Pi|=i;return Kn(n,e,r,t),e.child}function RT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Pv(n,e,t,i,r){var s=yi(t)?ba:qn.current;return s=Kl(e,s),Xl(e,r),t=ox(n,e,t,i,s,r),i=ax(),n!==null&&!Li?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Es(n,e,r)):(Qt&&i&&$y(e),e.flags|=1,Kn(n,e,t,r),e.child)}function Ww(n,e,t,i,r){if(yi(t)){var s=!0;hp(e)}else s=!1;if(Xl(e,r),e.stateNode===null)n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),KE(e,t,i),Tv(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,f=t.contextType;typeof f=="object"&&f!==null?f=or(f):(f=yi(t)?ba:qn.current,f=Kl(e,f));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==f)&&zw(e,o,i,f),$s=!1;var m=e.memoizedState;o.state=m,gp(e,i,o,r),c=e.memoizedState,l!==i||m!==c||vi.current||$s?(typeof d=="function"&&(Ev(e,t,d,i),c=e.memoizedState),(l=$s||Nw(e,t,l,i,m,c,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),o.props=i,o.state=c,o.context=f,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,QE(n,e),l=e.memoizedProps,f=e.type===e.elementType?l:xr(e.type,l),o.props=f,p=e.pendingProps,m=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=or(c):(c=yi(t)?ba:qn.current,c=Kl(e,c));var g=t.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&zw(e,o,i,c),$s=!1,m=e.memoizedState,o.state=m,gp(e,i,o,r);var x=e.memoizedState;l!==p||m!==x||vi.current||$s?(typeof g=="function"&&(Ev(e,t,g,i),x=e.memoizedState),(f=$s||Nw(e,t,f,i,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),o.props=i,o.state=x,o.context=c,i=f):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return Lv(n,e,t,i,s,r)}function Lv(n,e,t,i,r,s){RT(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Lw(e,t,!1),Es(n,e,s);i=e.stateNode,mR.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=eu(e,n.child,null,s),e.child=eu(e,null,l,s)):Kn(n,e,l,s),e.memoizedState=i.state,r&&Lw(e,t,!0),e.child}function PT(n){var e=n.stateNode;e.pendingContext?Pw(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Pw(n,e.context,!1),nx(n,e.containerInfo)}function jw(n,e,t,i,r){return $l(),tx(r),e.flags|=256,Kn(n,e,t,i),e.child}var Wd={dehydrated:null,treeContext:null,retryLane:0};function jd(n){return{baseLanes:n,cachePool:null}}function LT(n,e,t){var i=e.pendingProps,r=$t.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Gt($t,r&1),n===null)return Av(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((e.mode&1)===0?e.lanes=1:n.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(r=i.children,n=i.fallback,s?(i=e.mode,s=e.child,r={mode:"hidden",children:r},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=r):s=Ap(r,i,0,null),n=xa(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=jd(t),e.memoizedState=Wd,n):Dv(e,r));if(r=n.memoizedState,r!==null){if(l=r.dehydrated,l!==null){if(o)return e.flags&256?(e.flags&=-257,qd(n,e,t,Error(ge(422)))):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Ap({mode:"visible",children:i.children},r,0,null),s=xa(s,r,t,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,(e.mode&1)!==0&&eu(e,n.child,null,t),e.child.memoizedState=jd(t),e.memoizedState=Wd,s);if((e.mode&1)===0)e=qd(n,e,t,null);else if(l.data==="$!")e=qd(n,e,t,Error(ge(419)));else if(i=(t&n.childLanes)!==0,Li||i){if(i=xn,i!==null){switch(t&-t){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}i=(s&(i.suspendedLanes|t))!==0?0:s,i!==0&&i!==r.retryLane&&(r.retryLane=i,sr(n,i,-1))}mx(),e=qd(n,e,t,Error(ge(421)))}else l.data==="$?"?(e.flags|=128,e.child=n.child,e=CR.bind(null,n),l._reactRetry=e,e=null):(t=r.treeContext,mi=ms(l.nextSibling),Ii=e,Qt=!0,_r=null,t!==null&&(er[tr++]=gs,er[tr++]=vs,er[tr++]=Aa,gs=t.id,vs=t.overflow,Aa=e),e=Dv(e,e.pendingProps.children),e.flags|=4096);return e}return s?(i=Xw(n,e,i.children,i.fallback,t),s=e.child,r=n.child.memoizedState,s.memoizedState=r===null?jd(t):{baseLanes:r.baseLanes|t,cachePool:null},s.childLanes=n.childLanes&~t,e.memoizedState=Wd,i):(t=qw(n,e,i.children,t),e.memoizedState=null,t)}return s?(i=Xw(n,e,i.children,i.fallback,t),s=e.child,r=n.child.memoizedState,s.memoizedState=r===null?jd(t):{baseLanes:r.baseLanes|t,cachePool:null},s.childLanes=n.childLanes&~t,e.memoizedState=Wd,i):(t=qw(n,e,i.children,t),e.memoizedState=null,t)}function Dv(n,e){return e=Ap({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function qw(n,e,t,i){var r=n.child;return n=r.sibling,t=_o(r,{mode:"visible",children:t}),(e.mode&1)===0&&(t.lanes=i),t.return=e,t.sibling=null,n!==null&&(i=e.deletions,i===null?(e.deletions=[n],e.flags|=16):i.push(n)),e.child=t}function Xw(n,e,t,i,r){var s=e.mode;n=n.child;var o=n.sibling,l={mode:"hidden",children:t};return(s&1)===0&&e.child!==n?(t=e.child,t.childLanes=0,t.pendingProps=l,e.deletions=null):(t=_o(n,l),t.subtreeFlags=n.subtreeFlags&14680064),o!==null?i=_o(o,i):(i=xa(i,s,r,null),i.flags|=2),i.return=e,t.return=e,t.sibling=i,e.child=t,i}function qd(n,e,t,i){return i!==null&&tx(i),eu(e,n.child,null,t),n=Dv(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Yw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Mv(n.return,e,t)}function Kg(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function DT(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Kn(n,e,i.children,t),i=$t.current,(i&2)!==0)i=i&1|2,e.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Yw(n,t,e);else if(n.tag===19)Yw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Gt($t,i),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&xp(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Kg(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&xp(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Kg(e,!0,t,null,s);break;case"together":Kg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Es(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),iu|=e.lanes,(t&e.childLanes)===0)return null;if(n!==null&&e.child!==n.child)throw Error(ge(153));if(e.child!==null){for(n=e.child,t=_o(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=_o(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function gR(n,e,t){switch(e.tag){case 3:PT(e),$l();break;case 5:iT(e);break;case 1:yi(e.type)&&hp(e);break;case 4:nx(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Gt(pp,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Gt($t,$t.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?LT(n,e,t):(Gt($t,$t.current&1),n=Es(n,e,t),n!==null?n.sibling:null);Gt($t,$t.current&1);break;case 19:if(i=(t&e.childLanes)!==0,(n.flags&128)!==0){if(i)return DT(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Gt($t,$t.current),i)break;return null;case 22:case 23:return e.lanes=0,CT(n,e,t)}return Es(n,e,t)}function vR(n,e){switch(ex(e),e.tag){case 1:return yi(e.type)&&dp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return tu(),qt(vi),qt(qn),rx(),n=e.flags,(n&65536)!==0&&(n&128)===0?(e.flags=n&-65537|128,e):null;case 5:return ix(e),null;case 13:if(qt($t),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));$l()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return qt($t),null;case 4:return tu(),null;case 10:return Jy(e.type._context),null;case 22:case 23:return px(),null;case 24:return null;default:return null}}var Xd=!1,da=!1,yR=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Sp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){gi(n,e,i)}else t.current=null}function Iv(n,e,t){try{t()}catch(i){gi(n,e,i)}}var Zw=!1;function xR(n,e){if(n=OE(),Yy(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,f=0,d=0,p=n,m=null;t:for(;;){for(var g;p!==t||r!==0&&p.nodeType!==3||(l=o+r),p!==s||i!==0&&p.nodeType!==3||(c=o+i),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break t;if(m===t&&++f===r&&(l=o),m===s&&++d===i&&(c=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(yv={focusedElem:n,selectionRange:t},Ce=e;Ce!==null;)if(e=Ce,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ce=n;else for(;Ce!==null;){e=Ce;try{var x=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,w=x.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?y:xr(e.type,y),w);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;if(E.nodeType===1)E.textContent="";else if(E.nodeType===9){var b=E.body;b!=null&&(b.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(A){gi(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,Ce=n;break}Ce=e.return}return x=Zw,Zw=!1,x}function Kc(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Iv(e,t,s)}r=r.next}while(r!==i)}}function Wp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Nv(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Qw(n,e,t){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(Fp,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:if(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var i=n=n.next;do{var r=i,s=r.destroy;r=r.tag,s!==void 0&&((r&2)!==0||(r&4)!==0)&&Iv(e,t,s),i=i.next}while(i!==n)}break;case 1:if(Sp(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function")try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(o){gi(e,t,o)}break;case 5:Sp(e,t);break;case 4:zT(n,e,t)}}function IT(n){var e=n.alternate;e!==null&&(n.alternate=null,IT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Or],delete e[qc],delete e[wv],delete e[nR],delete e[iR])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function NT(n){return n.tag===5||n.tag===3||n.tag===4}function Jw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||NT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Kw(n){e:{for(var e=n.return;e!==null;){if(NT(e))break e;e=e.return}throw Error(ge(160))}var t=e;switch(t.tag){case 5:e=t.stateNode,t.flags&32&&(kc(e,""),t.flags&=-33),t=Jw(n),Fv(n,t,e);break;case 3:case 4:e=t.stateNode.containerInfo,t=Jw(n),zv(n,t,e);break;default:throw Error(ge(161))}}function zv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=fp));else if(i!==4&&(n=n.child,n!==null))for(zv(n,e,t),n=n.sibling;n!==null;)zv(n,e,t),n=n.sibling}function Fv(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Fv(n,e,t),n=n.sibling;n!==null;)Fv(n,e,t),n=n.sibling}function zT(n,e,t){for(var i=e,r=!1,s,o;;){if(!r){r=i.return;e:for(;;){if(r===null)throw Error(ge(160));switch(s=r.stateNode,r.tag){case 5:o=!1;break e;case 3:s=s.containerInfo,o=!0;break e;case 4:s=s.containerInfo,o=!0;break e}r=r.return}r=!0}if(i.tag===5||i.tag===6){e:for(var l=n,c=i,f=t,d=c;;)if(Qw(l,d,f),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}o?(l=s,c=i.stateNode,l.nodeType===8?l.parentNode.removeChild(c):l.removeChild(c)):s.removeChild(i.stateNode)}else if(i.tag===18)o?(l=s,c=i.stateNode,l.nodeType===8?Xg(l.parentNode,c):l.nodeType===1&&Xg(l,c),Hc(l)):Xg(s,i.stateNode);else if(i.tag===4){if(i.child!==null){s=i.stateNode.containerInfo,o=!0,i.child.return=i,i=i.child;continue}}else if(Qw(n,i,t),i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return,i.tag===4&&(r=!1)}i.sibling.return=i.return,i=i.sibling}}function $g(n,e){switch(e.tag){case 0:case 11:case 14:case 15:Kc(3,e,e.return),Wp(3,e),Kc(5,e,e.return);return;case 1:return;case 5:var t=e.stateNode;if(t!=null){var i=e.memoizedProps,r=n!==null?n.memoizedProps:i;n=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n==="input"&&i.type==="radio"&&i.name!=null&&aE(t,i),lv(n,r),e=lv(n,i),r=0;r<s.length;r+=2){var o=s[r],l=s[r+1];o==="style"?dE(t,l):o==="dangerouslySetInnerHTML"?cE(t,l):o==="children"?kc(t,l):zy(t,o,l,e)}switch(n){case"input":iv(t,i);break;case"textarea":lE(t,i);break;case"select":n=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,s=i.value,s!=null?Vl(t,!!i.multiple,s,!1):n!==!!i.multiple&&(i.defaultValue!=null?Vl(t,!!i.multiple,i.defaultValue,!0):Vl(t,!!i.multiple,i.multiple?[]:"",!1))}t[qc]=i}}return;case 6:if(e.stateNode===null)throw Error(ge(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n!==null&&n.memoizedState.isDehydrated&&Hc(e.stateNode.containerInfo);return;case 12:return;case 13:$w(e);return;case 19:$w(e);return;case 17:return}throw Error(ge(163))}function $w(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new yR),e.forEach(function(i){var r=RR.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function _R(n,e){for(Ce=e;Ce!==null;){e=Ce;var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{zT(n,r,e);var s=r.alternate;s!==null&&(s.return=null),r.return=null}catch(D){gi(r,e,D)}}if(t=e.child,(e.subtreeFlags&12854)!==0&&t!==null)t.return=e,Ce=t;else for(;Ce!==null;){e=Ce;try{var o=e.flags;if(o&32&&kc(e.stateNode,""),o&512){var l=e.alternate;if(l!==null){var c=l.ref;c!==null&&(typeof c=="function"?c(null):c.current=null)}}if(o&8192)switch(e.tag){case 13:if(e.memoizedState!==null){var f=e.alternate;(f===null||f.memoizedState===null)&&(dx=un())}break;case 22:var d=e.memoizedState!==null,p=e.alternate,m=p!==null&&p.memoizedState!==null;t=e;e:{i=t,r=d;for(var g=null,x=i;;){if(x.tag===5){if(g===null){g=x;var y=x.stateNode;if(r){var w=y.style;typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"}else{var S=x.stateNode,_=x.memoizedProps.style,E=_!=null&&_.hasOwnProperty("display")?_.display:null;S.style.display=fE("display",E)}}}else if(x.tag===6)g===null&&(x.stateNode.nodeValue=r?"":x.memoizedProps);else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===i)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===i)break;for(;x.sibling===null;){if(x.return===null||x.return===i)break e;g===x&&(g=null),x=x.return}g===x&&(g=null),x.sibling.return=x.return,x=x.sibling}}if(d&&!m&&(t.mode&1)!==0){Ce=t;for(var b=t.child;b!==null;){for(t=Ce=b;Ce!==null;){i=Ce;var A=i.child;switch(i.tag){case 0:case 11:case 14:case 15:Kc(4,i,i.return);break;case 1:Sp(i,i.return);var R=i.stateNode;if(typeof R.componentWillUnmount=="function"){var P=i.return;try{R.props=i.memoizedProps,R.state=i.memoizedState,R.componentWillUnmount()}catch(D){gi(i,P,D)}}break;case 5:Sp(i,i.return);break;case 22:if(i.memoizedState!==null){tS(t);continue}}A!==null?(A.return=i,Ce=A):tS(t)}b=b.sibling}}}switch(o&4102){case 2:Kw(e),e.flags&=-3;break;case 6:Kw(e),e.flags&=-3,$g(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,$g(e.alternate,e);break;case 4:$g(e.alternate,e)}}catch(D){gi(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}}}function wR(n,e,t){Ce=n,FT(n)}function FT(n,e,t){for(var i=(n.mode&1)!==0;Ce!==null;){var r=Ce,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Xd;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||da;l=Xd;var f=da;if(Xd=o,(da=c)&&!f)for(Ce=r;Ce!==null;)o=Ce,c=o.child,o.tag===22&&o.memoizedState!==null?nS(r):c!==null?(c.return=o,Ce=c):nS(r);for(;s!==null;)Ce=s,FT(s),s=s.sibling;Ce=r,Xd=l,da=f}eS(n)}else(r.subtreeFlags&8772)!==0&&s!==null?(s.return=r,Ce=s):eS(n)}}function eS(n){for(;Ce!==null;){var e=Ce;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:da||Wp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!da)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:xr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Iw(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Iw(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var d=f.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Hc(p)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(ge(163))}da||e.flags&512&&Nv(e)}catch(m){gi(e,e.return,m)}}if(e===n){Ce=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}}function tS(n){for(;Ce!==null;){var e=Ce;if(e===n){Ce=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ce=t;break}Ce=e.return}}function nS(n){for(;Ce!==null;){var e=Ce;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Wp(4,e)}catch(c){gi(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){gi(e,r,c)}}var s=e.return;try{Nv(e)}catch(c){gi(e,s,c)}break;case 5:var o=e.return;try{Nv(e)}catch(c){gi(e,o,c)}}}catch(c){gi(e,e.return,c)}if(e===n){Ce=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ce=l;break}Ce=e.return}}var SR=Math.ceil,Mp=Cs.ReactCurrentDispatcher,cx=Cs.ReactCurrentOwner,rr=Cs.ReactCurrentBatchConfig,Mt=0,xn=null,yn=null,zn=0,Pi=0,Bl=Ro(0),Sn=0,$c=null,iu=0,jp=0,fx=0,Pc=null,pi=null,dx=0,ru=1/0,Ep=!1,kv=null,co=null,Yd=!1,io=null,Tp=0,Lc=0,Bv=null,Yh=-1,Zh=0;function ti(){return(Mt&6)!==0?un():Yh!==-1?Yh:Yh=un()}function fo(n){return(n.mode&1)===0?1:(Mt&2)!==0&&zn!==0?zn&-zn:sR.transition!==null?(Zh===0&&(n=Nd,Nd<<=1,(Nd&4194240)===0&&(Nd=64),Zh=n),Zh):(n=kt,n!==0||(n=window.event,n=n===void 0?16:PE(n.type)),n)}function sr(n,e,t){if(50<Lc)throw Lc=0,Bv=null,Error(ge(185));var i=qp(n,e);return i===null?null:(xf(i,e,t),((Mt&2)===0||i!==xn)&&(i===xn&&((Mt&2)===0&&(jp|=e),Sn===4&&to(i,zn)),xi(i,t),e===1&&Mt===0&&(n.mode&1)===0&&(ru=un()+500,Hp&&Po())),i)}function qp(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}function xi(n,e){var t=n.callbackNode;sC(n,e);var i=lp(n,n===xn?zn:0);if(i===0)t!==null&&uw(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&uw(t),e===1)n.tag===0?rR(iS.bind(null,n)):ZE(iS.bind(null,n)),eR(function(){Mt===0&&Po()}),t=null;else{switch(EE(i)){case 1:t=Uy;break;case 4:t=SE;break;case 16:t=ap;break;case 536870912:t=ME;break;default:t=ap}t=WT(t,kT.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function kT(n,e){if(Yh=-1,Zh=0,(Mt&6)!==0)throw Error(ge(327));var t=n.callbackNode;if(Yl()&&n.callbackNode!==t)return null;var i=lp(n,n===xn?zn:0);if(i===0)return null;if((i&30)!==0||(i&n.expiredLanes)!==0||e)e=bp(n,i);else{e=i;var r=Mt;Mt|=2;var s=OT();(xn!==n||zn!==e)&&(ru=un()+500,ya(n,e));do try{TR();break}catch(l){BT(n,l)}while(1);Qy(),Mp.current=s,Mt=r,yn!==null?e=0:(xn=null,zn=0,e=Sn)}if(e!==0){if(e===2&&(r=hv(n),r!==0&&(i=r,e=Ov(n,r))),e===1)throw t=$c,ya(n,0),to(n,i),xi(n,un()),t;if(e===6)to(n,i);else{if(r=n.current.alternate,(i&30)===0&&!MR(r)&&(e=bp(n,i),e===2&&(s=hv(n),s!==0&&(i=s,e=Ov(n,s))),e===1))throw t=$c,ya(n,0),to(n,i),xi(n,un()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ge(345));case 2:ra(n,pi);break;case 3:if(to(n,i),(i&130023424)===i&&(e=dx+500-un(),10<e)){if(lp(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){ti(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=_v(ra.bind(null,n,pi),e);break}ra(n,pi);break;case 4:if(to(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Mr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=un()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*SR(i/1960))-i,10<i){n.timeoutHandle=_v(ra.bind(null,n,pi),i);break}ra(n,pi);break;case 5:ra(n,pi);break;default:throw Error(ge(329))}}}return xi(n,un()),n.callbackNode===t?kT.bind(null,n):null}function Ov(n,e){var t=Pc;return n.current.memoizedState.isDehydrated&&(ya(n,e).flags|=256),n=bp(n,e),n!==2&&(e=pi,pi=t,e!==null&&Uv(e)),n}function Uv(n){pi===null?pi=n:pi.push.apply(pi,n)}function MR(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!qr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function to(n,e){for(e&=~fx,e&=~jp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Mr(e),i=1<<t;n[t]=-1,e&=~i}}function iS(n){if((Mt&6)!==0)throw Error(ge(327));Yl();var e=lp(n,0);if((e&1)===0)return xi(n,un()),null;var t=bp(n,e);if(n.tag!==0&&t===2){var i=hv(n);i!==0&&(e=i,t=Ov(n,i))}if(t===1)throw t=$c,ya(n,0),to(n,e),xi(n,un()),t;if(t===6)throw Error(ge(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ra(n,pi),xi(n,un()),null}function hx(n,e){var t=Mt;Mt|=1;try{return n(e)}finally{Mt=t,Mt===0&&(ru=un()+500,Hp&&Po())}}function Ca(n){io!==null&&io.tag===0&&(Mt&6)===0&&Yl();var e=Mt;Mt|=1;var t=rr.transition,i=kt;try{if(rr.transition=null,kt=1,n)return n()}finally{kt=i,rr.transition=t,Mt=e,(Mt&6)===0&&Po()}}function px(){Pi=Bl.current,qt(Bl)}function ya(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,$C(t)),yn!==null)for(t=yn.return;t!==null;){var i=t;switch(ex(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&dp();break;case 3:tu(),qt(vi),qt(qn),rx();break;case 5:ix(i);break;case 4:tu();break;case 13:qt($t);break;case 19:qt($t);break;case 10:Jy(i.type._context);break;case 22:case 23:px()}t=t.return}if(xn=n,yn=n=_o(n.current,null),zn=Pi=e,Sn=0,$c=null,fx=jp=iu=0,pi=Pc=null,Ur!==null){for(e=0;e<Ur.length;e++)if(t=Ur[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Ur=null}return n}function BT(n,e){do{var t=yn;try{if(Qy(),qh.current=wp,_p){for(var i=on.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_p=!1}if(nu=0,Rn=jn=on=null,Rc=!1,Zc=0,cx.current=null,t===null||t.return===null){Sn=1,$c=e,yn=null;break}e:{var s=n,o=t.return,l=t,c=e;if(e=zn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,d=l,p=d.tag;if((d.mode&1)===0&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Uw(o);if(g!==null){g.flags&=-257,Hw(g,o,l,s,e),g.mode&1&&Ow(s,f,e),e=g,c=f;var x=e.updateQueue;if(x===null){var y=new Set;y.add(c),e.updateQueue=y}else x.add(c);break e}else{if((e&1)===0){Ow(s,f,e),mx();break e}c=Error(ge(426))}}else if(Qt&&l.mode&1){var w=Uw(o);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),Hw(w,o,l,s,e),tx(c);break e}}s=c,Sn!==4&&(Sn=2),Pc===null?Pc=[s]:Pc.push(s),c=ux(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var S=ST(l,c,e);Dw(l,S);break e;case 1:s=c;var _=l.type,E=l.stateNode;if((l.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(co===null||!co.has(E)))){l.flags|=65536,e&=-e,l.lanes|=e;var b=MT(l,s,e);Dw(l,b);break e}}l=l.return}while(l!==null)}HT(t)}catch(A){e=A,yn===t&&t!==null&&(yn=t=t.return);continue}break}while(1)}function OT(){var n=Mp.current;return Mp.current=wp,n===null?wp:n}function mx(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),xn===null||(iu&268435455)===0&&(jp&268435455)===0||to(xn,zn)}function bp(n,e){var t=Mt;Mt|=2;var i=OT();xn===n&&zn===e||ya(n,e);do try{ER();break}catch(r){BT(n,r)}while(1);if(Qy(),Mt=t,Mp.current=i,yn!==null)throw Error(ge(261));return xn=null,zn=0,Sn}function ER(){for(;yn!==null;)UT(yn)}function TR(){for(;yn!==null&&!QA();)UT(yn)}function UT(n){var e=VT(n.alternate,n,Pi);n.memoizedProps=n.pendingProps,e===null?HT(n):yn=e,cx.current=null}function HT(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&32768)===0){if(t=pR(t,e,Pi),t!==null){yn=t;return}}else{if(t=vR(t,e),t!==null){t.flags&=32767,yn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Sn=6,yn=null;return}}if(e=e.sibling,e!==null){yn=e;return}yn=e=n}while(e!==null);Sn===0&&(Sn=5)}function ra(n,e){var t=kt,i=rr.transition;try{rr.transition=null,kt=1,bR(n,e,t)}finally{rr.transition=i,kt=t}return null}function bR(n,e,t){do Yl();while(io!==null);if((Mt&6)!==0)throw Error(ge(327));var i=n.finishedWork,r=n.finishedLanes;if(i===null)return null;if(n.finishedWork=null,n.finishedLanes=0,i===n.current)throw Error(ge(177));n.callbackNode=null,n.callbackPriority=0;var s=i.lanes|i.childLanes;if(oC(n,s),n===xn&&(yn=xn=null,zn=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Yd||(Yd=!0,WT(ap,function(){return Yl(),null})),s=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||s){s=rr.transition,rr.transition=null;var o=kt;kt=1;var l=Mt;Mt|=4,cx.current=null,xR(n,i),_R(n,i),qC(yv),yv=null,n.current=i,wR(i),JA(),Mt=l,kt=o,rr.transition=s}else n.current=i;if(Yd&&(Yd=!1,io=n,Tp=r),s=n.pendingLanes,s===0&&(co=null),eC(i.stateNode),xi(n,un()),e!==null)for(t=n.onRecoverableError,i=0;i<e.length;i++)t(e[i]);if(Ep)throw Ep=!1,n=kv,kv=null,n;return(Tp&1)!==0&&n.tag!==0&&Yl(),s=n.pendingLanes,(s&1)!==0?n===Bv?Lc++:(Lc=0,Bv=n):Lc=0,Po(),null}function Yl(){if(io!==null){var n=EE(Tp),e=rr.transition,t=kt;try{if(rr.transition=null,kt=16>n?16:n,io===null)var i=!1;else{if(n=io,io=null,Tp=0,(Mt&6)!==0)throw Error(ge(331));var r=Mt;for(Mt|=4,Ce=n.current;Ce!==null;){var s=Ce,o=s.child;if((Ce.flags&16)!==0){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(Ce=f;Ce!==null;){var d=Ce;switch(d.tag){case 0:case 11:case 15:Kc(8,d,s)}var p=d.child;if(p!==null)p.return=d,Ce=p;else for(;Ce!==null;){d=Ce;var m=d.sibling,g=d.return;if(IT(d),d===f){Ce=null;break}if(m!==null){m.return=g,Ce=m;break}Ce=g}}}var x=s.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Ce=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,Ce=o;else e:for(;Ce!==null;){if(s=Ce,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Kc(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,Ce=S;break e}Ce=s.return}}var _=n.current;for(Ce=_;Ce!==null;){o=Ce;var E=o.child;if((o.subtreeFlags&2064)!==0&&E!==null)E.return=o,Ce=E;else e:for(o=_;Ce!==null;){if(l=Ce,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:Wp(9,l)}}catch(A){gi(l,l.return,A)}if(l===o){Ce=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Ce=b;break e}Ce=l.return}}if(Mt=r,Po(),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(Fp,n)}catch{}i=!0}return i}finally{kt=t,rr.transition=e}}return!1}function rS(n,e,t){e=ux(t,e),e=ST(n,e,1),uo(n,e),e=ti(),n=qp(n,1),n!==null&&(xf(n,1,e),xi(n,e))}function gi(n,e,t){if(n.tag===3)rS(n,n,t);else for(;e!==null;){if(e.tag===3){rS(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(co===null||!co.has(i))){n=ux(t,n),n=MT(e,n,1),uo(e,n),n=ti(),e=qp(e,1),e!==null&&(xf(e,1,n),xi(e,n));break}}e=e.return}}function AR(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=ti(),n.pingedLanes|=n.suspendedLanes&t,xn===n&&(zn&t)===t&&(Sn===4||Sn===3&&(zn&130023424)===zn&&500>un()-dx?ya(n,0):fx|=t),xi(n,e)}function GT(n,e){e===0&&((n.mode&1)===0?e=1:(e=zd,zd<<=1,(zd&130023424)===0&&(zd=4194304)));var t=ti();n=qp(n,e),n!==null&&(xf(n,e,t),xi(n,t))}function CR(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),GT(n,t)}function RR(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ge(314))}i!==null&&i.delete(e),GT(n,t)}var VT;VT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||vi.current)Li=!0;else{if((n.lanes&t)===0&&(e.flags&128)===0)return Li=!1,gR(n,e,t);Li=(n.flags&131072)!==0}else Li=!1,Qt&&(e.flags&1048576)!==0&&$E(e,yp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps;var r=Kl(e,qn.current);Xl(e,t),r=ox(null,e,i,n,r,t);var s=ax();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yi(i)?(s=!0,hp(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ky(e),r.updater=Gp,e.stateNode=r,r._reactInternals=e,Tv(e,i,n,t),e=Lv(null,e,i,!0,s,t)):(e.tag=0,Qt&&s&&$y(e),Kn(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=LR(i),n=xr(i,n),r){case 0:e=Pv(null,e,i,n,t);break e;case 1:e=Ww(null,e,i,n,t);break e;case 11:e=Gw(null,e,i,n,t);break e;case 14:e=Vw(null,e,i,xr(i.type,n),t);break e}throw Error(ge(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xr(i,r),Pv(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xr(i,r),Ww(n,e,i,r,t);case 3:e:{if(PT(e),n===null)throw Error(ge(387));i=e.pendingProps,s=e.memoizedState,r=s.element,QE(n,e),gp(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Error(ge(423)),e=jw(n,e,i,t,r);break e}else if(i!==r){r=Error(ge(424)),e=jw(n,e,i,t,r);break e}else for(mi=ms(e.stateNode.containerInfo.firstChild),Ii=e,Qt=!0,_r=null,t=nT(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if($l(),i===r){e=Es(n,e,t);break e}Kn(n,e,i,t)}e=e.child}return e;case 5:return iT(e),n===null&&Av(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,xv(i,r)?o=null:s!==null&&xv(i,s)&&(e.flags|=32),RT(n,e),Kn(n,e,o,t),e.child;case 6:return n===null&&Av(e),null;case 13:return LT(n,e,t);case 4:return nx(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=eu(e,null,i,t):Kn(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xr(i,r),Gw(n,e,i,r,t);case 7:return Kn(n,e,e.pendingProps,t),e.child;case 8:return Kn(n,e,e.pendingProps.children,t),e.child;case 12:return Kn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Gt(pp,i._currentValue),i._currentValue=o,s!==null)if(qr(s.value,o)){if(s.children===r.children&&!vi.current){e=Es(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=xs(-1,t&-t),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var d=f.pending;d===null?c.next=c:(c.next=d.next,d.next=c),f.pending=c}}s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),Mv(s.return,t,e),l.lanes|=t;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ge(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),Mv(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Xl(e,t),r=or(r),i=i(r),e.flags|=1,Kn(n,e,i,t),e.child;case 14:return i=e.type,r=xr(i,e.pendingProps),r=xr(i.type,r),Vw(n,e,i,r,t);case 15:return AT(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:xr(i,r),n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,yi(i)?(n=!0,hp(e)):n=!1,Xl(e,t),KE(e,i,r),Tv(e,i,r,t),Lv(null,e,i,!0,n,t);case 19:return DT(n,e,t);case 22:return CT(n,e,t)}throw Error(ge(156,e.tag))};function WT(n,e){return wE(n,e)}function PR(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(n,e,t,i){return new PR(n,e,t,i)}function gx(n){return n=n.prototype,!(!n||!n.isReactComponent)}function LR(n){if(typeof n=="function")return gx(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ky)return 11;if(n===By)return 14}return 2}function _o(n,e){var t=n.alternate;return t===null?(t=nr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Qh(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")gx(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Rl:return xa(t.children,r,s,e);case Fy:o=8,r|=8;break;case K0:return n=nr(12,t,e,r|2),n.elementType=K0,n.lanes=s,n;case $0:return n=nr(13,t,e,r),n.elementType=$0,n.lanes=s,n;case ev:return n=nr(19,t,e,r),n.elementType=ev,n.lanes=s,n;case rE:return Ap(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nE:o=10;break e;case iE:o=9;break e;case ky:o=11;break e;case By:o=14;break e;case Ks:o=16,i=null;break e}throw Error(ge(130,n==null?n:typeof n,""))}return e=nr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function xa(n,e,t,i){return n=nr(7,n,i,e),n.lanes=t,n}function Ap(n,e,t,i){return n=nr(22,n,i,e),n.elementType=rE,n.lanes=t,n.stateNode={},n}function e0(n,e,t){return n=nr(6,n,null,e),n.lanes=t,n}function t0(n,e,t){return e=nr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function DR(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fg(0),this.expirationTimes=Fg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function vx(n,e,t,i,r,s,o,l,c){return n=new DR(n,e,t,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=nr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null},Ky(s),n}function IR(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function jT(n){if(!n)return xo;n=n._reactInternals;e:{if(ka(n)!==n||n.tag!==1)throw Error(ge(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(n.tag===1){var t=n.type;if(yi(t))return YE(n,t,e)}return e}function qT(n,e,t,i,r,s,o,l,c){return n=vx(t,i,!0,n,r,s,o,l,c),n.context=jT(null),t=n.current,i=ti(),r=fo(t),s=xs(i,r),s.callback=e!=null?e:null,uo(t,s),n.current.lanes=r,xf(n,r,i),xi(n,i),n}function Xp(n,e,t,i){var r=e.current,s=ti(),o=fo(r);return t=jT(t),e.context===null?e.context=t:e.pendingContext=t,e=xs(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),uo(r,e),n=sr(r,o,s),n!==null&&jh(n,r,o),o}function Cp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function sS(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function yx(n,e){sS(n,e),(n=n.alternate)&&sS(n,e)}function NR(){return null}var XT=typeof reportError=="function"?reportError:function(n){console.error(n)};function xx(n){this._internalRoot=n}Yp.prototype.render=xx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ge(409));Xp(n,e,null,null)};Yp.prototype.unmount=xx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ca(function(){Xp(null,n,null,null)}),e[Ms]=null}};function Yp(n){this._internalRoot=n}Yp.prototype.unstable_scheduleHydration=function(n){if(n){var e=AE();n={blockedOn:null,target:n,priority:e};for(var t=0;t<eo.length&&e!==0&&e<eo[t].priority;t++);eo.splice(t,0,n),t===0&&RE(n)}};function _x(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Zp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function oS(){}function zR(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var f=Cp(o);s.call(f)}}var o=qT(e,i,n,0,null,!1,!1,"",oS);return n._reactRootContainer=o,n[Ms]=o.current,Wc(n.nodeType===8?n.parentNode:n),Ca(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var f=Cp(c);l.call(f)}}var c=vx(n,0,!1,null,null,!1,!1,"",oS);return n._reactRootContainer=c,n[Ms]=c.current,Wc(n.nodeType===8?n.parentNode:n),Ca(function(){Xp(e,c,t,i)}),c}function Qp(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var c=Cp(o);l.call(c)}}Xp(e,o,n,r)}else o=zR(t,e,n,r,i);return Cp(o)}TE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=wc(e.pendingLanes);t!==0&&(Hy(e,t|1),xi(e,un()),(Mt&6)===0&&(ru=un()+500,Po()))}break;case 13:var i=ti();Ca(function(){return sr(n,1,i)}),yx(n,1)}};Gy=function(n){if(n.tag===13){var e=ti();sr(n,134217728,e),yx(n,134217728)}};bE=function(n){if(n.tag===13){var e=ti(),t=fo(n);sr(n,t,e),yx(n,t)}};AE=function(){return kt};CE=function(n,e){var t=kt;try{return kt=n,e()}finally{kt=t}};cv=function(n,e,t){switch(e){case"input":if(iv(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Up(i);if(!r)throw Error(ge(90));oE(i),iv(i,r)}}}break;case"textarea":lE(n,t);break;case"select":e=t.value,e!=null&&Vl(n,!!t.multiple,e,!1)}};mE=hx;gE=Ca;var FR={usingClientEntryPoint:!1,Events:[wf,Il,Up,hE,pE,hx]},ac={findFiberByHostInstance:ca,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},kR={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=xE(n),n===null?null:n.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||NR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{Fp=Zd.inject(kR),Gr=Zd}catch{}}ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FR;ki.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_x(e))throw Error(ge(200));return IR(n,e,null,t)};ki.createRoot=function(n,e){if(!_x(n))throw Error(ge(299));var t=!1,i="",r=XT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=vx(n,1,!1,null,null,t,!1,i,r),n[Ms]=e.current,Wc(n.nodeType===8?n.parentNode:n),new xx(e)};ki.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ge(188)):(n=Object.keys(n).join(","),Error(ge(268,n)));return n=xE(e),n=n===null?null:n.stateNode,n};ki.flushSync=function(n){return Ca(n)};ki.hydrate=function(n,e,t){if(!Zp(e))throw Error(ge(200));return Qp(null,n,e,!0,t)};ki.hydrateRoot=function(n,e,t){if(!_x(n))throw Error(ge(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=XT;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=qT(e,null,n,1,t!=null?t:null,r,!1,s,o),n[Ms]=e.current,Wc(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Yp(e)};ki.render=function(n,e,t){if(!Zp(e))throw Error(ge(200));return Qp(null,n,e,!1,t)};ki.unmountComponentAtNode=function(n){if(!Zp(n))throw Error(ge(40));return n._reactRootContainer?(Ca(function(){Qp(null,null,n,!1,function(){n._reactRootContainer=null,n[Ms]=null})}),!0):!1};ki.unstable_batchedUpdates=hx;ki.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Zp(t))throw Error(ge(200));if(n==null||n._reactInternals===void 0)throw Error(ge(38));return Qp(n,e,t,!1,i)};ki.version="18.0.0-fc46dba67-20220329";function YT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YT)}catch(n){console.error(n)}}YT(),KM.exports=ki;var aS=KM.exports;Q0.createRoot=aS.createRoot,Q0.hydrateRoot=aS.hydrateRoot;const Js={dark:{primary:"#080818",cta:"#5479ff",hvr:"#ff818b",secondary:"#5479ff",text:"#e9f0fa"},light:{primary:"#FFFBFF",cta:"#002BFF",hvr:"#ff818b",secondary:"#272932",text:"#1C0221"},fire:{primary:"#131327",cta:"#F7E733",hvr:"#ff818b",secondary:"#C9B408",text:"#D6EEFF",progressbar:"#83838346"}},Xr=_e.exports.createContext(Js.dark);var Jp={exports:{}},Kp={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BR=_e.exports,OR=Symbol.for("react.element"),UR=Symbol.for("react.fragment"),HR=Object.prototype.hasOwnProperty,GR=BR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VR={key:!0,ref:!0,__self:!0,__source:!0};function ZT(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)HR.call(e,i)&&!VR.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:OR,type:n,key:s,ref:o,props:r,_owner:GR.current}}Kp.Fragment=UR;Kp.jsx=ZT;Kp.jsxs=ZT;Jp.exports=Kp;const Pe=Jp.exports.jsx,jt=Jp.exports.jsxs,$p=Jp.exports.Fragment;function WR(n){return _e.exports.useContext(Xr),jt("div",{className:"nav",children:[Pe("div",{id:"nav-logo",children:"STCKD WEBSITE"}),Pe("div",{className:"nav-actions",children:n.children})]})}function QT(n){var e={};const t=_e.exports.useContext(Xr),i={color:t.primary,background:t.cta,border:"solid 2px "+t.cta},r={color:t.cta,background:t.primary,border:"solid 2px "+t.cta};n.invert?e=r:e=i;const[s,o]=_e.exports.useState(!1);return s?n.invert?e=i:e=r:n.invert?e=r:e=i,Pe("button",{onClick:()=>{navigator.vibrate(20),window.location.assign(n.link)},onMouseEnter:()=>{o(!s)},onMouseLeave:()=>{o(!s)},className:"ux-btn",style:e,children:n.content})}function JT(n){return Pe("div",{className:"paragraph",id:n.id,children:n.children})}function ef(n){return Pe("div",{className:"title-h1",style:{fontSize:n.size+"rem"},children:n.content})}function jR(){return _e.exports.useContext(Xr),Pe("div",{className:"welcome",children:jt("div",{className:"welcome-msg",children:[Pe(ef,{content:"Nieuwe spin op het web?",size:3}),Pe(JT,{id:"welcome-text",children:"STCKD ontwerpt en ontwikkelt samen met jou gebruiksvriendelijke en inspirerende websites met nadruk op een clean en modern uiterlijk, maar ook achter de schermen wordt alles ingericht op maximale vindbaarheid en performance!"}),Pe(QT,{content:"Dat wil ik ook!",invert:!1,link:"#process"})]})})}function n0(n){return Pe("div",{className:"section",children:n.content})}var KT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lS=ys.createContext&&ys.createContext(KT),ho=globalThis&&globalThis.__assign||function(){return ho=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},ho.apply(this,arguments)},qR=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function $T(n){return n&&n.map(function(e,t){return ys.createElement(e.tag,ho({key:t},e.attr),$T(e.child))})}function Kr(n){return function(e){return ys.createElement(XR,ho({attr:ho({},n.attr)},e),$T(n.child))}}function XR(n){var e=function(t){var i=n.attr,r=n.size,s=n.title,o=qR(n,["attr","size","title"]),l=r||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),ys.createElement("svg",ho({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:c,style:ho(ho({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ys.createElement("title",null,s),n.children)};return lS!==void 0?ys.createElement(lS.Consumer,null,function(t){return e(t)}):e(KT)}function YR(n){return Kr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M11.746.254C5.265.254 0 5.519 0 12c0 6.481 5.265 11.746 11.746 11.746 6.482 0 11.746-5.265 11.746-11.746 0-1.44-.26-2.82-.734-4.097l-.264-.709-1.118 1.118.1.288c.373 1.064.575 2.207.575 3.4a10.297 10.297 0 01-10.305 10.305A10.297 10.297 0 011.441 12 10.297 10.297 0 0111.746 1.695c1.817 0 3.52.47 5.002 1.293l.32.178 1.054-1.053-.553-.316A11.699 11.699 0 0011.746.254zM22.97.841l-13.92 13.92-3.722-3.721-1.031 1.03 4.752 4.753L24 1.872z"}}]})(n)}function ZR(n){return Kr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M12.0005 0C18.627 0 24 5.373 24 12.0005 24 18.627 18.627 24 11.9995 24 5.373 24 0 18.627 0 11.9995 0 5.373 5.373 0 12.0005 0zm0 19.826a7.8265 7.8265 0 10-.001-15.652C7.7133 4.2246 4.2653 7.7136 4.2653 12c0 4.2864 3.448 7.7754 7.7342 7.826h.001zm0-3.9853a3.8402 3.8402 0 110-7.6803c2.1204.0006 3.839 1.7197 3.839 3.8401s-1.7186 3.8396-3.839 3.8402z"}}]})(n)}function QR(n){return Kr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M23.996 10.543c-.131-4.91-4.289-8.773-9.2-8.773H9.005a8.997 8.997 0 0 0-5.957 15.746L1.05 22.23l4.942-2.98c.95.36 1.964.524 3.012.524h6.024c5.04 0 9.099-4.156 8.969-9.23zm-8.937 5.958H9.07c-2.587 0-5.205-2.03-5.696-4.583a5.724 5.724 0 0 1 5.63-6.874h5.99c2.586 0 5.205 2.03 5.696 4.582.688 3.667-2.095 6.875-5.63 6.875z"}}]})(n)}function JR(n){return Kr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"}}]})(n)}function KR(n){return Kr({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M12 24C5.342 24 0 18.582 0 12 0 5.342 5.342 0 12 0s12 5.342 12 12c0 6.582-5.342 12-12 12zm0-21.986c-5.497 0-9.987 4.489-9.987 9.986 0 5.498 4.49 9.988 9.987 9.988 5.498 0 9.987-4.49 9.987-9.988 0-5.497-4.489-9.986-9.987-9.986zm5.885 11.148H9.213c-.384 0-.695-.309-.698-.691v-1.012c0-.387.311-.697.698-.697h8.748c.387 0 .697.311.697.697v1.006c-.077.387-.387.697-.773.697zm-2.246-3.871H6.891c-.383.002-.697-.307-.698-.691V7.59c0-.311.31-.621.697-.621h8.748c.31 0 .62.311.62.619v1.006c.001.386-.31.697-.619.697zm-8.748 5.418h8.748c.388 0 .696.311.696.697v1.006c.002.383-.309.695-.691.697H6.891c-.388-.076-.697-.387-.697-.773V15.33c-.001-.31.309-.621.697-.621z"}}]})(n)}function $R(n){const e=_e.exports.useContext(Xr);return jt("div",{className:"pricetable",style:{background:e.primary},children:[Pe("div",{className:"plan-title",style:{background:e.secondary,color:e.primary},children:n.title}),jt("div",{className:"plan-price",children:["\u20AC",n.price]}),jt("div",{className:"plan-info",children:[jt("div",{children:["pagina's ",Pe("b",{children:n.pages})]}),jt("div",{children:["revisies: ",Pe("b",{children:n.revisions})]}),jt("div",{children:["dagen levertijd:",jt("b",{children:[" ",n.delivery]})]}),jt("div",{children:[Pe(JR,{style:{color:e.cta}})," ",Pe("b",{children:"WhatsApp communicatie"})]}),Pe(QT,{invert:!1,link:n.link,content:"verder"})]})]})}function eP(){return Pe($p,{children:jt("div",{className:"prices",children:[Pe(ef,{content:"Website pakketten",size:4}),Pe("div",{className:"pricetables",children:[{id:0,name:"newbie pakket",price:239,pages:5,revisions:2,delivery:3},{id:1,name:"compleet pakket",price:469,pages:7,revisions:4,delivery:3},{id:2,name:"ultra pakket",price:849,pages:15,revisions:"unlimited",delivery:"variabel"}].map(({id:e,name:t,price:i,pages:r,revisions:s,delivery:o})=>Pe($R,{title:t,price:i,pages:r,revisions:s,delivery:o,ncnp:"",link:"#"},e))})]})})}function tP(n){return Kr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"}}]})(n)}function nP(n){return Kr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"}}]})(n)}function iP(n){return Kr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"}}]})(n)}function rP(n){return Kr({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"}}]})(n)}function sP(n){return Kr({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(n)}function oP(){const n=_e.exports.useContext(Xr);return Pe($p,{children:jt("div",{className:"socials",style:{color:n.primary},children:[Pe("span",{className:"socials-stripe",style:{background:n.secondary}}),Pe("a",{"aria-label":"Github link",href:"https://github.com/PluginDev-A",children:Pe(sP,{})}),Pe("a",{"aria-label":"About link",href:"#about",children:Pe(rP,{})}),Pe("a",{"aria-label":"LinkedIn link",href:"https://www.linkedin.com/in/jan-arend-4201a1157/",children:Pe(iP,{})}),Pe("span",{className:"socials-stripe",style:{background:n.secondary}})]})})}function aP(){const n=_e.exports.useContext(Xr);return jt("div",{className:"footer",style:{background:n.secondary,color:n.primary},children:[jt("div",{className:"footer-container",children:[jt("div",{className:"footer-content",children:[Pe(ef,{content:"socials",size:3}),Pe(oP,{})]}),Pe("div",{className:"footer-content"}),Pe("div",{className:"footer-content"})]}),jt("div",{className:"footer-credits",style:{background:n.primary+"20",color:n.primary},children:["\xA9COPYRIGHT OF JAN AREND VAN WINSEN | Property of ",Pe("a",{href:"https://stckd.space",children:"stckd.space"})]})]})}function lP(){const n=_e.exports.useContext(Xr);return jt("div",{className:"process",id:"process",children:[Pe(ef,{content:"proces",size:4}),Pe(JT,{id:"process-text",children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quidem nam explicabo nostrum repellat facilis laboriosam eaque pariatur cumque assumenda. Impedit obcaecati asperiores, culpa non maxime error soluta nisi voluptas sit autem, nostrum quaerat sapiente, harum dicta. Eius necessitatibus dolorum sunt et cupiditate beatae sequi consectetur dolor nemo, eaque quisquam velit."}),Pe("div",{className:"process-chart",children:[{id:0,title:"Consultatie",icon:Pe(QR,{}),text:" Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptates harum autem quos magni. A, fugiat voluptatibus. Culpa perferendis ullam mollitia!"},{id:1,title:"Doel stellen",icon:Pe(ZR,{}),text:" Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptates harum autem quos magni. A, fugiat voluptatibus. Culpa perferendis ullam mollitia!"},{id:2,title:"Designen",icon:Pe(KR,{}),text:" Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptates harum autem quos magni. A, fugiat voluptatibus. Culpa perferendis ullam mollitia!"},{id:3,title:"Evalueren",icon:Pe(YR,{}),text:" Lorem ipsum dolor sit, amet consectetur adipisicing elit. Voluptates harum autem quos magni. A, fugiat voluptatibus. Culpa perferendis ullam mollitia!"}].map(({id:t,icon:i,title:r,text:s})=>jt($p,{children:[jt("div",{className:"process-chart-box",style:{background:n.primary},children:[jt("div",{className:"pcb-title",style:{color:n.text},children:[Pe("div",{className:"pcb-icon",style:{color:n.cta},children:i}),Pe(ef,{content:r,size:2})]}),Pe("div",{className:"pcb-text",children:s})]},t),Pe("div",{className:"flow-line",style:{background:n.cta}},t+10)]}))})]})}/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Tu="139",sa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},oa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},e2=0,Hv=1,t2=2,uP=3,cP=0,wx=1,Sx=2,Ol=3,wo=0,Nn=1,Sr=2,Mx=1,fP=2,ni=0,_a=1,Gv=2,Vv=3,Wv=4,n2=5,la=100,i2=101,r2=102,jv=103,qv=104,s2=200,o2=201,a2=202,l2=203,Ex=204,Tx=205,u2=206,c2=207,f2=208,d2=209,h2=210,p2=0,m2=1,g2=2,Rp=3,v2=4,y2=5,x2=6,_2=7,Mf=0,w2=1,S2=2,Er=0,M2=1,E2=2,T2=3,bx=4,b2=5,em=300,So=301,Mo=302,tf=303,nf=304,bu=306,rf=1e3,$n=1001,sf=1002,Ut=1003,Pp=1004,dP=1004,Lp=1005,hP=1005,Pt=1006,Ax=1007,pP=1007,Lo=1008,mP=1008,_i=1009,A2=1010,C2=1011,su=1012,R2=1013,Zl=1014,Hr=1015,po=1016,P2=1017,L2=1018,mo=1020,D2=1021,I2=1022,Di=1023,N2=1024,z2=1025,go=1026,Eo=1027,F2=1028,k2=1029,B2=1030,O2=1031,U2=1033,Jh=33776,Kh=33777,$h=33778,ep=33779,Xv=35840,Yv=35841,Zv=35842,Qv=35843,H2=36196,Jv=37492,Kv=37496,$v=37808,ey=37809,ty=37810,ny=37811,iy=37812,ry=37813,sy=37814,oy=37815,ay=37816,ly=37817,uy=37818,cy=37819,fy=37820,dy=37821,hy=36492,G2=2200,V2=2201,W2=2202,of=2300,af=2301,tp=2302,ha=2400,pa=2401,lf=2402,tm=2500,Cx=2501,j2=0,gP=1,vP=2,Tr=3e3,dt=3001,Do=3200,q2=3201,Ba=0,X2=1,yP="",kr="srgb",ro="srgb-linear",xP=0,np=7680,_P=7681,wP=7682,SP=7683,MP=34055,EP=34056,TP=5386,bP=512,AP=513,CP=514,RP=515,PP=516,LP=517,DP=518,Y2=519,ou=35044,au=35048,IP=35040,NP=35045,zP=35049,FP=35041,kP=35046,BP=35050,OP=35042,UP="100",py="300 es",Dp=1035;class ar{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const In=[];for(let n=0;n<256;n++)In[n]=(n<16?"0":"")+n.toString(16);let uS=1234567;const wa=Math.PI/180,uf=180/Math.PI;function Ni(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(In[n&255]+In[n>>8&255]+In[n>>16&255]+In[n>>24&255]+"-"+In[e&255]+In[e>>8&255]+"-"+In[e>>16&15|64]+In[e>>24&255]+"-"+In[t&63|128]+In[t>>8&255]+"-"+In[t>>16&255]+In[t>>24&255]+In[i&255]+In[i>>8&255]+In[i>>16&255]+In[i>>24&255]).toLowerCase()}function cn(n,e,t){return Math.max(e,Math.min(t,n))}function Rx(n,e){return(n%e+e)%e}function HP(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function GP(n,e,t){return n!==e?(t-n)/(e-n):0}function Dc(n,e,t){return(1-t)*n+t*e}function VP(n,e,t,i){return Dc(n,e,1-Math.exp(-t*i))}function WP(n,e=1){return e-Math.abs(Rx(n,e*2)-e)}function jP(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function qP(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function XP(n,e){return n+Math.floor(Math.random()*(e-n+1))}function YP(n,e){return n+Math.random()*(e-n)}function ZP(n){return n*(.5-Math.random())}function QP(n){n!==void 0&&(uS=n);let e=uS+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function JP(n){return n*wa}function KP(n){return n*uf}function my(n){return(n&n-1)===0&&n!==0}function Z2(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ip(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function $P(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),f=s((e+i)/2),d=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),x=o((i-e)/2);switch(r){case"XYX":n.set(l*d,c*p,c*m,l*f);break;case"YZY":n.set(c*m,l*d,c*p,l*f);break;case"ZXZ":n.set(c*p,c*m,l*d,l*f);break;case"XZX":n.set(l*d,c*x,c*g,l*f);break;case"YXY":n.set(c*g,l*d,c*x,l*f);break;case"ZYZ":n.set(c*x,c*g,l*d,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function eL(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function tL(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var cS=Object.freeze({__proto__:null,DEG2RAD:wa,RAD2DEG:uf,generateUUID:Ni,clamp:cn,euclideanModulo:Rx,mapLinear:HP,inverseLerp:GP,lerp:Dc,damp:VP,pingpong:WP,smoothstep:jP,smootherstep:qP,randInt:XP,randFloat:YP,randFloatSpread:ZP,seededRandom:QP,degToRad:JP,radToDeg:KP,isPowerOfTwo:my,ceilPowerOfTwo:Z2,floorPowerOfTwo:Ip,setQuaternionFromProperEuler:$P,normalize:tL,denormalize:eL});class ne{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ne.prototype.isVector2=!0;class Mn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,l,c,f){const d=this.elements;return d[0]=e,d[1]=r,d[2]=l,d[3]=t,d[4]=s,d[5]=c,d[6]=i,d[7]=o,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],c=i[6],f=i[1],d=i[4],p=i[7],m=i[2],g=i[5],x=i[8],y=r[0],w=r[3],S=r[6],_=r[1],E=r[4],b=r[7],A=r[2],R=r[5],P=r[8];return s[0]=o*y+l*_+c*A,s[3]=o*w+l*E+c*R,s[6]=o*S+l*b+c*P,s[1]=f*y+d*_+p*A,s[4]=f*w+d*E+p*R,s[7]=f*S+d*b+p*P,s[2]=m*y+g*_+x*A,s[5]=m*w+g*E+x*R,s[8]=m*S+g*b+x*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],d=e[8];return t*o*d-t*l*f-i*s*d+i*l*c+r*s*f-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],d=e[8],p=d*o-l*f,m=l*c-d*s,g=f*s-o*c,x=t*p+i*m+r*g;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/x;return e[0]=p*y,e[1]=(r*f-d*i)*y,e[2]=(l*i-r*o)*y,e[3]=m*y,e[4]=(d*t-r*c)*y,e[5]=(r*s-l*t)*y,e[6]=g*y,e[7]=(i*c-f*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const c=Math.cos(s),f=Math.sin(s);return this.set(i*c,i*f,-i*(c*o+f*l)+o+e,-r*f,r*c,-r*(-f*o+c*l)+l+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],l=r[6],c=r[1],f=r[4],d=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*f,r[6]=t*l+i*d,r[1]=-i*s+t*c,r[4]=-i*o+t*f,r[7]=-i*l+t*d,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Mn.prototype.isMatrix3=!0;function Q2(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const nL={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ul(n,e){return new nL[n](e)}function cf(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Sa(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ip(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const i0={[kr]:{[ro]:Sa},[ro]:{[kr]:ip}},Jn={legacyMode:!0,get workingColorSpace(){return ro},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(i0[e]&&i0[e][t]!==void 0){const i=i0[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},J2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wn={r:0,g:0,b:0},hr={h:0,s:0,l:0},Qd={h:0,s:0,l:0};function r0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function Jd(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Te{constructor(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ro){return this.r=e,this.g=t,this.b=i,Jn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ro){if(e=Rx(e,1),t=cn(t,0,1),i=cn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=r0(o,s,e+1/3),this.g=r0(o,s,e),this.b=r0(o,s,e-1/3)}return Jn.toWorkingColorSpace(this,r),this}setStyle(e,t=kr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Jn.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Jn.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(s[1])/360,f=parseInt(s[2],10)/100,d=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(c,f,d,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Jn.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Jn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=kr){const i=J2[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Sa(e.r),this.g=Sa(e.g),this.b=Sa(e.b),this}copyLinearToSRGB(e){return this.r=ip(e.r),this.g=ip(e.g),this.b=ip(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kr){return Jn.fromWorkingColorSpace(Jd(this,wn),e),cn(wn.r*255,0,255)<<16^cn(wn.g*255,0,255)<<8^cn(wn.b*255,0,255)<<0}getHexString(e=kr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ro){Jn.fromWorkingColorSpace(Jd(this,wn),t);const i=wn.r,r=wn.g,s=wn.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let c,f;const d=(l+o)/2;if(l===o)c=0,f=0;else{const p=o-l;switch(f=d<=.5?p/(o+l):p/(2-o-l),o){case i:c=(r-s)/p+(r<s?6:0);break;case r:c=(s-i)/p+2;break;case s:c=(i-r)/p+4;break}c/=6}return e.h=c,e.s=f,e.l=d,e}getRGB(e,t=ro){return Jn.fromWorkingColorSpace(Jd(this,wn),t),e.r=wn.r,e.g=wn.g,e.b=wn.b,e}getStyle(e=kr){return Jn.fromWorkingColorSpace(Jd(this,wn),e),e!==kr?`color(${e} ${wn.r} ${wn.g} ${wn.b})`:`rgb(${wn.r*255|0},${wn.g*255|0},${wn.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(hr),hr.h+=e,hr.s+=t,hr.l+=i,this.setHSL(hr.h,hr.s,hr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(hr),e.getHSL(Qd);const i=Dc(hr.h,Qd.h,t),r=Dc(hr.s,Qd.s,t),s=Dc(hr.l,Qd.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Te.NAMES=J2;Te.prototype.isColor=!0;Te.prototype.r=1;Te.prototype.g=1;Te.prototype.b=1;let al;class Io{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{al===void 0&&(al=cf("canvas")),al.width=e.width,al.height=e.height;const i=al.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=al}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const t=cf("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Sa(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Sa(t[i]/255)*255):t[i]=Sa(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ma{constructor(e=null){this.uuid=Ni(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(s0(r[o].image)):s.push(s0(r[o]))}else s=s0(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function s0(n){return typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap?Io.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}ma.prototype.isSource=!0;let iL=0;class hn extends ar{constructor(e=hn.DEFAULT_IMAGE,t=hn.DEFAULT_MAPPING,i=$n,r=$n,s=Pt,o=Lo,l=Di,c=_i,f=1,d=Tr){super(),Object.defineProperty(this,"id",{value:iL++}),this.uuid=Ni(),this.name="",this.source=new ma(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new ne(0,0),this.repeat=new ne(1,1),this.center=new ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==em)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rf:e.x=e.x-Math.floor(e.x);break;case $n:e.x=e.x<0?0:1;break;case sf:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rf:e.y=e.y-Math.floor(e.y);break;case $n:e.y=e.y<0?0:1;break;case sf:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}hn.DEFAULT_IMAGE=null;hn.DEFAULT_MAPPING=em;hn.prototype.isTexture=!0;class Nt{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,f=c[0],d=c[4],p=c[8],m=c[1],g=c[5],x=c[9],y=c[2],w=c[6],S=c[10];if(Math.abs(d-m)<.01&&Math.abs(p-y)<.01&&Math.abs(x-w)<.01){if(Math.abs(d+m)<.1&&Math.abs(p+y)<.1&&Math.abs(x+w)<.1&&Math.abs(f+g+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(f+1)/2,b=(g+1)/2,A=(S+1)/2,R=(d+m)/4,P=(p+y)/4,D=(x+w)/4;return E>b&&E>A?E<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(E),r=R/i,s=P/i):b>A?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=R/r,s=D/r):A<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(A),i=P/s,r=D/s),this.set(i,r,s,t),this}let _=Math.sqrt((w-x)*(w-x)+(p-y)*(p-y)+(m-d)*(m-d));return Math.abs(_)<.001&&(_=1),this.x=(w-x)/_,this.y=(p-y)/_,this.z=(m-d)/_,this.w=Math.acos((f+g+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Nt.prototype.isVector4=!0;class Xt extends ar{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Nt(0,0,e,t),this.scissorTest=!1,this.viewport=new Nt(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new hn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Pt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Xt.prototype.isWebGLRenderTarget=!0;class Au extends hn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ut,this.minFilter=Ut,this.wrapR=$n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Au.prototype.isDataArrayTexture=!0;class K2 extends Xt{constructor(e,t,i){super(e,t),this.depth=i,this.texture=new Au(null,e,t,i),this.texture.isRenderTargetTexture=!0}}K2.prototype.isWebGLArrayRenderTarget=!0;class Ef extends hn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ut,this.minFilter=Ut,this.wrapR=$n,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ef.prototype.isData3DTexture=!0;class $2 extends Xt{constructor(e,t,i){super(e,t),this.depth=i,this.texture=new Ef(null,e,t,i),this.texture.isRenderTargetTexture=!0}}$2.prototype.isWebGL3DRenderTarget=!0;class e3 extends Xt{constructor(e,t,i,r={}){super(e,t,r);const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}e3.prototype.isWebGLMultipleRenderTargets=!0;class En{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,l){let c=i[r+0],f=i[r+1],d=i[r+2],p=i[r+3];const m=s[o+0],g=s[o+1],x=s[o+2],y=s[o+3];if(l===0){e[t+0]=c,e[t+1]=f,e[t+2]=d,e[t+3]=p;return}if(l===1){e[t+0]=m,e[t+1]=g,e[t+2]=x,e[t+3]=y;return}if(p!==y||c!==m||f!==g||d!==x){let w=1-l;const S=c*m+f*g+d*x+p*y,_=S>=0?1:-1,E=1-S*S;if(E>Number.EPSILON){const A=Math.sqrt(E),R=Math.atan2(A,S*_);w=Math.sin(w*R)/A,l=Math.sin(l*R)/A}const b=l*_;if(c=c*w+m*b,f=f*w+g*b,d=d*w+x*b,p=p*w+y*b,w===1-l){const A=1/Math.sqrt(c*c+f*f+d*d+p*p);c*=A,f*=A,d*=A,p*=A}}e[t]=c,e[t+1]=f,e[t+2]=d,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],c=i[r+1],f=i[r+2],d=i[r+3],p=s[o],m=s[o+1],g=s[o+2],x=s[o+3];return e[t]=l*x+d*p+c*g-f*m,e[t+1]=c*x+d*m+f*p-l*g,e[t+2]=f*x+d*g+l*m-c*p,e[t+3]=d*x-l*p-c*m-f*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,f=l(i/2),d=l(r/2),p=l(s/2),m=c(i/2),g=c(r/2),x=c(s/2);switch(o){case"XYZ":this._x=m*d*p+f*g*x,this._y=f*g*p-m*d*x,this._z=f*d*x+m*g*p,this._w=f*d*p-m*g*x;break;case"YXZ":this._x=m*d*p+f*g*x,this._y=f*g*p-m*d*x,this._z=f*d*x-m*g*p,this._w=f*d*p+m*g*x;break;case"ZXY":this._x=m*d*p-f*g*x,this._y=f*g*p+m*d*x,this._z=f*d*x+m*g*p,this._w=f*d*p-m*g*x;break;case"ZYX":this._x=m*d*p-f*g*x,this._y=f*g*p+m*d*x,this._z=f*d*x-m*g*p,this._w=f*d*p+m*g*x;break;case"YZX":this._x=m*d*p+f*g*x,this._y=f*g*p+m*d*x,this._z=f*d*x-m*g*p,this._w=f*d*p-m*g*x;break;case"XZY":this._x=m*d*p-f*g*x,this._y=f*g*p-m*d*x,this._z=f*d*x+m*g*p,this._w=f*d*p+m*g*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],c=t[9],f=t[2],d=t[6],p=t[10],m=i+l+p;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(d-c)*g,this._y=(s-f)*g,this._z=(o-r)*g}else if(i>l&&i>p){const g=2*Math.sqrt(1+i-l-p);this._w=(d-c)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+f)/g}else if(l>p){const g=2*Math.sqrt(1+l-i-p);this._w=(s-f)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(c+d)/g}else{const g=2*Math.sqrt(1+p-i-l);this._w=(o-r)/g,this._x=(s+f)/g,this._y=(c+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(cn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,c=t._y,f=t._z,d=t._w;return this._x=i*d+o*l+r*f-s*c,this._y=r*d+o*c+s*l-i*f,this._z=s*d+o*f+i*c-r*l,this._w=o*d-i*l-r*c-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(c),d=Math.atan2(f,l),p=Math.sin((1-t)*d)/f,m=Math.sin(t*d)/f;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}En.prototype.isQuaternion=!0;class L{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(fS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(fS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,f=c*t+o*r-l*i,d=c*i+l*t-s*r,p=c*r+s*i-o*t,m=-s*t-o*i-l*r;return this.x=f*c+m*-s+d*-l-p*-o,this.y=d*c+m*-o+p*-s-f*-l,this.z=p*c+m*-l+f*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*o-i*c,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return o0.copy(this).projectOnVector(e),this.sub(o0)}reflect(e){return this.sub(o0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(cn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}L.prototype.isVector3=!0;const o0=new L,fS=new En;class Oi{constructor(e=new L(1/0,1/0,1/0),t=new L(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let c=0,f=e.length;c<f;c+=3){const d=e[c],p=e[c+1],m=e[c+2];d<t&&(t=d),p<i&&(i=p),m<r&&(r=m),d>s&&(s=d),p>o&&(o=p),m>l&&(l=m)}return this.min.set(t,i,r),this.max.set(s,o,l),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let c=0,f=e.count;c<f;c++){const d=e.getX(c),p=e.getY(c),m=e.getZ(c);d<t&&(t=d),p<i&&(i=p),m<r&&(r=m),d>s&&(s=d),p>o&&(o=p),m>l&&(l=m)}return this.min.set(t,i,r),this.max.set(s,o,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Zo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,l=s.count;o<l;o++)Zo.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Zo)}else i.boundingBox===null&&i.computeBoundingBox(),a0.copy(i.boundingBox),a0.applyMatrix4(e.matrixWorld),this.union(a0);const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Zo),Zo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(lc),Kd.subVectors(this.max,lc),ll.subVectors(e.a,lc),ul.subVectors(e.b,lc),cl.subVectors(e.c,lc),Hs.subVectors(ul,ll),Gs.subVectors(cl,ul),Qo.subVectors(ll,cl);let t=[0,-Hs.z,Hs.y,0,-Gs.z,Gs.y,0,-Qo.z,Qo.y,Hs.z,0,-Hs.x,Gs.z,0,-Gs.x,Qo.z,0,-Qo.x,-Hs.y,Hs.x,0,-Gs.y,Gs.x,0,-Qo.y,Qo.x,0];return!l0(t,ll,ul,cl,Kd)||(t=[1,0,0,0,1,0,0,0,1],!l0(t,ll,ul,cl,Kd))?!1:($d.crossVectors(Hs,Gs),t=[$d.x,$d.y,$d.z],l0(t,ll,ul,cl,Kd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Zo.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Zo).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(os[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),os[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),os[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),os[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),os[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),os[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),os[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),os[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(os),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Oi.prototype.isBox3=!0;const os=[new L,new L,new L,new L,new L,new L,new L,new L],Zo=new L,a0=new Oi,ll=new L,ul=new L,cl=new L,Hs=new L,Gs=new L,Qo=new L,lc=new L,Kd=new L,$d=new L,Jo=new L;function l0(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Jo.fromArray(n,s);const l=r.x*Math.abs(Jo.x)+r.y*Math.abs(Jo.y)+r.z*Math.abs(Jo.z),c=e.dot(Jo),f=t.dot(Jo),d=i.dot(Jo);if(Math.max(-Math.max(c,f,d),Math.min(c,f,d))>l)return!1}return!0}const rL=new Oi,dS=new L,eh=new L,u0=new L;class No{constructor(e=new L,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):rL.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){u0.subVectors(e,this.center);const t=u0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(u0.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?eh.set(0,0,1).multiplyScalar(e.radius):eh.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(dS.copy(e.center).add(eh)),this.expandByPoint(dS.copy(e.center).sub(eh)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const as=new L,c0=new L,th=new L,Vs=new L,f0=new L,nh=new L,d0=new L;class zo{constructor(e=new L,t=new L(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,as)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=as.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(as.copy(this.direction).multiplyScalar(t).add(this.origin),as.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){c0.copy(e).add(t).multiplyScalar(.5),th.copy(t).sub(e).normalize(),Vs.copy(this.origin).sub(c0);const s=e.distanceTo(t)*.5,o=-this.direction.dot(th),l=Vs.dot(this.direction),c=-Vs.dot(th),f=Vs.lengthSq(),d=Math.abs(1-o*o);let p,m,g,x;if(d>0)if(p=o*c-l,m=o*l-c,x=s*d,p>=0)if(m>=-x)if(m<=x){const y=1/d;p*=y,m*=y,g=p*(p+o*m+2*l)+m*(o*p+m+2*c)+f}else m=s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*c)+f;else m=-s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*c)+f;else m<=-x?(p=Math.max(0,-(-o*s+l)),m=p>0?-s:Math.min(Math.max(-s,-c),s),g=-p*p+m*(m+2*c)+f):m<=x?(p=0,m=Math.min(Math.max(-s,-c),s),g=m*(m+2*c)+f):(p=Math.max(0,-(o*s+l)),m=p>0?s:Math.min(Math.max(-s,-c),s),g=-p*p+m*(m+2*c)+f);else m=o>0?-s:s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*c)+f;return i&&i.copy(this.direction).multiplyScalar(p).add(this.origin),r&&r.copy(th).multiplyScalar(m).add(c0),g}intersectSphere(e,t){as.subVectors(e.center,this.origin);const i=as.dot(this.direction),r=as.dot(as)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=i-o,c=i+o;return l<0&&c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,l,c;const f=1/this.direction.x,d=1/this.direction.y,p=1/this.direction.z,m=this.origin;return f>=0?(i=(e.min.x-m.x)*f,r=(e.max.x-m.x)*f):(i=(e.max.x-m.x)*f,r=(e.min.x-m.x)*f),d>=0?(s=(e.min.y-m.y)*d,o=(e.max.y-m.y)*d):(s=(e.max.y-m.y)*d,o=(e.min.y-m.y)*d),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),p>=0?(l=(e.min.z-m.z)*p,c=(e.max.z-m.z)*p):(l=(e.max.z-m.z)*p,c=(e.min.z-m.z)*p),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,as)!==null}intersectTriangle(e,t,i,r,s){f0.subVectors(t,e),nh.subVectors(i,e),d0.crossVectors(f0,nh);let o=this.direction.dot(d0),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Vs.subVectors(this.origin,e);const c=l*this.direction.dot(nh.crossVectors(Vs,nh));if(c<0)return null;const f=l*this.direction.dot(f0.cross(Vs));if(f<0||c+f>o)return null;const d=-l*Vs.dot(d0);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ke{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,l,c,f,d,p,m,g,x,y,w){const S=this.elements;return S[0]=e,S[4]=t,S[8]=i,S[12]=r,S[1]=s,S[5]=o,S[9]=l,S[13]=c,S[2]=f,S[6]=d,S[10]=p,S[14]=m,S[3]=g,S[7]=x,S[11]=y,S[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ke().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/fl.setFromMatrixColumn(e,0).length(),s=1/fl.setFromMatrixColumn(e,1).length(),o=1/fl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),f=Math.sin(r),d=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=o*d,g=o*p,x=l*d,y=l*p;t[0]=c*d,t[4]=-c*p,t[8]=f,t[1]=g+x*f,t[5]=m-y*f,t[9]=-l*c,t[2]=y-m*f,t[6]=x+g*f,t[10]=o*c}else if(e.order==="YXZ"){const m=c*d,g=c*p,x=f*d,y=f*p;t[0]=m+y*l,t[4]=x*l-g,t[8]=o*f,t[1]=o*p,t[5]=o*d,t[9]=-l,t[2]=g*l-x,t[6]=y+m*l,t[10]=o*c}else if(e.order==="ZXY"){const m=c*d,g=c*p,x=f*d,y=f*p;t[0]=m-y*l,t[4]=-o*p,t[8]=x+g*l,t[1]=g+x*l,t[5]=o*d,t[9]=y-m*l,t[2]=-o*f,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const m=o*d,g=o*p,x=l*d,y=l*p;t[0]=c*d,t[4]=x*f-g,t[8]=m*f+y,t[1]=c*p,t[5]=y*f+m,t[9]=g*f-x,t[2]=-f,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const m=o*c,g=o*f,x=l*c,y=l*f;t[0]=c*d,t[4]=y-m*p,t[8]=x*p+g,t[1]=p,t[5]=o*d,t[9]=-l*d,t[2]=-f*d,t[6]=g*p+x,t[10]=m-y*p}else if(e.order==="XZY"){const m=o*c,g=o*f,x=l*c,y=l*f;t[0]=c*d,t[4]=-p,t[8]=f*d,t[1]=m*p+y,t[5]=o*d,t[9]=g*p-x,t[2]=x*p-g,t[6]=l*d,t[10]=y*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(sL,e,oL)}lookAt(e,t,i){const r=this.elements;return Ci.subVectors(e,t),Ci.lengthSq()===0&&(Ci.z=1),Ci.normalize(),Ws.crossVectors(i,Ci),Ws.lengthSq()===0&&(Math.abs(i.z)===1?Ci.x+=1e-4:Ci.z+=1e-4,Ci.normalize(),Ws.crossVectors(i,Ci)),Ws.normalize(),ih.crossVectors(Ci,Ws),r[0]=Ws.x,r[4]=ih.x,r[8]=Ci.x,r[1]=Ws.y,r[5]=ih.y,r[9]=Ci.y,r[2]=Ws.z,r[6]=ih.z,r[10]=Ci.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],c=i[8],f=i[12],d=i[1],p=i[5],m=i[9],g=i[13],x=i[2],y=i[6],w=i[10],S=i[14],_=i[3],E=i[7],b=i[11],A=i[15],R=r[0],P=r[4],D=r[8],V=r[12],U=r[1],C=r[5],k=r[9],ee=r[13],W=r[2],K=r[6],X=r[10],$=r[14],O=r[3],q=r[7],Q=r[11],oe=r[15];return s[0]=o*R+l*U+c*W+f*O,s[4]=o*P+l*C+c*K+f*q,s[8]=o*D+l*k+c*X+f*Q,s[12]=o*V+l*ee+c*$+f*oe,s[1]=d*R+p*U+m*W+g*O,s[5]=d*P+p*C+m*K+g*q,s[9]=d*D+p*k+m*X+g*Q,s[13]=d*V+p*ee+m*$+g*oe,s[2]=x*R+y*U+w*W+S*O,s[6]=x*P+y*C+w*K+S*q,s[10]=x*D+y*k+w*X+S*Q,s[14]=x*V+y*ee+w*$+S*oe,s[3]=_*R+E*U+b*W+A*O,s[7]=_*P+E*C+b*K+A*q,s[11]=_*D+E*k+b*X+A*Q,s[15]=_*V+E*ee+b*$+A*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],f=e[13],d=e[2],p=e[6],m=e[10],g=e[14],x=e[3],y=e[7],w=e[11],S=e[15];return x*(+s*c*p-r*f*p-s*l*m+i*f*m+r*l*g-i*c*g)+y*(+t*c*g-t*f*m+s*o*m-r*o*g+r*f*d-s*c*d)+w*(+t*f*p-t*l*g-s*o*p+i*o*g+s*l*d-i*f*d)+S*(-r*l*d-t*c*p+t*l*m+r*o*p-i*o*m+i*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],d=e[8],p=e[9],m=e[10],g=e[11],x=e[12],y=e[13],w=e[14],S=e[15],_=p*w*f-y*m*f+y*c*g-l*w*g-p*c*S+l*m*S,E=x*m*f-d*w*f-x*c*g+o*w*g+d*c*S-o*m*S,b=d*y*f-x*p*f+x*l*g-o*y*g-d*l*S+o*p*S,A=x*p*c-d*y*c-x*l*m+o*y*m+d*l*w-o*p*w,R=t*_+i*E+r*b+s*A;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/R;return e[0]=_*P,e[1]=(y*m*s-p*w*s-y*r*g+i*w*g+p*r*S-i*m*S)*P,e[2]=(l*w*s-y*c*s+y*r*f-i*w*f-l*r*S+i*c*S)*P,e[3]=(p*c*s-l*m*s-p*r*f+i*m*f+l*r*g-i*c*g)*P,e[4]=E*P,e[5]=(d*w*s-x*m*s+x*r*g-t*w*g-d*r*S+t*m*S)*P,e[6]=(x*c*s-o*w*s-x*r*f+t*w*f+o*r*S-t*c*S)*P,e[7]=(o*m*s-d*c*s+d*r*f-t*m*f-o*r*g+t*c*g)*P,e[8]=b*P,e[9]=(x*p*s-d*y*s-x*i*g+t*y*g+d*i*S-t*p*S)*P,e[10]=(o*y*s-x*l*s+x*i*f-t*y*f-o*i*S+t*l*S)*P,e[11]=(d*l*s-o*p*s-d*i*f+t*p*f+o*i*g-t*l*g)*P,e[12]=A*P,e[13]=(d*y*r-x*p*r+x*i*m-t*y*m-d*i*w+t*p*w)*P,e[14]=(x*l*r-o*y*r-x*i*c+t*y*c+o*i*w-t*l*w)*P,e[15]=(o*p*r-d*l*r+d*i*c-t*p*c-o*i*m+t*l*m)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,c=e.z,f=s*o,d=s*l;return this.set(f*o+i,f*l-r*c,f*c+r*l,0,f*l+r*c,d*l+i,d*c-r*o,0,f*c-r*l,d*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,f=s+s,d=o+o,p=l+l,m=s*f,g=s*d,x=s*p,y=o*d,w=o*p,S=l*p,_=c*f,E=c*d,b=c*p,A=i.x,R=i.y,P=i.z;return r[0]=(1-(y+S))*A,r[1]=(g+b)*A,r[2]=(x-E)*A,r[3]=0,r[4]=(g-b)*R,r[5]=(1-(m+S))*R,r[6]=(w+_)*R,r[7]=0,r[8]=(x+E)*P,r[9]=(w-_)*P,r[10]=(1-(m+y))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=fl.set(r[0],r[1],r[2]).length();const o=fl.set(r[4],r[5],r[6]).length(),l=fl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],pr.copy(this);const f=1/s,d=1/o,p=1/l;return pr.elements[0]*=f,pr.elements[1]*=f,pr.elements[2]*=f,pr.elements[4]*=d,pr.elements[5]*=d,pr.elements[6]*=d,pr.elements[8]*=p,pr.elements[9]*=p,pr.elements[10]*=p,t.setFromRotationMatrix(pr),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const l=this.elements,c=2*s/(t-e),f=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r),m=-(o+s)/(o-s),g=-2*o*s/(o-s);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o){const l=this.elements,c=1/(t-e),f=1/(i-r),d=1/(o-s),p=(t+e)*c,m=(i+r)*f,g=(o+s)*d;return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=-2*d,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}ke.prototype.isMatrix4=!0;const fl=new L,pr=new ke,sL=new L(0,0,0),oL=new L(1,1,1),Ws=new L,ih=new L,Ci=new L,hS=new ke,pS=new En;class Fo{constructor(e=0,t=0,i=0,r=Fo.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],f=r[5],d=r[9],p=r[2],m=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(cn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,f),this._z=0);break;case"YXZ":this._x=Math.asin(-cn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(cn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-cn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(cn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-cn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return hS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return pS.setFromEuler(this),this.setFromQuaternion(pS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Fo.prototype.isEuler=!0;Fo.DefaultOrder="XYZ";Fo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ma{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let aL=0;const mS=new L,dl=new En,ls=new ke,rh=new L,uc=new L,lL=new L,uL=new En,gS=new L(1,0,0),vS=new L(0,1,0),yS=new L(0,0,1),cL={type:"added"},xS={type:"removed"};class vt extends ar{constructor(){super(),Object.defineProperty(this,"id",{value:aL++}),this.uuid=Ni(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vt.DefaultUp.clone();const e=new L,t=new Fo,i=new En,r=new L(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ke},normalMatrix:{value:new Mn}}),this.matrix=new ke,this.matrixWorld=new ke,this.matrixAutoUpdate=vt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ma,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return dl.setFromAxisAngle(e,t),this.quaternion.multiply(dl),this}rotateOnWorldAxis(e,t){return dl.setFromAxisAngle(e,t),this.quaternion.premultiply(dl),this}rotateX(e){return this.rotateOnAxis(gS,e)}rotateY(e){return this.rotateOnAxis(vS,e)}rotateZ(e){return this.rotateOnAxis(yS,e)}translateOnAxis(e,t){return mS.copy(e).applyQuaternion(this.quaternion),this.position.add(mS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(gS,e)}translateY(e){return this.translateOnAxis(vS,e)}translateZ(e){return this.translateOnAxis(yS,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ls.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?rh.copy(e):rh.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),uc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ls.lookAt(uc,rh,this.up):ls.lookAt(rh,uc,this.up),this.quaternion.setFromRotationMatrix(ls),r&&(ls.extractRotation(r.matrixWorld),dl.setFromRotationMatrix(ls),this.quaternion.premultiply(dl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(cL)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(xS)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(xS)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ls.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ls.multiply(e.parent.matrixWorld)),e.applyMatrix4(ls),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uc,e,lL),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uc,uL,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,d=c.length;f<d;f++){const p=c[f];s(e.shapes,p)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),f=o(e.textures),d=o(e.images),p=o(e.shapes),m=o(e.skeletons),g=o(e.animations),x=o(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),d.length>0&&(i.images=d),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),x.length>0&&(i.nodes=x)}return i.object=r,i;function o(l){const c=[];for(const f in l){const d=l[f];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}vt.DefaultUp=new L(0,1,0);vt.DefaultMatrixAutoUpdate=!0;vt.prototype.isObject3D=!0;const mr=new L,us=new L,h0=new L,cs=new L,hl=new L,pl=new L,_S=new L,p0=new L,m0=new L,g0=new L;class fn{constructor(e=new L,t=new L,i=new L){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),mr.subVectors(e,t),r.cross(mr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){mr.subVectors(r,t),us.subVectors(i,t),h0.subVectors(e,t);const o=mr.dot(mr),l=mr.dot(us),c=mr.dot(h0),f=us.dot(us),d=us.dot(h0),p=o*f-l*l;if(p===0)return s.set(-2,-1,-1);const m=1/p,g=(f*c-l*d)*m,x=(o*d-l*c)*m;return s.set(1-g-x,x,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,cs),cs.x>=0&&cs.y>=0&&cs.x+cs.y<=1}static getUV(e,t,i,r,s,o,l,c){return this.getBarycoord(e,t,i,r,cs),c.set(0,0),c.addScaledVector(s,cs.x),c.addScaledVector(o,cs.y),c.addScaledVector(l,cs.z),c}static isFrontFacing(e,t,i,r){return mr.subVectors(i,t),us.subVectors(e,t),mr.cross(us).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return mr.subVectors(this.c,this.b),us.subVectors(this.a,this.b),mr.cross(us).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return fn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return fn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return fn.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return fn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return fn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;hl.subVectors(r,i),pl.subVectors(s,i),p0.subVectors(e,i);const c=hl.dot(p0),f=pl.dot(p0);if(c<=0&&f<=0)return t.copy(i);m0.subVectors(e,r);const d=hl.dot(m0),p=pl.dot(m0);if(d>=0&&p<=d)return t.copy(r);const m=c*p-d*f;if(m<=0&&c>=0&&d<=0)return o=c/(c-d),t.copy(i).addScaledVector(hl,o);g0.subVectors(e,s);const g=hl.dot(g0),x=pl.dot(g0);if(x>=0&&g<=x)return t.copy(s);const y=g*f-c*x;if(y<=0&&f>=0&&x<=0)return l=f/(f-x),t.copy(i).addScaledVector(pl,l);const w=d*x-g*p;if(w<=0&&p-d>=0&&g-x>=0)return _S.subVectors(s,r),l=(p-d)/(p-d+(g-x)),t.copy(r).addScaledVector(_S,l);const S=1/(w+y+m);return o=y*S,l=m*S,t.copy(i).addScaledVector(hl,o).addScaledVector(pl,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let fL=0;class pn extends ar{constructor(){super(),Object.defineProperty(this,"id",{value:fL++}),this.uuid=Ni(),this.name="",this.type="Material",this.fog=!0,this.blending=_a,this.side=wo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ex,this.blendDst=Tx,this.blendEquation=la,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Rp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Y2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=np,this.stencilZFail=np,this.stencilZPass=np,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===Mx;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==_a&&(i.blending=this.blending),this.side!==wo&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}pn.prototype.isMaterial=!0;pn.fromType=function(){return null};class Rs extends pn{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Rs.prototype.isMeshBasicMaterial=!0;const vn=new L,sh=new ne;class mt{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=ou,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Te),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new ne),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new L),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Nt),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)sh.fromBufferAttribute(this,t),sh.applyMatrix3(e),this.setXY(t,sh.x,sh.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.applyMatrix3(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.applyMatrix4(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.applyNormalMatrix(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)vn.fromBufferAttribute(this,t),vn.transformDirection(e),this.setXYZ(t,vn.x,vn.y,vn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ou&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}mt.prototype.isBufferAttribute=!0;class t3 extends mt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class n3 extends mt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class i3 extends mt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class r3 extends mt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class nm extends mt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class s3 extends mt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class im extends mt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class o3 extends mt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}o3.prototype.isFloat16BufferAttribute=!0;class Fe extends mt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class a3 extends mt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let dL=0;const Ki=new ke,v0=new vt,ml=new L,Ri=new Oi,cc=new Oi,Cn=new L;class Qe extends ar{constructor(){super(),Object.defineProperty(this,"id",{value:dL++}),this.uuid=Ni(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Q2(e)?im:nm)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Mn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ki.makeRotationFromQuaternion(e),this.applyMatrix4(Ki),this}rotateX(e){return Ki.makeRotationX(e),this.applyMatrix4(Ki),this}rotateY(e){return Ki.makeRotationY(e),this.applyMatrix4(Ki),this}rotateZ(e){return Ki.makeRotationZ(e),this.applyMatrix4(Ki),this}translate(e,t,i){return Ki.makeTranslation(e,t,i),this.applyMatrix4(Ki),this}scale(e,t,i){return Ki.makeScale(e,t,i),this.applyMatrix4(Ki),this}lookAt(e){return v0.lookAt(e),v0.updateMatrix(),this.applyMatrix4(v0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ml).negate(),this.translate(ml.x,ml.y,ml.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Fe(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Oi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new L(-1/0,-1/0,-1/0),new L(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ri.setFromBufferAttribute(s),this.morphTargetsRelative?(Cn.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(Cn),Cn.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(Cn)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new No);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new L,1/0);return}if(e){const i=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];cc.setFromBufferAttribute(l),this.morphTargetsRelative?(Cn.addVectors(Ri.min,cc.min),Ri.expandByPoint(Cn),Cn.addVectors(Ri.max,cc.max),Ri.expandByPoint(Cn)):(Ri.expandByPoint(cc.min),Ri.expandByPoint(cc.max))}Ri.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Cn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Cn));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let f=0,d=l.count;f<d;f++)Cn.fromBufferAttribute(l,f),c&&(ml.fromBufferAttribute(e,f),Cn.add(ml)),r=Math.max(r,i.distanceToSquared(Cn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new mt(new Float32Array(4*l),4));const c=this.getAttribute("tangent").array,f=[],d=[];for(let U=0;U<l;U++)f[U]=new L,d[U]=new L;const p=new L,m=new L,g=new L,x=new ne,y=new ne,w=new ne,S=new L,_=new L;function E(U,C,k){p.fromArray(r,U*3),m.fromArray(r,C*3),g.fromArray(r,k*3),x.fromArray(o,U*2),y.fromArray(o,C*2),w.fromArray(o,k*2),m.sub(p),g.sub(p),y.sub(x),w.sub(x);const ee=1/(y.x*w.y-w.x*y.y);!isFinite(ee)||(S.copy(m).multiplyScalar(w.y).addScaledVector(g,-y.y).multiplyScalar(ee),_.copy(g).multiplyScalar(y.x).addScaledVector(m,-w.x).multiplyScalar(ee),f[U].add(S),f[C].add(S),f[k].add(S),d[U].add(_),d[C].add(_),d[k].add(_))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let U=0,C=b.length;U<C;++U){const k=b[U],ee=k.start,W=k.count;for(let K=ee,X=ee+W;K<X;K+=3)E(i[K+0],i[K+1],i[K+2])}const A=new L,R=new L,P=new L,D=new L;function V(U){P.fromArray(s,U*3),D.copy(P);const C=f[U];A.copy(C),A.sub(P.multiplyScalar(P.dot(C))).normalize(),R.crossVectors(D,C);const ee=R.dot(d[U])<0?-1:1;c[U*4]=A.x,c[U*4+1]=A.y,c[U*4+2]=A.z,c[U*4+3]=ee}for(let U=0,C=b.length;U<C;++U){const k=b[U],ee=k.start,W=k.count;for(let K=ee,X=ee+W;K<X;K+=3)V(i[K+0]),V(i[K+1]),V(i[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new mt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new L,s=new L,o=new L,l=new L,c=new L,f=new L,d=new L,p=new L;if(e)for(let m=0,g=e.count;m<g;m+=3){const x=e.getX(m+0),y=e.getX(m+1),w=e.getX(m+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,w),d.subVectors(o,s),p.subVectors(r,s),d.cross(p),l.fromBufferAttribute(i,x),c.fromBufferAttribute(i,y),f.fromBufferAttribute(i,w),l.add(d),c.add(d),f.add(d),i.setXYZ(x,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(w,f.x,f.y,f.z)}else for(let m=0,g=t.count;m<g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),d.subVectors(o,s),p.subVectors(r,s),d.cross(p),i.setXYZ(m+0,d.x,d.y,d.z),i.setXYZ(m+1,d.x,d.y,d.z),i.setXYZ(m+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const o=i[r].array,l=e.attributes[r],c=l.array,f=l.itemSize*t,d=Math.min(c.length,o.length-f);for(let p=0,m=f;p<d;p++,m++)o[m]=c[p]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Cn.fromBufferAttribute(e,t),Cn.normalize(),e.setXYZ(t,Cn.x,Cn.y,Cn.z)}toNonIndexed(){function e(l,c){const f=l.array,d=l.itemSize,p=l.normalized,m=new f.constructor(c.length*d);let g=0,x=0;for(let y=0,w=c.length;y<w;y++){l.isInterleavedBufferAttribute?g=c[y]*l.data.stride+l.offset:g=c[y]*d;for(let S=0;S<d;S++)m[x++]=f[g++]}return new mt(m,d,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qe,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],f=e(c,i);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const c=[],f=s[l];for(let d=0,p=f.length;d<p;d++){const m=f[d],g=e(m,i);c.push(g)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const f=o[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],d=[];for(let p=0,m=f.length;p<m;p++){const g=f[p];d.push(g.toJSON(e.data))}d.length>0&&(r[c]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const d=r[f];this.setAttribute(f,d.clone(t))}const s=e.morphAttributes;for(const f in s){const d=[],p=s[f];for(let m=0,g=p.length;m<g;m++)d.push(p[m].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,d=o.length;f<d;f++){const p=o[f];this.addGroup(p.start,p.count,p.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Qe.prototype.isBufferGeometry=!0;const wS=new ke,gl=new zo,y0=new No,js=new L,qs=new L,Xs=new L,x0=new L,_0=new L,w0=new L,oh=new L,ah=new L,lh=new L,uh=new ne,ch=new ne,fh=new ne,S0=new L,dh=new L;class dn extends vt{constructor(e=new Qe,t=new Rs){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),y0.copy(i.boundingSphere),y0.applyMatrix4(s),e.ray.intersectsSphere(y0)===!1)||(wS.copy(s).invert(),gl.copy(e.ray).applyMatrix4(wS),i.boundingBox!==null&&gl.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const l=i.index,c=i.attributes.position,f=i.morphAttributes.position,d=i.morphTargetsRelative,p=i.attributes.uv,m=i.attributes.uv2,g=i.groups,x=i.drawRange;if(l!==null)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const S=g[y],_=r[S.materialIndex],E=Math.max(S.start,x.start),b=Math.min(l.count,Math.min(S.start+S.count,x.start+x.count));for(let A=E,R=b;A<R;A+=3){const P=l.getX(A),D=l.getX(A+1),V=l.getX(A+2);o=hh(this,_,e,gl,c,f,d,p,m,P,D,V),o&&(o.faceIndex=Math.floor(A/3),o.face.materialIndex=S.materialIndex,t.push(o))}}else{const y=Math.max(0,x.start),w=Math.min(l.count,x.start+x.count);for(let S=y,_=w;S<_;S+=3){const E=l.getX(S),b=l.getX(S+1),A=l.getX(S+2);o=hh(this,r,e,gl,c,f,d,p,m,E,b,A),o&&(o.faceIndex=Math.floor(S/3),t.push(o))}}else if(c!==void 0)if(Array.isArray(r))for(let y=0,w=g.length;y<w;y++){const S=g[y],_=r[S.materialIndex],E=Math.max(S.start,x.start),b=Math.min(c.count,Math.min(S.start+S.count,x.start+x.count));for(let A=E,R=b;A<R;A+=3){const P=A,D=A+1,V=A+2;o=hh(this,_,e,gl,c,f,d,p,m,P,D,V),o&&(o.faceIndex=Math.floor(A/3),o.face.materialIndex=S.materialIndex,t.push(o))}}else{const y=Math.max(0,x.start),w=Math.min(c.count,x.start+x.count);for(let S=y,_=w;S<_;S+=3){const E=S,b=S+1,A=S+2;o=hh(this,r,e,gl,c,f,d,p,m,E,b,A),o&&(o.faceIndex=Math.floor(S/3),t.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}dn.prototype.isMesh=!0;function hL(n,e,t,i,r,s,o,l){let c;if(e.side===Nn?c=i.intersectTriangle(o,s,r,!0,l):c=i.intersectTriangle(r,s,o,e.side!==Sr,l),c===null)return null;dh.copy(l),dh.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(dh);return f<t.near||f>t.far?null:{distance:f,point:dh.clone(),object:n}}function hh(n,e,t,i,r,s,o,l,c,f,d,p){js.fromBufferAttribute(r,f),qs.fromBufferAttribute(r,d),Xs.fromBufferAttribute(r,p);const m=n.morphTargetInfluences;if(s&&m){oh.set(0,0,0),ah.set(0,0,0),lh.set(0,0,0);for(let x=0,y=s.length;x<y;x++){const w=m[x],S=s[x];w!==0&&(x0.fromBufferAttribute(S,f),_0.fromBufferAttribute(S,d),w0.fromBufferAttribute(S,p),o?(oh.addScaledVector(x0,w),ah.addScaledVector(_0,w),lh.addScaledVector(w0,w)):(oh.addScaledVector(x0.sub(js),w),ah.addScaledVector(_0.sub(qs),w),lh.addScaledVector(w0.sub(Xs),w)))}js.add(oh),qs.add(ah),Xs.add(lh)}n.isSkinnedMesh&&(n.boneTransform(f,js),n.boneTransform(d,qs),n.boneTransform(p,Xs));const g=hL(n,e,t,i,js,qs,Xs,S0);if(g){l&&(uh.fromBufferAttribute(l,f),ch.fromBufferAttribute(l,d),fh.fromBufferAttribute(l,p),g.uv=fn.getUV(S0,js,qs,Xs,uh,ch,fh,new ne)),c&&(uh.fromBufferAttribute(c,f),ch.fromBufferAttribute(c,d),fh.fromBufferAttribute(c,p),g.uv2=fn.getUV(S0,js,qs,Xs,uh,ch,fh,new ne));const x={a:f,b:d,c:p,normal:new L,materialIndex:0};fn.getNormal(js,qs,Xs,x.normal),g.face=x}return g}class Ts extends Qe{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],f=[],d=[],p=[];let m=0,g=0;x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Fe(f,3)),this.setAttribute("normal",new Fe(d,3)),this.setAttribute("uv",new Fe(p,2));function x(y,w,S,_,E,b,A,R,P,D,V){const U=b/P,C=A/D,k=b/2,ee=A/2,W=R/2,K=P+1,X=D+1;let $=0,O=0;const q=new L;for(let Q=0;Q<X;Q++){const oe=Q*C-ee;for(let de=0;de<K;de++){const ve=de*U-k;q[y]=ve*_,q[w]=oe*E,q[S]=W,f.push(q.x,q.y,q.z),q[y]=0,q[w]=0,q[S]=R>0?1:-1,d.push(q.x,q.y,q.z),p.push(de/P),p.push(1-Q/D),$+=1}}for(let Q=0;Q<D;Q++)for(let oe=0;oe<P;oe++){const de=m+oe+K*Q,ve=m+oe+K*(Q+1),Ye=m+(oe+1)+K*(Q+1),Ue=m+(oe+1)+K*Q;c.push(de,ve,Ue),c.push(ve,Ye,Ue),O+=6}l.addGroup(g,O,V),g+=O,m+=$}}static fromJSON(e){return new Ts(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function lu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Wn(n){const e={};for(let t=0;t<n.length;t++){const i=lu(n[t]);for(const r in i)e[r]=i[r]}return e}const l3={clone:lu,merge:Wn};var pL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Pn extends pn{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=pL,this.fragmentShader=mL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=lu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}Pn.prototype.isShaderMaterial=!0;class Oa extends vt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new ke,this.projectionMatrix=new ke,this.projectionMatrixInverse=new ke}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Oa.prototype.isCamera=!0;class Ht extends Oa{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(wa*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uf*2*Math.atan(Math.tan(wa*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(wa*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/f,r*=o.width/c,i*=o.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Ht.prototype.isPerspectiveCamera=!0;const vl=90,yl=1;class rm extends vt{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new Ht(vl,yl,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new L(1,0,0)),this.add(r);const s=new Ht(vl,yl,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new L(-1,0,0)),this.add(s);const o=new Ht(vl,yl,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new L(0,1,0)),this.add(o);const l=new Ht(vl,yl,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new L(0,-1,0)),this.add(l);const c=new Ht(vl,yl,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new L(0,0,1)),this.add(c);const f=new Ht(vl,yl,e,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new L(0,0,-1)),this.add(f)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,l,c,f]=this.children,d=e.getRenderTarget(),p=e.outputEncoding,m=e.toneMapping,g=e.xr.enabled;e.outputEncoding=Tr,e.toneMapping=Er,e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,l),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=x,e.setRenderTarget(i,5),e.render(t,f),e.setRenderTarget(d),e.outputEncoding=p,e.toneMapping=m,e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class Cu extends hn{constructor(e,t,i,r,s,o,l,c,f,d){e=e!==void 0?e:[],t=t!==void 0?t:So,super(e,t,i,r,s,o,l,c,f,d),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Cu.prototype.isCubeTexture=!0;class sm extends Xt{constructor(e,t={}){super(e,e,t);const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Cu(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Pt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ts(5,5,5),s=new Pn({name:"CubemapFromEquirect",uniforms:lu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Nn,blending:ni});s.uniforms.tEquirect.value=t;const o=new dn(r,s),l=t.minFilter;return t.minFilter===Lo&&(t.minFilter=Pt),new rm(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}sm.prototype.isWebGLCubeRenderTarget=!0;const M0=new L,gL=new L,vL=new Mn;class Br{constructor(e=new L(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=M0.subVectors(i,t).cross(gL.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(M0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||vL.getNormalMatrix(e),r=this.coplanarPoint(M0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Br.prototype.isPlane=!0;const xl=new No,ph=new L;class Tf{constructor(e=new Br,t=new Br,i=new Br,r=new Br,s=new Br,o=new Br){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],l=i[3],c=i[4],f=i[5],d=i[6],p=i[7],m=i[8],g=i[9],x=i[10],y=i[11],w=i[12],S=i[13],_=i[14],E=i[15];return t[0].setComponents(l-r,p-c,y-m,E-w).normalize(),t[1].setComponents(l+r,p+c,y+m,E+w).normalize(),t[2].setComponents(l+s,p+f,y+g,E+S).normalize(),t[3].setComponents(l-s,p-f,y-g,E-S).normalize(),t[4].setComponents(l-o,p-d,y-x,E-_).normalize(),t[5].setComponents(l+o,p+d,y+x,E+_).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),xl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(xl)}intersectsSprite(e){return xl.center.set(0,0,0),xl.radius=.7071067811865476,xl.applyMatrix4(e.matrixWorld),this.intersectsSphere(xl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ph.x=r.normal.x>0?e.max.x:e.min.x,ph.y=r.normal.y>0?e.max.y:e.min.y,ph.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ph)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function u3(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function yL(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,d){const p=f.array,m=f.usage,g=n.createBuffer();n.bindBuffer(d,g),n.bufferData(d,p,m),f.onUploadCallback();let x;if(p instanceof Float32Array)x=5126;else if(p instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)x=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else x=5123;else if(p instanceof Int16Array)x=5122;else if(p instanceof Uint32Array)x=5125;else if(p instanceof Int32Array)x=5124;else if(p instanceof Int8Array)x=5120;else if(p instanceof Uint8Array)x=5121;else if(p instanceof Uint8ClampedArray)x=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:g,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version}}function s(f,d,p){const m=d.array,g=d.updateRange;n.bindBuffer(p,f),g.count===-1?n.bufferSubData(p,0,m):(t?n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m,g.offset,g.count):n.bufferSubData(p,g.offset*m.BYTES_PER_ELEMENT,m.subarray(g.offset,g.offset+g.count)),g.count=-1)}function o(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function l(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=i.get(f);d&&(n.deleteBuffer(d.buffer),i.delete(f))}function c(f,d){if(f.isGLBufferAttribute){const m=i.get(f);(!m||m.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const p=i.get(f);p===void 0?i.set(f,r(f,d)):p.version<f.version&&(s(p.buffer,f,d),p.version=f.version)}return{get:o,remove:l,update:c}}class Ra extends Qe{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),c=Math.floor(r),f=l+1,d=c+1,p=e/l,m=t/c,g=[],x=[],y=[],w=[];for(let S=0;S<d;S++){const _=S*m-o;for(let E=0;E<f;E++){const b=E*p-s;x.push(b,-_,0),y.push(0,0,1),w.push(E/l),w.push(1-S/c)}}for(let S=0;S<c;S++)for(let _=0;_<l;_++){const E=_+f*S,b=_+f*(S+1),A=_+1+f*(S+1),R=_+1+f*S;g.push(E,b,R),g.push(b,A,R)}this.setIndex(g),this.setAttribute("position",new Fe(x,3)),this.setAttribute("normal",new Fe(y,3)),this.setAttribute("uv",new Fe(w,2))}static fromJSON(e){return new Ra(e.width,e.height,e.widthSegments,e.heightSegments)}}var xL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,_L=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wL=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,SL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ML=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,EL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,TL="vec3 transformed = vec3( position );",bL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,AL=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,CL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,RL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,PL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,DL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,IL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,NL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,FL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,kL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,BL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,OL=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,UL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,HL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,GL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,VL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,WL="gl_FragColor = linearToOutputTexel( gl_FragColor );",jL=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,XL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,YL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,ZL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,QL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,JL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,KL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$L=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eD=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tD=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,nD=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,iD=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,rD=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,sD=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,oD=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,aD=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lD=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,uD=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cD=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,fD=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,dD=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,hD=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pD=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mD=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,gD=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,vD=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yD=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,xD=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,_D=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,wD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,SD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,MD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ED=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,TD=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bD=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,AD=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,CD=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,RD=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,PD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,LD=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,DD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ID=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ND=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,FD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,kD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,BD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,OD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,UD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,HD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,GD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,VD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,WD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,jD=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,qD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,XD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,YD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ZD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,QD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,JD=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,$D=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,eI=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,tI=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,nI=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iI=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rI=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,sI=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,oI=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,aI=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,lI=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,uI=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,cI=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,fI=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,dI=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,hI=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const pI=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mI=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,gI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vI=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,yI=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xI=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,_I=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wI=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,SI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,MI=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,EI=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,TI=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bI=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,AI=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CI=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RI=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,LI=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DI=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,II=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,NI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,kI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,HI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GI=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VI=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,WI=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,pt={alphamap_fragment:xL,alphamap_pars_fragment:_L,alphatest_fragment:wL,alphatest_pars_fragment:SL,aomap_fragment:ML,aomap_pars_fragment:EL,begin_vertex:TL,beginnormal_vertex:bL,bsdfs:AL,bumpmap_pars_fragment:CL,clipping_planes_fragment:RL,clipping_planes_pars_fragment:PL,clipping_planes_pars_vertex:LL,clipping_planes_vertex:DL,color_fragment:IL,color_pars_fragment:NL,color_pars_vertex:zL,color_vertex:FL,common:kL,cube_uv_reflection_fragment:BL,defaultnormal_vertex:OL,displacementmap_pars_vertex:UL,displacementmap_vertex:HL,emissivemap_fragment:GL,emissivemap_pars_fragment:VL,encodings_fragment:WL,encodings_pars_fragment:jL,envmap_fragment:qL,envmap_common_pars_fragment:XL,envmap_pars_fragment:YL,envmap_pars_vertex:ZL,envmap_physical_pars_fragment:oD,envmap_vertex:QL,fog_vertex:JL,fog_pars_vertex:KL,fog_fragment:$L,fog_pars_fragment:eD,gradientmap_pars_fragment:tD,lightmap_fragment:nD,lightmap_pars_fragment:iD,lights_lambert_vertex:rD,lights_pars_begin:sD,lights_toon_fragment:aD,lights_toon_pars_fragment:lD,lights_phong_fragment:uD,lights_phong_pars_fragment:cD,lights_physical_fragment:fD,lights_physical_pars_fragment:dD,lights_fragment_begin:hD,lights_fragment_maps:pD,lights_fragment_end:mD,logdepthbuf_fragment:gD,logdepthbuf_pars_fragment:vD,logdepthbuf_pars_vertex:yD,logdepthbuf_vertex:xD,map_fragment:_D,map_pars_fragment:wD,map_particle_fragment:SD,map_particle_pars_fragment:MD,metalnessmap_fragment:ED,metalnessmap_pars_fragment:TD,morphcolor_vertex:bD,morphnormal_vertex:AD,morphtarget_pars_vertex:CD,morphtarget_vertex:RD,normal_fragment_begin:PD,normal_fragment_maps:LD,normal_pars_fragment:DD,normal_pars_vertex:ID,normal_vertex:ND,normalmap_pars_fragment:zD,clearcoat_normal_fragment_begin:FD,clearcoat_normal_fragment_maps:kD,clearcoat_pars_fragment:BD,output_fragment:OD,packing:UD,premultiplied_alpha_fragment:HD,project_vertex:GD,dithering_fragment:VD,dithering_pars_fragment:WD,roughnessmap_fragment:jD,roughnessmap_pars_fragment:qD,shadowmap_pars_fragment:XD,shadowmap_pars_vertex:YD,shadowmap_vertex:ZD,shadowmask_pars_fragment:QD,skinbase_vertex:JD,skinning_pars_vertex:KD,skinning_vertex:$D,skinnormal_vertex:eI,specularmap_fragment:tI,specularmap_pars_fragment:nI,tonemapping_fragment:iI,tonemapping_pars_fragment:rI,transmission_fragment:sI,transmission_pars_fragment:oI,uv_pars_fragment:aI,uv_pars_vertex:lI,uv_vertex:uI,uv2_pars_fragment:cI,uv2_pars_vertex:fI,uv2_vertex:dI,worldpos_vertex:hI,background_vert:pI,background_frag:mI,cube_vert:gI,cube_frag:vI,depth_vert:yI,depth_frag:xI,distanceRGBA_vert:_I,distanceRGBA_frag:wI,equirect_vert:SI,equirect_frag:MI,linedashed_vert:EI,linedashed_frag:TI,meshbasic_vert:bI,meshbasic_frag:AI,meshlambert_vert:CI,meshlambert_frag:RI,meshmatcap_vert:PI,meshmatcap_frag:LI,meshnormal_vert:DI,meshnormal_frag:II,meshphong_vert:NI,meshphong_frag:zI,meshphysical_vert:FI,meshphysical_frag:kI,meshtoon_vert:BI,meshtoon_frag:OI,points_vert:UI,points_frag:HI,shadow_vert:GI,shadow_frag:VI,sprite_vert:WI,sprite_frag:jI},Ee={common:{diffuse:{value:new Te(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Mn},uv2Transform:{value:new Mn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Te(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Te(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mn}},sprite:{diffuse:{value:new Te(16777215)},opacity:{value:1},center:{value:new ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Mn}}},wr={basic:{uniforms:Wn([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.fog]),vertexShader:pt.meshbasic_vert,fragmentShader:pt.meshbasic_frag},lambert:{uniforms:Wn([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.fog,Ee.lights,{emissive:{value:new Te(0)}}]),vertexShader:pt.meshlambert_vert,fragmentShader:pt.meshlambert_frag},phong:{uniforms:Wn([Ee.common,Ee.specularmap,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,Ee.lights,{emissive:{value:new Te(0)},specular:{value:new Te(1118481)},shininess:{value:30}}]),vertexShader:pt.meshphong_vert,fragmentShader:pt.meshphong_frag},standard:{uniforms:Wn([Ee.common,Ee.envmap,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.roughnessmap,Ee.metalnessmap,Ee.fog,Ee.lights,{emissive:{value:new Te(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag},toon:{uniforms:Wn([Ee.common,Ee.aomap,Ee.lightmap,Ee.emissivemap,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.gradientmap,Ee.fog,Ee.lights,{emissive:{value:new Te(0)}}]),vertexShader:pt.meshtoon_vert,fragmentShader:pt.meshtoon_frag},matcap:{uniforms:Wn([Ee.common,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,Ee.fog,{matcap:{value:null}}]),vertexShader:pt.meshmatcap_vert,fragmentShader:pt.meshmatcap_frag},points:{uniforms:Wn([Ee.points,Ee.fog]),vertexShader:pt.points_vert,fragmentShader:pt.points_frag},dashed:{uniforms:Wn([Ee.common,Ee.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pt.linedashed_vert,fragmentShader:pt.linedashed_frag},depth:{uniforms:Wn([Ee.common,Ee.displacementmap]),vertexShader:pt.depth_vert,fragmentShader:pt.depth_frag},normal:{uniforms:Wn([Ee.common,Ee.bumpmap,Ee.normalmap,Ee.displacementmap,{opacity:{value:1}}]),vertexShader:pt.meshnormal_vert,fragmentShader:pt.meshnormal_frag},sprite:{uniforms:Wn([Ee.sprite,Ee.fog]),vertexShader:pt.sprite_vert,fragmentShader:pt.sprite_frag},background:{uniforms:{uvTransform:{value:new Mn},t2D:{value:null}},vertexShader:pt.background_vert,fragmentShader:pt.background_frag},cube:{uniforms:Wn([Ee.envmap,{opacity:{value:1}}]),vertexShader:pt.cube_vert,fragmentShader:pt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pt.equirect_vert,fragmentShader:pt.equirect_frag},distanceRGBA:{uniforms:Wn([Ee.common,Ee.displacementmap,{referencePosition:{value:new L},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pt.distanceRGBA_vert,fragmentShader:pt.distanceRGBA_frag},shadow:{uniforms:Wn([Ee.lights,Ee.fog,{color:{value:new Te(0)},opacity:{value:1}}]),vertexShader:pt.shadow_vert,fragmentShader:pt.shadow_frag}};wr.physical={uniforms:Wn([wr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ne(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Te(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Te(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Te(1,1,1)},specularColorMap:{value:null}}]),vertexShader:pt.meshphysical_vert,fragmentShader:pt.meshphysical_frag};function qI(n,e,t,i,r,s){const o=new Te(0);let l=r===!0?0:1,c,f,d=null,p=0,m=null;function g(y,w){let S=!1,_=w.isScene===!0?w.background:null;_&&_.isTexture&&(_=e.get(_));const E=n.xr,b=E.getSession&&E.getSession();b&&b.environmentBlendMode==="additive"&&(_=null),_===null?x(o,l):_&&_.isColor&&(x(_,1),S=!0),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===bu)?(f===void 0&&(f=new dn(new Ts(1,1,1),new Pn({name:"BackgroundCubeMaterial",uniforms:lu(wr.cube.uniforms),vertexShader:wr.cube.vertexShader,fragmentShader:wr.cube.fragmentShader,side:Nn,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(A,R,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=_,f.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,(d!==_||p!==_.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,d=_,p=_.version,m=n.toneMapping),y.unshift(f,f.geometry,f.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new dn(new Ra(2,2),new Pn({name:"BackgroundMaterial",uniforms:lu(wr.background.uniforms),vertexShader:wr.background.vertexShader,fragmentShader:wr.background.fragmentShader,side:wo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(d!==_||p!==_.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=_,p=_.version,m=n.toneMapping),y.unshift(c,c.geometry,c.material,0,0,null))}function x(y,w){t.buffers.color.setClear(y.r,y.g,y.b,w,s)}return{getClearColor:function(){return o},setClearColor:function(y,w=1){o.set(y),l=w,x(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,x(o,l)},render:g}}function XI(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,l={},c=w(null);let f=c,d=!1;function p(W,K,X,$,O){let q=!1;if(o){const Q=y($,X,K);f!==Q&&(f=Q,g(f.object)),q=S($,O),q&&_($,O)}else{const Q=K.wireframe===!0;(f.geometry!==$.id||f.program!==X.id||f.wireframe!==Q)&&(f.geometry=$.id,f.program=X.id,f.wireframe=Q,q=!0)}W.isInstancedMesh===!0&&(q=!0),O!==null&&t.update(O,34963),(q||d)&&(d=!1,D(W,K,X,$),O!==null&&n.bindBuffer(34963,t.get(O).buffer))}function m(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function g(W){return i.isWebGL2?n.bindVertexArray(W):s.bindVertexArrayOES(W)}function x(W){return i.isWebGL2?n.deleteVertexArray(W):s.deleteVertexArrayOES(W)}function y(W,K,X){const $=X.wireframe===!0;let O=l[W.id];O===void 0&&(O={},l[W.id]=O);let q=O[K.id];q===void 0&&(q={},O[K.id]=q);let Q=q[$];return Q===void 0&&(Q=w(m()),q[$]=Q),Q}function w(W){const K=[],X=[],$=[];for(let O=0;O<r;O++)K[O]=0,X[O]=0,$[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:X,attributeDivisors:$,object:W,attributes:{},index:null}}function S(W,K){const X=f.attributes,$=W.attributes;let O=0;for(const q in $){const Q=X[q],oe=$[q];if(Q===void 0||Q.attribute!==oe||Q.data!==oe.data)return!0;O++}return f.attributesNum!==O||f.index!==K}function _(W,K){const X={},$=W.attributes;let O=0;for(const q in $){const Q=$[q],oe={};oe.attribute=Q,Q.data&&(oe.data=Q.data),X[q]=oe,O++}f.attributes=X,f.attributesNum=O,f.index=K}function E(){const W=f.newAttributes;for(let K=0,X=W.length;K<X;K++)W[K]=0}function b(W){A(W,0)}function A(W,K){const X=f.newAttributes,$=f.enabledAttributes,O=f.attributeDivisors;X[W]=1,$[W]===0&&(n.enableVertexAttribArray(W),$[W]=1),O[W]!==K&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,K),O[W]=K)}function R(){const W=f.newAttributes,K=f.enabledAttributes;for(let X=0,$=K.length;X<$;X++)K[X]!==W[X]&&(n.disableVertexAttribArray(X),K[X]=0)}function P(W,K,X,$,O,q){i.isWebGL2===!0&&(X===5124||X===5125)?n.vertexAttribIPointer(W,K,X,O,q):n.vertexAttribPointer(W,K,X,$,O,q)}function D(W,K,X,$){if(i.isWebGL2===!1&&(W.isInstancedMesh||$.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const O=$.attributes,q=X.getAttributes(),Q=K.defaultAttributeValues;for(const oe in q){const de=q[oe];if(de.location>=0){let ve=O[oe];if(ve===void 0&&(oe==="instanceMatrix"&&W.instanceMatrix&&(ve=W.instanceMatrix),oe==="instanceColor"&&W.instanceColor&&(ve=W.instanceColor)),ve!==void 0){const Ye=ve.normalized,Ue=ve.itemSize,ae=t.get(ve);if(ae===void 0)continue;const at=ae.buffer,et=ae.type,Je=ae.bytesPerElement;if(ve.isInterleavedBufferAttribute){const we=ve.data,Ze=we.stride,ce=ve.offset;if(we.isInstancedInterleavedBuffer){for(let le=0;le<de.locationSize;le++)A(de.location+le,we.meshPerAttribute);W.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let le=0;le<de.locationSize;le++)b(de.location+le);n.bindBuffer(34962,at);for(let le=0;le<de.locationSize;le++)P(de.location+le,Ue/de.locationSize,et,Ye,Ze*Je,(ce+Ue/de.locationSize*le)*Je)}else{if(ve.isInstancedBufferAttribute){for(let we=0;we<de.locationSize;we++)A(de.location+we,ve.meshPerAttribute);W.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let we=0;we<de.locationSize;we++)b(de.location+we);n.bindBuffer(34962,at);for(let we=0;we<de.locationSize;we++)P(de.location+we,Ue/de.locationSize,et,Ye,Ue*Je,Ue/de.locationSize*we*Je)}}else if(Q!==void 0){const Ye=Q[oe];if(Ye!==void 0)switch(Ye.length){case 2:n.vertexAttrib2fv(de.location,Ye);break;case 3:n.vertexAttrib3fv(de.location,Ye);break;case 4:n.vertexAttrib4fv(de.location,Ye);break;default:n.vertexAttrib1fv(de.location,Ye)}}}}R()}function V(){k();for(const W in l){const K=l[W];for(const X in K){const $=K[X];for(const O in $)x($[O].object),delete $[O];delete K[X]}delete l[W]}}function U(W){if(l[W.id]===void 0)return;const K=l[W.id];for(const X in K){const $=K[X];for(const O in $)x($[O].object),delete $[O];delete K[X]}delete l[W.id]}function C(W){for(const K in l){const X=l[K];if(X[W.id]===void 0)continue;const $=X[W.id];for(const O in $)x($[O].object),delete $[O];delete X[W.id]}}function k(){ee(),d=!0,f!==c&&(f=c,g(f.object))}function ee(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:p,reset:k,resetDefaultState:ee,dispose:V,releaseStatesOfGeometry:U,releaseStatesOfProgram:C,initAttributes:E,enableAttribute:b,disableUnusedAttributes:R}}function YI(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}function l(f,d){n.drawArrays(s,f,d),t.update(d,s,1)}function c(f,d,p){if(p===0)return;let m,g;if(r)m=n,g="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,f,d,p),t.update(d,s,p)}this.setMode=o,this.render=l,this.renderInstances=c}function ZI(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&n instanceof WebGL2ComputeRenderingContext;let l=t.precision!==void 0?t.precision:"highp";const c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const f=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,p=n.getParameter(34930),m=n.getParameter(35660),g=n.getParameter(3379),x=n.getParameter(34076),y=n.getParameter(34921),w=n.getParameter(36347),S=n.getParameter(36348),_=n.getParameter(36349),E=m>0,b=o||e.has("OES_texture_float"),A=E&&b,R=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:x,maxAttributes:y,maxVertexUniforms:w,maxVaryings:S,maxFragmentUniforms:_,vertexTextures:E,floatFragmentTextures:b,floatVertexTextures:A,maxSamples:R}}function QI(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Br,l=new Mn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m,g){const x=p.length!==0||m||i!==0||r;return r=m,t=d(p,g,0),i=p.length,x},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1,f()},this.setState=function(p,m,g){const x=p.clippingPlanes,y=p.clipIntersection,w=p.clipShadows,S=n.get(p);if(!r||x===null||x.length===0||s&&!w)s?d(null):f();else{const _=s?0:i,E=_*4;let b=S.clippingState||null;c.value=b,b=d(x,m,E,g);for(let A=0;A!==E;++A)b[A]=t[A];S.clippingState=b,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(p,m,g,x){const y=p!==null?p.length:0;let w=null;if(y!==0){if(w=c.value,x!==!0||w===null){const S=g+y*4,_=m.matrixWorldInverse;l.getNormalMatrix(_),(w===null||w.length<S)&&(w=new Float32Array(S));for(let E=0,b=g;E!==y;++E,b+=4)o.copy(p[E]).applyMatrix4(_,l),o.normal.toArray(w,b),w[b+3]=o.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,w}}function JI(n){let e=new WeakMap;function t(o,l){return l===tf?o.mapping=So:l===nf&&(o.mapping=Mo),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const l=o.mapping;if(l===tf||l===nf)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const f=new sm(c.height/2);return f.fromEquirectangularTexture(n,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class _s extends Oa{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}_s.prototype.isOrthographicCamera=!0;const Hl=4,SS=[.125,.215,.35,.446,.526,.582],ua=20,E0=new _s,MS=new Te;let T0=null;const aa=(1+Math.sqrt(5))/2,_l=1/aa,ES=[new L(1,1,1),new L(-1,1,1),new L(1,1,-1),new L(-1,1,-1),new L(0,aa,_l),new L(0,aa,-_l),new L(_l,0,aa),new L(-_l,0,aa),new L(aa,_l,0),new L(-aa,_l,0)];class gy{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){T0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=AS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=bS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(T0),e.scissorTest=!1,mh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===So||e.mapping===Mo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),T0=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,i={magFilter:Pt,minFilter:Pt,generateMipmaps:!1,type:po,format:Di,encoding:Tr,depthBuffer:!1},r=TS(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=TS(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=KI(s)),this._blurMaterial=$I(s,e,t)}return r}_compileMaterial(e){const t=new dn(this._lodPlanes[0],e);this._renderer.compile(t,E0)}_sceneToCubeUV(e,t,i,r){const l=new Ht(90,1,t,i),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,m=d.toneMapping;d.getClearColor(MS),d.toneMapping=Er,d.autoClear=!1;const g=new Rs({name:"PMREM.Background",side:Nn,depthWrite:!1,depthTest:!1}),x=new dn(new Ts,g);let y=!1;const w=e.background;w?w.isColor&&(g.color.copy(w),e.background=null,y=!0):(g.color.copy(MS),y=!0);for(let S=0;S<6;S++){const _=S%3;_===0?(l.up.set(0,c[S],0),l.lookAt(f[S],0,0)):_===1?(l.up.set(0,0,c[S]),l.lookAt(0,f[S],0)):(l.up.set(0,c[S],0),l.lookAt(0,0,f[S]));const E=this._cubeSize;mh(r,_*E,S>2?E:0,E,E),d.setRenderTarget(r),y&&d.render(x,l),d.render(e,l)}x.geometry.dispose(),x.material.dispose(),d.toneMapping=m,d.autoClear=p,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===So||e.mapping===Mo;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=AS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=bS());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new dn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;mh(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,E0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=ES[(r-1)%ES.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,l){const c=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,p=new dn(this._lodPlanes[r],f),m=f.uniforms,g=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*ua-1),y=s/x,w=isFinite(s)?1+Math.floor(d*y):ua;w>ua&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${ua}`);const S=[];let _=0;for(let P=0;P<ua;++P){const D=P/y,V=Math.exp(-D*D/2);S.push(V),P===0?_+=V:P<w&&(_+=2*V)}for(let P=0;P<S.length;P++)S[P]=S[P]/_;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=S,m.latitudinal.value=o==="latitudinal",l&&(m.poleAxis.value=l);const{_lodMax:E}=this;m.dTheta.value=x,m.mipInt.value=E-i;const b=this._sizeLods[r],A=3*b*(r>E-Hl?r-E+Hl:0),R=4*(this._cubeSize-b);mh(t,A,R,3*b,2*b),c.setRenderTarget(t),c.render(p,E0)}}function KI(n){const e=[],t=[],i=[];let r=n;const s=n-Hl+1+SS.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let c=1/l;o>n-Hl?c=SS[o-n+Hl-1]:o===0&&(c=0),i.push(c);const f=1/(l-1),d=-f/2,p=1+f/2,m=[d,d,p,d,p,p,d,d,p,p,d,p],g=6,x=6,y=3,w=2,S=1,_=new Float32Array(y*x*g),E=new Float32Array(w*x*g),b=new Float32Array(S*x*g);for(let R=0;R<g;R++){const P=R%3*2/3-1,D=R>2?0:-1,V=[P,D,0,P+2/3,D,0,P+2/3,D+1,0,P,D,0,P+2/3,D+1,0,P,D+1,0];_.set(V,y*x*R),E.set(m,w*x*R);const U=[R,R,R,R,R,R];b.set(U,S*x*R)}const A=new Qe;A.setAttribute("position",new mt(_,y)),A.setAttribute("uv",new mt(E,w)),A.setAttribute("faceIndex",new mt(b,S)),e.push(A),r>Hl&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function TS(n,e,t){const i=new Xt(n,e,t);return i.texture.mapping=bu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function mh(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function $I(n,e,t){const i=new Float32Array(ua),r=new L(0,1,0);return new Pn({name:"SphericalGaussianBlur",defines:{n:ua,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Px(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ni,depthTest:!1,depthWrite:!1})}function bS(){return new Pn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Px(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ni,depthTest:!1,depthWrite:!1})}function AS(){return new Pn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Px(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ni,depthTest:!1,depthWrite:!1})}function Px(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function e4(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,f=c===tf||c===nf,d=c===So||c===Mo;if(f||d)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let p=e.get(l);return t===null&&(t=new gy(n)),p=f?t.fromEquirectangular(l,p):t.fromCubemap(l,p),e.set(l,p),p.texture}else{if(e.has(l))return e.get(l).texture;{const p=l.image;if(f&&p&&p.height>0||d&&p&&r(p)){t===null&&(t=new gy(n));const m=f?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,m),l.addEventListener("dispose",s),m.texture}else return null}}}return l}function r(l){let c=0;const f=6;for(let d=0;d<f;d++)l[d]!==void 0&&c++;return c===f}function s(l){const c=l.target;c.removeEventListener("dispose",s);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function t4(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function n4(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const x in m.attributes)e.remove(m.attributes[x]);m.removeEventListener("dispose",o),delete r[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function l(p,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function c(p){const m=p.attributes;for(const x in m)e.update(m[x],34962);const g=p.morphAttributes;for(const x in g){const y=g[x];for(let w=0,S=y.length;w<S;w++)e.update(y[w],34962)}}function f(p){const m=[],g=p.index,x=p.attributes.position;let y=0;if(g!==null){const _=g.array;y=g.version;for(let E=0,b=_.length;E<b;E+=3){const A=_[E+0],R=_[E+1],P=_[E+2];m.push(A,R,R,P,P,A)}}else{const _=x.array;y=x.version;for(let E=0,b=_.length/3-1;E<b;E+=3){const A=E+0,R=E+1,P=E+2;m.push(A,R,R,P,P,A)}}const w=new(Q2(m)?im:nm)(m,1);w.version=y;const S=s.get(p);S&&e.remove(S),s.set(p,w)}function d(p){const m=s.get(p);if(m){const g=p.index;g!==null&&m.version<g.version&&f(p)}else f(p);return s.get(p)}return{get:l,update:c,getWireframeAttribute:d}}function i4(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let l,c;function f(m){l=m.type,c=m.bytesPerElement}function d(m,g){n.drawElements(s,g,l,m*c),t.update(g,s,1)}function p(m,g,x){if(x===0)return;let y,w;if(r)y=n,w="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[w](s,g,l,m*c,x),t.update(g,s,x)}this.setMode=o,this.setIndex=f,this.render=d,this.renderInstances=p}function r4(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case 4:t.triangles+=l*(s/3);break;case 1:t.lines+=l*(s/2);break;case 3:t.lines+=l*(s-1);break;case 2:t.lines+=l*s;break;case 0:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function s4(n,e){return n[0]-e[0]}function o4(n,e){return Math.abs(e[1])-Math.abs(n[1])}function b0(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function a4(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Nt,l=[];for(let f=0;f<8;f++)l[f]=[f,0];function c(f,d,p,m){const g=f.morphTargetInfluences;if(e.isWebGL2===!0){const y=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,w=y!==void 0?y.length:0;let S=s.get(d);if(S===void 0||S.count!==w){let X=function(){W.dispose(),s.delete(d),d.removeEventListener("dispose",X)};var x=X;S!==void 0&&S.texture.dispose();const b=d.morphAttributes.position!==void 0,A=d.morphAttributes.normal!==void 0,R=d.morphAttributes.color!==void 0,P=d.morphAttributes.position||[],D=d.morphAttributes.normal||[],V=d.morphAttributes.color||[];let U=0;b===!0&&(U=1),A===!0&&(U=2),R===!0&&(U=3);let C=d.attributes.position.count*U,k=1;C>e.maxTextureSize&&(k=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const ee=new Float32Array(C*k*4*w),W=new Au(ee,C,k,w);W.type=Hr,W.needsUpdate=!0;const K=U*4;for(let $=0;$<w;$++){const O=P[$],q=D[$],Q=V[$],oe=C*k*4*$;for(let de=0;de<O.count;de++){const ve=de*K;b===!0&&(o.fromBufferAttribute(O,de),O.normalized===!0&&b0(o,O),ee[oe+ve+0]=o.x,ee[oe+ve+1]=o.y,ee[oe+ve+2]=o.z,ee[oe+ve+3]=0),A===!0&&(o.fromBufferAttribute(q,de),q.normalized===!0&&b0(o,q),ee[oe+ve+4]=o.x,ee[oe+ve+5]=o.y,ee[oe+ve+6]=o.z,ee[oe+ve+7]=0),R===!0&&(o.fromBufferAttribute(Q,de),Q.normalized===!0&&b0(o,Q),ee[oe+ve+8]=o.x,ee[oe+ve+9]=o.y,ee[oe+ve+10]=o.z,ee[oe+ve+11]=Q.itemSize===4?o.w:1)}}S={count:w,texture:W,size:new ne(C,k)},s.set(d,S),d.addEventListener("dispose",X)}let _=0;for(let b=0;b<g.length;b++)_+=g[b];const E=d.morphTargetsRelative?1:1-_;m.getUniforms().setValue(n,"morphTargetBaseInfluence",E),m.getUniforms().setValue(n,"morphTargetInfluences",g),m.getUniforms().setValue(n,"morphTargetsTexture",S.texture,t),m.getUniforms().setValue(n,"morphTargetsTextureSize",S.size)}else{const y=g===void 0?0:g.length;let w=i[d.id];if(w===void 0||w.length!==y){w=[];for(let A=0;A<y;A++)w[A]=[A,0];i[d.id]=w}for(let A=0;A<y;A++){const R=w[A];R[0]=A,R[1]=g[A]}w.sort(o4);for(let A=0;A<8;A++)A<y&&w[A][1]?(l[A][0]=w[A][0],l[A][1]=w[A][1]):(l[A][0]=Number.MAX_SAFE_INTEGER,l[A][1]=0);l.sort(s4);const S=d.morphAttributes.position,_=d.morphAttributes.normal;let E=0;for(let A=0;A<8;A++){const R=l[A],P=R[0],D=R[1];P!==Number.MAX_SAFE_INTEGER&&D?(S&&d.getAttribute("morphTarget"+A)!==S[P]&&d.setAttribute("morphTarget"+A,S[P]),_&&d.getAttribute("morphNormal"+A)!==_[P]&&d.setAttribute("morphNormal"+A,_[P]),r[A]=D,E+=D):(S&&d.hasAttribute("morphTarget"+A)===!0&&d.deleteAttribute("morphTarget"+A),_&&d.hasAttribute("morphNormal"+A)===!0&&d.deleteAttribute("morphNormal"+A),r[A]=0)}const b=d.morphTargetsRelative?1:1-E;m.getUniforms().setValue(n,"morphTargetBaseInfluence",b),m.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:c}}function l4(n,e,t,i){let r=new WeakMap;function s(c){const f=i.render.frame,d=c.geometry,p=e.get(c,d);return r.get(p)!==f&&(e.update(p),r.set(p,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),p}function o(){r=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}const c3=new hn,f3=new Au,d3=new Ef,h3=new Cu,CS=[],RS=[],PS=new Float32Array(16),LS=new Float32Array(9),DS=new Float32Array(4);function Ru(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=CS[r];if(s===void 0&&(s=new Float32Array(r),CS[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function ii(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Xn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function om(n,e){let t=RS[e];t===void 0&&(t=new Int32Array(e),RS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function u4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function c4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2fv(this.addr,e),Xn(t,e)}}function f4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ii(t,e))return;n.uniform3fv(this.addr,e),Xn(t,e)}}function d4(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4fv(this.addr,e),Xn(t,e)}}function h4(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ii(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Xn(t,e)}else{if(ii(t,i))return;DS.set(i),n.uniformMatrix2fv(this.addr,!1,DS),Xn(t,i)}}function p4(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ii(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Xn(t,e)}else{if(ii(t,i))return;LS.set(i),n.uniformMatrix3fv(this.addr,!1,LS),Xn(t,i)}}function m4(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ii(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Xn(t,e)}else{if(ii(t,i))return;PS.set(i),n.uniformMatrix4fv(this.addr,!1,PS),Xn(t,i)}}function g4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function v4(n,e){const t=this.cache;ii(t,e)||(n.uniform2iv(this.addr,e),Xn(t,e))}function y4(n,e){const t=this.cache;ii(t,e)||(n.uniform3iv(this.addr,e),Xn(t,e))}function x4(n,e){const t=this.cache;ii(t,e)||(n.uniform4iv(this.addr,e),Xn(t,e))}function _4(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function w4(n,e){const t=this.cache;ii(t,e)||(n.uniform2uiv(this.addr,e),Xn(t,e))}function S4(n,e){const t=this.cache;ii(t,e)||(n.uniform3uiv(this.addr,e),Xn(t,e))}function M4(n,e){const t=this.cache;ii(t,e)||(n.uniform4uiv(this.addr,e),Xn(t,e))}function E4(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||c3,r)}function T4(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||d3,r)}function b4(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||h3,r)}function A4(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||f3,r)}function C4(n){switch(n){case 5126:return u4;case 35664:return c4;case 35665:return f4;case 35666:return d4;case 35674:return h4;case 35675:return p4;case 35676:return m4;case 5124:case 35670:return g4;case 35667:case 35671:return v4;case 35668:case 35672:return y4;case 35669:case 35673:return x4;case 5125:return _4;case 36294:return w4;case 36295:return S4;case 36296:return M4;case 35678:case 36198:case 36298:case 36306:case 35682:return E4;case 35679:case 36299:case 36307:return T4;case 35680:case 36300:case 36308:case 36293:return b4;case 36289:case 36303:case 36311:case 36292:return A4}}function R4(n,e){n.uniform1fv(this.addr,e)}function P4(n,e){const t=Ru(e,this.size,2);n.uniform2fv(this.addr,t)}function L4(n,e){const t=Ru(e,this.size,3);n.uniform3fv(this.addr,t)}function D4(n,e){const t=Ru(e,this.size,4);n.uniform4fv(this.addr,t)}function I4(n,e){const t=Ru(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function N4(n,e){const t=Ru(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function z4(n,e){const t=Ru(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function F4(n,e){n.uniform1iv(this.addr,e)}function k4(n,e){n.uniform2iv(this.addr,e)}function B4(n,e){n.uniform3iv(this.addr,e)}function O4(n,e){n.uniform4iv(this.addr,e)}function U4(n,e){n.uniform1uiv(this.addr,e)}function H4(n,e){n.uniform2uiv(this.addr,e)}function G4(n,e){n.uniform3uiv(this.addr,e)}function V4(n,e){n.uniform4uiv(this.addr,e)}function W4(n,e,t){const i=e.length,r=om(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||c3,r[s])}function j4(n,e,t){const i=e.length,r=om(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||d3,r[s])}function q4(n,e,t){const i=e.length,r=om(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||h3,r[s])}function X4(n,e,t){const i=e.length,r=om(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||f3,r[s])}function Y4(n){switch(n){case 5126:return R4;case 35664:return P4;case 35665:return L4;case 35666:return D4;case 35674:return I4;case 35675:return N4;case 35676:return z4;case 5124:case 35670:return F4;case 35667:case 35671:return k4;case 35668:case 35672:return B4;case 35669:case 35673:return O4;case 5125:return U4;case 36294:return H4;case 36295:return G4;case 36296:return V4;case 35678:case 36198:case 36298:case 36306:case 35682:return W4;case 35679:case 36299:case 36307:return j4;case 35680:case 36300:case 36308:case 36293:return q4;case 36289:case 36303:case 36311:case 36292:return X4}}function Z4(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=C4(e.type)}function p3(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=Y4(e.type)}p3.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Xn(e,n)};function m3(n){this.id=n,this.seq=[],this.map={}}m3.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const A0=/(\w+)(\])?(\[|\.)?/g;function IS(n,e){n.seq.push(e),n.map[e.id]=e}function Q4(n,e,t){const i=n.name,r=i.length;for(A0.lastIndex=0;;){const s=A0.exec(i),o=A0.lastIndex;let l=s[1];const c=s[2]==="]",f=s[3];if(c&&(l=l|0),f===void 0||f==="["&&o+2===r){IS(t,f===void 0?new Z4(l,n,e):new p3(l,n,e));break}else{let p=t.map[l];p===void 0&&(p=new m3(l),IS(t,p)),t=p}}}function vo(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);Q4(r,s,this)}}vo.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};vo.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};vo.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],l=t[o.id];l.needsUpdate!==!1&&o.setValue(n,l.value,i)}};vo.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function NS(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let J4=0;function K4(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++)i.push(o+1+": "+t[o]);return i.join(`
`)}function $4(n){switch(n){case Tr:return["Linear","( value )"];case dt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function zS(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=parseInt(/ERROR: 0:(\d+)/.exec(r)[1]);return t.toUpperCase()+`

`+r+`

`+K4(n.getShaderSource(e),s)}function eN(n,e){const t=$4(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function tN(n,e){let t;switch(e){case M2:t="Linear";break;case E2:t="Reinhard";break;case T2:t="OptimizedCineon";break;case bx:t="ACESFilmic";break;case b2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function nN(n){return[n.extensionDerivatives||!!n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Mc).join(`
`)}function iN(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function rN(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===35674&&(l=2),s.type===35675&&(l=3),s.type===35676&&(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function Mc(n){return n!==""}function FS(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const sN=/^[ \t]*#include +<([\w\d./]+)>/gm;function vy(n){return n.replace(sN,oN)}function oN(n,e){const t=pt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return vy(t)}const aN=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,lN=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function BS(n){return n.replace(lN,g3).replace(aN,uN)}function uN(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),g3(n,e,t,i)}function g3(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function OS(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function cN(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===wx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Sx?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ol&&(e="SHADOWMAP_TYPE_VSM"),e}function fN(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case So:case Mo:e="ENVMAP_TYPE_CUBE";break;case bu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dN(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Mo:e="ENVMAP_MODE_REFRACTION";break}return e}function hN(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Mf:e="ENVMAP_BLENDING_MULTIPLY";break;case w2:e="ENVMAP_BLENDING_MIX";break;case S2:e="ENVMAP_BLENDING_ADD";break}return e}function pN(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e/32+1)+3,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function mN(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=cN(t),f=fN(t),d=dN(t),p=hN(t),m=pN(t),g=t.isWebGL2?"":nN(t),x=iN(s),y=r.createProgram();let w,S,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=[x].filter(Mc).join(`
`),w.length>0&&(w+=`
`),S=[g,x].filter(Mc).join(`
`),S.length>0&&(S+=`
`)):(w=[OS(t),"#define SHADER_NAME "+t.shaderName,x,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Mc).join(`
`),S=[g,OS(t),"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Er?"#define TONE_MAPPING":"",t.toneMapping!==Er?pt.tonemapping_pars_fragment:"",t.toneMapping!==Er?tN("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",pt.encodings_pars_fragment,eN("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Mc).join(`
`)),o=vy(o),o=FS(o,t),o=kS(o,t),l=vy(l),l=FS(l,t),l=kS(l,t),o=BS(o),l=BS(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,S=["#define varying in",t.glslVersion===py?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===py?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const E=_+w+o,b=_+S+l,A=NS(r,35633,E),R=NS(r,35632,b);if(r.attachShader(y,A),r.attachShader(y,R),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const V=r.getProgramInfoLog(y).trim(),U=r.getShaderInfoLog(A).trim(),C=r.getShaderInfoLog(R).trim();let k=!0,ee=!0;if(r.getProgramParameter(y,35714)===!1){k=!1;const W=zS(r,A,"vertex"),K=zS(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+`

Program Info Log: `+V+`
`+W+`
`+K)}else V!==""?console.warn("THREE.WebGLProgram: Program Info Log:",V):(U===""||C==="")&&(ee=!1);ee&&(this.diagnostics={runnable:k,programLog:V,vertexShader:{log:U,prefix:w},fragmentShader:{log:C,prefix:S}})}r.deleteShader(A),r.deleteShader(R);let P;this.getUniforms=function(){return P===void 0&&(P=new vo(r,y)),P};let D;return this.getAttributes=function(){return D===void 0&&(D=rN(r,y)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=J4++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=A,this.fragmentShader=R,this}let gN=0;class vN{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new yN(e);t.set(e,i)}return t.get(e)}}class yN{constructor(e){this.id=gN++,this.code=e,this.usedTimes=0}}function xN(n,e,t,i,r,s,o){const l=new Ma,c=new vN,f=[],d=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.floatVertexTextures,g=r.maxVertexUniforms,x=r.vertexTextures;let y=r.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(C){const ee=C.skeleton.bones;if(m)return 1024;{const K=Math.floor((g-20)/4),X=Math.min(K,ee.length);return X<ee.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ee.length+" bones. This GPU supports "+X+"."),0):X}}function _(C,k,ee,W,K){const X=W.fog,$=K.geometry,O=C.isMeshStandardMaterial?W.environment:null,q=(C.isMeshStandardMaterial?t:e).get(C.envMap||O),Q=!!q&&q.mapping===bu?q.image.height:null,oe=w[C.type],de=K.isSkinnedMesh?S(K):0;C.precision!==null&&(y=r.getMaxPrecision(C.precision),y!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",y,"instead."));const ve=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,Ye=ve!==void 0?ve.length:0;let Ue=0;$.morphAttributes.position!==void 0&&(Ue=1),$.morphAttributes.normal!==void 0&&(Ue=2),$.morphAttributes.color!==void 0&&(Ue=3);let ae,at,et,Je;if(oe){const ye=wr[oe];ae=ye.vertexShader,at=ye.fragmentShader}else ae=C.vertexShader,at=C.fragmentShader,c.update(C),et=c.getVertexShaderID(C),Je=c.getFragmentShaderID(C);const we=n.getRenderTarget(),Ze=C.alphaTest>0,ce=C.clearcoat>0;return{isWebGL2:d,shaderID:oe,shaderName:C.type,vertexShader:ae,fragmentShader:at,defines:C.defines,customVertexShaderID:et,customFragmentShaderID:Je,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:y,instancing:K.isInstancedMesh===!0,instancingColor:K.isInstancedMesh===!0&&K.instanceColor!==null,supportsVertexTextures:x,outputEncoding:we===null?n.outputEncoding:we.isXRRenderTarget===!0?we.texture.encoding:Tr,map:!!C.map,matcap:!!C.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:Q,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===X2,tangentSpaceNormalMap:C.normalMapType===Ba,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===dt,clearcoat:ce,clearcoatMap:ce&&!!C.clearcoatMap,clearcoatRoughnessMap:ce&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:ce&&!!C.clearcoatNormalMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===_a,alphaMap:!!C.alphaMap,alphaTest:Ze,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!$.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatNormalMap||C.transmission>0||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||C.sheen>0||!!C.sheenColorMap||!!C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!X,useFog:C.fog,fogExp2:X&&X.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:p,skinning:K.isSkinnedMesh===!0&&de>0,maxBones:de,useVertexTexture:m,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:Ye,morphTextureStride:Ue,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&ee.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:Er,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Sr,flipSided:C.side===Nn,depthPacking:C.depthPacking!==void 0?C.depthPacking:!1,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function E(C){const k=[];if(C.shaderID?k.push(C.shaderID):(k.push(C.customVertexShaderID),k.push(C.customFragmentShaderID)),C.defines!==void 0)for(const ee in C.defines)k.push(ee),k.push(C.defines[ee]);return C.isRawShaderMaterial===!1&&(b(k,C),A(k,C),k.push(n.outputEncoding)),k.push(C.customProgramCacheKey),k.join()}function b(C,k){C.push(k.precision),C.push(k.outputEncoding),C.push(k.envMapMode),C.push(k.envMapCubeUVHeight),C.push(k.combine),C.push(k.vertexUvs),C.push(k.fogExp2),C.push(k.sizeAttenuation),C.push(k.maxBones),C.push(k.morphTargetsCount),C.push(k.morphAttributeCount),C.push(k.numDirLights),C.push(k.numPointLights),C.push(k.numSpotLights),C.push(k.numHemiLights),C.push(k.numRectAreaLights),C.push(k.numDirLightShadows),C.push(k.numPointLightShadows),C.push(k.numSpotLightShadows),C.push(k.shadowMapType),C.push(k.toneMapping),C.push(k.numClippingPlanes),C.push(k.numClipIntersection)}function A(C,k){l.disableAll(),k.isWebGL2&&l.enable(0),k.supportsVertexTextures&&l.enable(1),k.instancing&&l.enable(2),k.instancingColor&&l.enable(3),k.map&&l.enable(4),k.matcap&&l.enable(5),k.envMap&&l.enable(6),k.lightMap&&l.enable(7),k.aoMap&&l.enable(8),k.emissiveMap&&l.enable(9),k.bumpMap&&l.enable(10),k.normalMap&&l.enable(11),k.objectSpaceNormalMap&&l.enable(12),k.tangentSpaceNormalMap&&l.enable(13),k.clearcoat&&l.enable(14),k.clearcoatMap&&l.enable(15),k.clearcoatRoughnessMap&&l.enable(16),k.clearcoatNormalMap&&l.enable(17),k.displacementMap&&l.enable(18),k.specularMap&&l.enable(19),k.roughnessMap&&l.enable(20),k.metalnessMap&&l.enable(21),k.gradientMap&&l.enable(22),k.alphaMap&&l.enable(23),k.alphaTest&&l.enable(24),k.vertexColors&&l.enable(25),k.vertexAlphas&&l.enable(26),k.vertexUvs&&l.enable(27),k.vertexTangents&&l.enable(28),k.uvsVertexOnly&&l.enable(29),k.fog&&l.enable(30),C.push(l.mask),l.disableAll(),k.useFog&&l.enable(0),k.flatShading&&l.enable(1),k.logarithmicDepthBuffer&&l.enable(2),k.skinning&&l.enable(3),k.useVertexTexture&&l.enable(4),k.morphTargets&&l.enable(5),k.morphNormals&&l.enable(6),k.morphColors&&l.enable(7),k.premultipliedAlpha&&l.enable(8),k.shadowMapEnabled&&l.enable(9),k.physicallyCorrectLights&&l.enable(10),k.doubleSided&&l.enable(11),k.flipSided&&l.enable(12),k.depthPacking&&l.enable(13),k.dithering&&l.enable(14),k.specularIntensityMap&&l.enable(15),k.specularColorMap&&l.enable(16),k.transmission&&l.enable(17),k.transmissionMap&&l.enable(18),k.thicknessMap&&l.enable(19),k.sheen&&l.enable(20),k.sheenColorMap&&l.enable(21),k.sheenRoughnessMap&&l.enable(22),k.decodeVideoTexture&&l.enable(23),k.opaque&&l.enable(24),C.push(l.mask)}function R(C){const k=w[C.type];let ee;if(k){const W=wr[k];ee=l3.clone(W.uniforms)}else ee=C.uniforms;return ee}function P(C,k){let ee;for(let W=0,K=f.length;W<K;W++){const X=f[W];if(X.cacheKey===k){ee=X,++ee.usedTimes;break}}return ee===void 0&&(ee=new mN(n,k,C,s),f.push(ee)),ee}function D(C){if(--C.usedTimes===0){const k=f.indexOf(C);f[k]=f[f.length-1],f.pop(),C.destroy()}}function V(C){c.remove(C)}function U(){c.dispose()}return{getParameters:_,getProgramCacheKey:E,getUniforms:R,acquireProgram:P,releaseProgram:D,releaseShaderCache:V,programs:f,dispose:U}}function _N(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,l){n.get(s)[o]=l}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function wN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function US(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function HS(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,g,x,y,w){let S=n[e];return S===void 0?(S={id:p.id,object:p,geometry:m,material:g,groupOrder:x,renderOrder:p.renderOrder,z:y,group:w},n[e]=S):(S.id=p.id,S.object=p,S.geometry=m,S.material=g,S.groupOrder=x,S.renderOrder=p.renderOrder,S.z=y,S.group=w),e++,S}function l(p,m,g,x,y,w){const S=o(p,m,g,x,y,w);g.transmission>0?i.push(S):g.transparent===!0?r.push(S):t.push(S)}function c(p,m,g,x,y,w){const S=o(p,m,g,x,y,w);g.transmission>0?i.unshift(S):g.transparent===!0?r.unshift(S):t.unshift(S)}function f(p,m){t.length>1&&t.sort(p||wN),i.length>1&&i.sort(m||US),r.length>1&&r.sort(m||US)}function d(){for(let p=e,m=n.length;p<m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:c,finish:d,sort:f}}function SN(){let n=new WeakMap;function e(i,r){let s;return n.has(i)===!1?(s=new HS,n.set(i,[s])):r>=n.get(i).length?(s=new HS,n.get(i).push(s)):s=n.get(i)[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function MN(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new L,color:new Te};break;case"SpotLight":t={position:new L,direction:new L,color:new Te,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new L,color:new Te,distance:0,decay:0};break;case"HemisphereLight":t={direction:new L,skyColor:new Te,groundColor:new Te};break;case"RectAreaLight":t={color:new Te,position:new L,halfWidth:new L,halfHeight:new L};break}return n[e.id]=t,t}}}function EN(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let TN=0;function bN(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function AN(n,e){const t=new MN,i=EN(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let d=0;d<9;d++)r.probe.push(new L);const s=new L,o=new ke,l=new ke;function c(d,p){let m=0,g=0,x=0;for(let V=0;V<9;V++)r.probe[V].set(0,0,0);let y=0,w=0,S=0,_=0,E=0,b=0,A=0,R=0;d.sort(bN);const P=p!==!0?Math.PI:1;for(let V=0,U=d.length;V<U;V++){const C=d[V],k=C.color,ee=C.intensity,W=C.distance,K=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)m+=k.r*ee*P,g+=k.g*ee*P,x+=k.b*ee*P;else if(C.isLightProbe)for(let X=0;X<9;X++)r.probe[X].addScaledVector(C.sh.coefficients[X],ee);else if(C.isDirectionalLight){const X=t.get(C);if(X.color.copy(C.color).multiplyScalar(C.intensity*P),C.castShadow){const $=C.shadow,O=i.get(C);O.shadowBias=$.bias,O.shadowNormalBias=$.normalBias,O.shadowRadius=$.radius,O.shadowMapSize=$.mapSize,r.directionalShadow[y]=O,r.directionalShadowMap[y]=K,r.directionalShadowMatrix[y]=C.shadow.matrix,b++}r.directional[y]=X,y++}else if(C.isSpotLight){const X=t.get(C);if(X.position.setFromMatrixPosition(C.matrixWorld),X.color.copy(k).multiplyScalar(ee*P),X.distance=W,X.coneCos=Math.cos(C.angle),X.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),X.decay=C.decay,C.castShadow){const $=C.shadow,O=i.get(C);O.shadowBias=$.bias,O.shadowNormalBias=$.normalBias,O.shadowRadius=$.radius,O.shadowMapSize=$.mapSize,r.spotShadow[S]=O,r.spotShadowMap[S]=K,r.spotShadowMatrix[S]=C.shadow.matrix,R++}r.spot[S]=X,S++}else if(C.isRectAreaLight){const X=t.get(C);X.color.copy(k).multiplyScalar(ee),X.halfWidth.set(C.width*.5,0,0),X.halfHeight.set(0,C.height*.5,0),r.rectArea[_]=X,_++}else if(C.isPointLight){const X=t.get(C);if(X.color.copy(C.color).multiplyScalar(C.intensity*P),X.distance=C.distance,X.decay=C.decay,C.castShadow){const $=C.shadow,O=i.get(C);O.shadowBias=$.bias,O.shadowNormalBias=$.normalBias,O.shadowRadius=$.radius,O.shadowMapSize=$.mapSize,O.shadowCameraNear=$.camera.near,O.shadowCameraFar=$.camera.far,r.pointShadow[w]=O,r.pointShadowMap[w]=K,r.pointShadowMatrix[w]=C.shadow.matrix,A++}r.point[w]=X,w++}else if(C.isHemisphereLight){const X=t.get(C);X.skyColor.copy(C.color).multiplyScalar(ee*P),X.groundColor.copy(C.groundColor).multiplyScalar(ee*P),r.hemi[E]=X,E++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ee.LTC_FLOAT_1,r.rectAreaLTC2=Ee.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ee.LTC_HALF_1,r.rectAreaLTC2=Ee.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=m,r.ambient[1]=g,r.ambient[2]=x;const D=r.hash;(D.directionalLength!==y||D.pointLength!==w||D.spotLength!==S||D.rectAreaLength!==_||D.hemiLength!==E||D.numDirectionalShadows!==b||D.numPointShadows!==A||D.numSpotShadows!==R)&&(r.directional.length=y,r.spot.length=S,r.rectArea.length=_,r.point.length=w,r.hemi.length=E,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=R,r.spotShadowMap.length=R,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=A,r.spotShadowMatrix.length=R,D.directionalLength=y,D.pointLength=w,D.spotLength=S,D.rectAreaLength=_,D.hemiLength=E,D.numDirectionalShadows=b,D.numPointShadows=A,D.numSpotShadows=R,r.version=TN++)}function f(d,p){let m=0,g=0,x=0,y=0,w=0;const S=p.matrixWorldInverse;for(let _=0,E=d.length;_<E;_++){const b=d[_];if(b.isDirectionalLight){const A=r.directional[m];A.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(S),m++}else if(b.isSpotLight){const A=r.spot[x];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(S),A.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),A.direction.sub(s),A.direction.transformDirection(S),x++}else if(b.isRectAreaLight){const A=r.rectArea[y];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(S),l.identity(),o.copy(b.matrixWorld),o.premultiply(S),l.extractRotation(o),A.halfWidth.set(b.width*.5,0,0),A.halfHeight.set(0,b.height*.5,0),A.halfWidth.applyMatrix4(l),A.halfHeight.applyMatrix4(l),y++}else if(b.isPointLight){const A=r.point[g];A.position.setFromMatrixPosition(b.matrixWorld),A.position.applyMatrix4(S),g++}else if(b.isHemisphereLight){const A=r.hemi[w];A.direction.setFromMatrixPosition(b.matrixWorld),A.direction.transformDirection(S),A.direction.normalize(),w++}}}return{setup:c,setupView:f,state:r}}function GS(n,e){const t=new AN(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(p){i.push(p)}function l(p){r.push(p)}function c(p){t.setup(i,p)}function f(p){t.setupView(i,p)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:c,setupLightsView:f,pushLight:o,pushShadow:l}}function CN(n,e){let t=new WeakMap;function i(s,o=0){let l;return t.has(s)===!1?(l=new GS(n,e),t.set(s,[l])):o>=t.get(s).length?(l=new GS(n,e),t.get(s).push(l)):l=t.get(s)[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class am extends pn{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Do,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}am.prototype.isMeshDepthMaterial=!0;class lm extends pn{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new L,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}lm.prototype.isMeshDistanceMaterial=!0;const RN=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,PN=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function v3(n,e,t){let i=new Tf;const r=new ne,s=new ne,o=new Nt,l=new am({depthPacking:q2}),c=new lm,f={},d=t.maxTextureSize,p={0:Nn,1:wo,2:Sr},m=new Pn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ne},radius:{value:4}},vertexShader:RN,fragmentShader:PN}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const x=new Qe;x.setAttribute("position",new mt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new dn(x,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wx,this.render=function(b,A,R){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||b.length===0)return;const P=n.getRenderTarget(),D=n.getActiveCubeFace(),V=n.getActiveMipmapLevel(),U=n.state;U.setBlending(ni),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);for(let C=0,k=b.length;C<k;C++){const ee=b[C],W=ee.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);const K=W.getFrameExtents();if(r.multiply(K),s.copy(W.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/K.x),r.x=s.x*K.x,W.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/K.y),r.y=s.y*K.y,W.mapSize.y=s.y)),W.map===null&&!W.isPointLightShadow&&this.type===Ol&&(W.map=new Xt(r.x,r.y),W.map.texture.name=ee.name+".shadowMap",W.mapPass=new Xt(r.x,r.y),W.camera.updateProjectionMatrix()),W.map===null){const $={minFilter:Ut,magFilter:Ut,format:Di};W.map=new Xt(r.x,r.y,$),W.map.texture.name=ee.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();const X=W.getViewportCount();for(let $=0;$<X;$++){const O=W.getViewport($);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),U.viewport(o),W.updateMatrices(ee,$),i=W.getFrustum(),E(A,R,W.camera,ee,this.type)}!W.isPointLightShadow&&this.type===Ol&&S(W,R),W.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(P,D,V)};function S(b,A){const R=e.update(y);m.defines.VSM_SAMPLES!==b.blurSamples&&(m.defines.VSM_SAMPLES=b.blurSamples,g.defines.VSM_SAMPLES=b.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),m.uniforms.shadow_pass.value=b.map.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(A,null,R,m,y,null),g.uniforms.shadow_pass.value=b.mapPass.texture,g.uniforms.resolution.value=b.mapSize,g.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(A,null,R,g,y,null)}function _(b,A,R,P,D,V){let U=null;const C=R.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(C!==void 0?U=C:U=R.isPointLight===!0?c:l,n.localClippingEnabled&&A.clipShadows===!0&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){const k=U.uuid,ee=A.uuid;let W=f[k];W===void 0&&(W={},f[k]=W);let K=W[ee];K===void 0&&(K=U.clone(),W[ee]=K),U=K}return U.visible=A.visible,U.wireframe=A.wireframe,V===Ol?U.side=A.shadowSide!==null?A.shadowSide:A.side:U.side=A.shadowSide!==null?A.shadowSide:p[A.side],U.alphaMap=A.alphaMap,U.alphaTest=A.alphaTest,U.clipShadows=A.clipShadows,U.clippingPlanes=A.clippingPlanes,U.clipIntersection=A.clipIntersection,U.displacementMap=A.displacementMap,U.displacementScale=A.displacementScale,U.displacementBias=A.displacementBias,U.wireframeLinewidth=A.wireframeLinewidth,U.linewidth=A.linewidth,R.isPointLight===!0&&U.isMeshDistanceMaterial===!0&&(U.referencePosition.setFromMatrixPosition(R.matrixWorld),U.nearDistance=P,U.farDistance=D),U}function E(b,A,R,P,D){if(b.visible===!1)return;if(b.layers.test(A.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&D===Ol)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,b.matrixWorld);const C=e.update(b),k=b.material;if(Array.isArray(k)){const ee=C.groups;for(let W=0,K=ee.length;W<K;W++){const X=ee[W],$=k[X.materialIndex];if($&&$.visible){const O=_(b,$,P,R.near,R.far,D);n.renderBufferDirect(R,null,C,O,b,X)}}}else if(k.visible){const ee=_(b,k,P,R.near,R.far,D);n.renderBufferDirect(R,null,C,ee,b,null)}}const U=b.children;for(let C=0,k=U.length;C<k;C++)E(U[C],A,R,P,D)}}function LN(n,e,t){const i=t.isWebGL2;function r(){let N=!1;const fe=new Nt;let he=null;const Ie=new Nt(0,0,0,0);return{setMask:function(Me){he!==Me&&!N&&(n.colorMask(Me,Me,Me,Me),he=Me)},setLocked:function(Me){N=Me},setClear:function(Me,qe,Se,Ve,gt){gt===!0&&(Me*=Ve,qe*=Ve,Se*=Ve),fe.set(Me,qe,Se,Ve),Ie.equals(fe)===!1&&(n.clearColor(Me,qe,Se,Ve),Ie.copy(fe))},reset:function(){N=!1,he=null,Ie.set(-1,0,0,0)}}}function s(){let N=!1,fe=null,he=null,Ie=null;return{setTest:function(Me){Me?Ue(2929):ae(2929)},setMask:function(Me){fe!==Me&&!N&&(n.depthMask(Me),fe=Me)},setFunc:function(Me){if(he!==Me){if(Me)switch(Me){case p2:n.depthFunc(512);break;case m2:n.depthFunc(519);break;case g2:n.depthFunc(513);break;case Rp:n.depthFunc(515);break;case v2:n.depthFunc(514);break;case y2:n.depthFunc(518);break;case x2:n.depthFunc(516);break;case _2:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);he=Me}},setLocked:function(Me){N=Me},setClear:function(Me){Ie!==Me&&(n.clearDepth(Me),Ie=Me)},reset:function(){N=!1,fe=null,he=null,Ie=null}}}function o(){let N=!1,fe=null,he=null,Ie=null,Me=null,qe=null,Se=null,Ve=null,gt=null;return{setTest:function(yt){N||(yt?Ue(2960):ae(2960))},setMask:function(yt){fe!==yt&&!N&&(n.stencilMask(yt),fe=yt)},setFunc:function(yt,Ui,Si){(he!==yt||Ie!==Ui||Me!==Si)&&(n.stencilFunc(yt,Ui,Si),he=yt,Ie=Ui,Me=Si)},setOp:function(yt,Ui,Si){(qe!==yt||Se!==Ui||Ve!==Si)&&(n.stencilOp(yt,Ui,Si),qe=yt,Se=Ui,Ve=Si)},setLocked:function(yt){N=yt},setClear:function(yt){gt!==yt&&(n.clearStencil(yt),gt=yt)},reset:function(){N=!1,fe=null,he=null,Ie=null,Me=null,qe=null,Se=null,Ve=null,gt=null}}}const l=new r,c=new s,f=new o;let d={},p={},m=new WeakMap,g=[],x=null,y=!1,w=null,S=null,_=null,E=null,b=null,A=null,R=null,P=!1,D=null,V=null,U=null,C=null,k=null;const ee=n.getParameter(35661);let W=!1,K=0;const X=n.getParameter(7938);X.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(X)[1]),W=K>=1):X.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),W=K>=2);let $=null,O={};const q=n.getParameter(3088),Q=n.getParameter(2978),oe=new Nt().fromArray(q),de=new Nt().fromArray(Q);function ve(N,fe,he){const Ie=new Uint8Array(4),Me=n.createTexture();n.bindTexture(N,Me),n.texParameteri(N,10241,9728),n.texParameteri(N,10240,9728);for(let qe=0;qe<he;qe++)n.texImage2D(fe+qe,0,6408,1,1,0,6408,5121,Ie);return Me}const Ye={};Ye[3553]=ve(3553,3553,1),Ye[34067]=ve(34067,34069,6),l.setClear(0,0,0,1),c.setClear(1),f.setClear(0),Ue(2929),c.setFunc(Rp),ye(!1),ze(Hv),Ue(2884),ce(ni);function Ue(N){d[N]!==!0&&(n.enable(N),d[N]=!0)}function ae(N){d[N]!==!1&&(n.disable(N),d[N]=!1)}function at(N,fe){return p[N]!==fe?(n.bindFramebuffer(N,fe),p[N]=fe,i&&(N===36009&&(p[36160]=fe),N===36160&&(p[36009]=fe)),!0):!1}function et(N,fe){let he=g,Ie=!1;if(N)if(he=m.get(fe),he===void 0&&(he=[],m.set(fe,he)),N.isWebGLMultipleRenderTargets){const Me=N.texture;if(he.length!==Me.length||he[0]!==36064){for(let qe=0,Se=Me.length;qe<Se;qe++)he[qe]=36064+qe;he.length=Me.length,Ie=!0}}else he[0]!==36064&&(he[0]=36064,Ie=!0);else he[0]!==1029&&(he[0]=1029,Ie=!0);Ie&&(t.isWebGL2?n.drawBuffers(he):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(he))}function Je(N){return x!==N?(n.useProgram(N),x=N,!0):!1}const we={[la]:32774,[i2]:32778,[r2]:32779};if(i)we[jv]=32775,we[qv]=32776;else{const N=e.get("EXT_blend_minmax");N!==null&&(we[jv]=N.MIN_EXT,we[qv]=N.MAX_EXT)}const Ze={[s2]:0,[o2]:1,[a2]:768,[Ex]:770,[h2]:776,[f2]:774,[u2]:772,[l2]:769,[Tx]:771,[d2]:775,[c2]:773};function ce(N,fe,he,Ie,Me,qe,Se,Ve){if(N===ni){y===!0&&(ae(3042),y=!1);return}if(y===!1&&(Ue(3042),y=!0),N!==n2){if(N!==w||Ve!==P){if((S!==la||b!==la)&&(n.blendEquation(32774),S=la,b=la),Ve)switch(N){case _a:n.blendFuncSeparate(1,771,1,771);break;case Gv:n.blendFunc(1,1);break;case Vv:n.blendFuncSeparate(0,769,0,1);break;case Wv:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}else switch(N){case _a:n.blendFuncSeparate(770,771,1,771);break;case Gv:n.blendFunc(770,1);break;case Vv:n.blendFuncSeparate(0,769,0,1);break;case Wv:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}_=null,E=null,A=null,R=null,w=N,P=Ve}return}Me=Me||fe,qe=qe||he,Se=Se||Ie,(fe!==S||Me!==b)&&(n.blendEquationSeparate(we[fe],we[Me]),S=fe,b=Me),(he!==_||Ie!==E||qe!==A||Se!==R)&&(n.blendFuncSeparate(Ze[he],Ze[Ie],Ze[qe],Ze[Se]),_=he,E=Ie,A=qe,R=Se),w=N,P=null}function le(N,fe){N.side===Sr?ae(2884):Ue(2884);let he=N.side===Nn;fe&&(he=!he),ye(he),N.blending===_a&&N.transparent===!1?ce(ni):ce(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.premultipliedAlpha),c.setFunc(N.depthFunc),c.setTest(N.depthTest),c.setMask(N.depthWrite),l.setMask(N.colorWrite);const Ie=N.stencilWrite;f.setTest(Ie),Ie&&(f.setMask(N.stencilWriteMask),f.setFunc(N.stencilFunc,N.stencilRef,N.stencilFuncMask),f.setOp(N.stencilFail,N.stencilZFail,N.stencilZPass)),$e(N.polygonOffset,N.polygonOffsetFactor,N.polygonOffsetUnits),N.alphaToCoverage===!0?Ue(32926):ae(32926)}function ye(N){D!==N&&(N?n.frontFace(2304):n.frontFace(2305),D=N)}function ze(N){N!==e2?(Ue(2884),N!==V&&(N===Hv?n.cullFace(1029):N===t2?n.cullFace(1028):n.cullFace(1032))):ae(2884),V=N}function Re(N){N!==U&&(W&&n.lineWidth(N),U=N)}function $e(N,fe,he){N?(Ue(32823),(C!==fe||k!==he)&&(n.polygonOffset(fe,he),C=fe,k=he)):ae(32823)}function We(N){N?Ue(3089):ae(3089)}function Ge(N){N===void 0&&(N=33984+ee-1),$!==N&&(n.activeTexture(N),$=N)}function Tt(N,fe){$===null&&Ge();let he=O[$];he===void 0&&(he={type:void 0,texture:void 0},O[$]=he),(he.type!==N||he.texture!==fe)&&(n.bindTexture(N,fe||Ye[N]),he.type=N,he.texture=fe)}function Lt(){const N=O[$];N!==void 0&&N.type!==void 0&&(n.bindTexture(N.type,null),N.type=void 0,N.texture=void 0)}function B(){try{n.compressedTexImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function I(){try{n.texSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ie(){try{n.texSubImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function me(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function be(){try{n.texStorage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function De(){try{n.texStorage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function je(){try{n.texImage2D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ue(){try{n.texImage3D.apply(n,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function tt(N){oe.equals(N)===!1&&(n.scissor(N.x,N.y,N.z,N.w),oe.copy(N))}function nt(N){de.equals(N)===!1&&(n.viewport(N.x,N.y,N.z,N.w),de.copy(N))}function H(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},$=null,O={},p={},m=new WeakMap,g=[],x=null,y=!1,w=null,S=null,_=null,E=null,b=null,A=null,R=null,P=!1,D=null,V=null,U=null,C=null,k=null,oe.set(0,0,n.canvas.width,n.canvas.height),de.set(0,0,n.canvas.width,n.canvas.height),l.reset(),c.reset(),f.reset()}return{buffers:{color:l,depth:c,stencil:f},enable:Ue,disable:ae,bindFramebuffer:at,drawBuffers:et,useProgram:Je,setBlending:ce,setMaterial:le,setFlipSided:ye,setCullFace:ze,setLineWidth:Re,setPolygonOffset:$e,setScissorTest:We,activeTexture:Ge,bindTexture:Tt,unbindTexture:Lt,compressedTexImage2D:B,texImage2D:je,texImage3D:ue,texStorage2D:be,texStorage3D:De,texSubImage2D:I,texSubImage3D:ie,compressedTexSubImage2D:me,scissor:tt,viewport:nt,reset:H}}function DN(n,e,t,i,r,s,o){const l=r.isWebGL2,c=r.maxTextures,f=r.maxCubemapSize,d=r.maxTextureSize,p=r.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let y;const w=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(B,I){return S?new OffscreenCanvas(B,I):cf("canvas")}function E(B,I,ie,me){let be=1;if((B.width>me||B.height>me)&&(be=me/Math.max(B.width,B.height)),be<1||I===!0)if(typeof HTMLImageElement!="undefined"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&B instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&B instanceof ImageBitmap){const De=I?Ip:Math.floor,je=De(be*B.width),ue=De(be*B.height);y===void 0&&(y=_(je,ue));const tt=ie?_(je,ue):y;return tt.width=je,tt.height=ue,tt.getContext("2d").drawImage(B,0,0,je,ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+B.width+"x"+B.height+") to ("+je+"x"+ue+")."),tt}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+B.width+"x"+B.height+")."),B;return B}function b(B){return my(B.width)&&my(B.height)}function A(B){return l?!1:B.wrapS!==$n||B.wrapT!==$n||B.minFilter!==Ut&&B.minFilter!==Pt}function R(B,I){return B.generateMipmaps&&I&&B.minFilter!==Ut&&B.minFilter!==Pt}function P(B){n.generateMipmap(B)}function D(B,I,ie,me,be=!1){if(l===!1)return I;if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let De=I;return I===6403&&(ie===5126&&(De=33326),ie===5131&&(De=33325),ie===5121&&(De=33321)),I===33319&&(ie===5126&&(De=33328),ie===5131&&(De=33327),ie===5121&&(De=33323)),I===6408&&(ie===5126&&(De=34836),ie===5131&&(De=34842),ie===5121&&(De=me===dt&&be===!1?35907:32856),ie===32819&&(De=32854),ie===32820&&(De=32855)),(De===33325||De===33326||De===33327||De===33328||De===34842||De===34836)&&e.get("EXT_color_buffer_float"),De}function V(B,I,ie){return R(B,ie)===!0||B.isFramebufferTexture&&B.minFilter!==Ut&&B.minFilter!==Pt?Math.log2(Math.max(I.width,I.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?I.mipmaps.length:1}function U(B){return B===Ut||B===Pp||B===Lp?9728:9729}function C(B){const I=B.target;I.removeEventListener("dispose",C),ee(I),I.isVideoTexture&&x.delete(I)}function k(B){const I=B.target;I.removeEventListener("dispose",k),K(I)}function ee(B){const I=i.get(B);if(I.__webglInit===void 0)return;const ie=B.source,me=w.get(ie);if(me){const be=me[I.__cacheKey];be.usedTimes--,be.usedTimes===0&&W(B),Object.keys(me).length===0&&w.delete(ie)}i.remove(B)}function W(B){const I=i.get(B);n.deleteTexture(I.__webglTexture);const ie=B.source,me=w.get(ie);delete me[I.__cacheKey],o.memory.textures--}function K(B){const I=B.texture,ie=i.get(B),me=i.get(I);if(me.__webglTexture!==void 0&&(n.deleteTexture(me.__webglTexture),o.memory.textures--),B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let be=0;be<6;be++)n.deleteFramebuffer(ie.__webglFramebuffer[be]),ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer[be]);else n.deleteFramebuffer(ie.__webglFramebuffer),ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer&&n.deleteRenderbuffer(ie.__webglColorRenderbuffer),ie.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ie.__webglDepthRenderbuffer);if(B.isWebGLMultipleRenderTargets)for(let be=0,De=I.length;be<De;be++){const je=i.get(I[be]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),o.memory.textures--),i.remove(I[be])}i.remove(I),i.remove(B)}let X=0;function $(){X=0}function O(){const B=X;return B>=c&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+c),X+=1,B}function q(B){const I=[];return I.push(B.wrapS),I.push(B.wrapT),I.push(B.magFilter),I.push(B.minFilter),I.push(B.anisotropy),I.push(B.internalFormat),I.push(B.format),I.push(B.type),I.push(B.generateMipmaps),I.push(B.premultiplyAlpha),I.push(B.flipY),I.push(B.unpackAlignment),I.push(B.encoding),I.join()}function Q(B,I){const ie=i.get(B);if(B.isVideoTexture&&Tt(B),B.isRenderTargetTexture===!1&&B.version>0&&ie.__version!==B.version){const me=B.image;if(me===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(me.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{et(ie,B,I);return}}t.activeTexture(33984+I),t.bindTexture(3553,ie.__webglTexture)}function oe(B,I){const ie=i.get(B);if(B.version>0&&ie.__version!==B.version){et(ie,B,I);return}t.activeTexture(33984+I),t.bindTexture(35866,ie.__webglTexture)}function de(B,I){const ie=i.get(B);if(B.version>0&&ie.__version!==B.version){et(ie,B,I);return}t.activeTexture(33984+I),t.bindTexture(32879,ie.__webglTexture)}function ve(B,I){const ie=i.get(B);if(B.version>0&&ie.__version!==B.version){Je(ie,B,I);return}t.activeTexture(33984+I),t.bindTexture(34067,ie.__webglTexture)}const Ye={[rf]:10497,[$n]:33071,[sf]:33648},Ue={[Ut]:9728,[Pp]:9984,[Lp]:9986,[Pt]:9729,[Ax]:9985,[Lo]:9987};function ae(B,I,ie){if(ie?(n.texParameteri(B,10242,Ye[I.wrapS]),n.texParameteri(B,10243,Ye[I.wrapT]),(B===32879||B===35866)&&n.texParameteri(B,32882,Ye[I.wrapR]),n.texParameteri(B,10240,Ue[I.magFilter]),n.texParameteri(B,10241,Ue[I.minFilter])):(n.texParameteri(B,10242,33071),n.texParameteri(B,10243,33071),(B===32879||B===35866)&&n.texParameteri(B,32882,33071),(I.wrapS!==$n||I.wrapT!==$n)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(B,10240,U(I.magFilter)),n.texParameteri(B,10241,U(I.minFilter)),I.minFilter!==Ut&&I.minFilter!==Pt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const me=e.get("EXT_texture_filter_anisotropic");if(I.type===Hr&&e.has("OES_texture_float_linear")===!1||l===!1&&I.type===po&&e.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(B,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function at(B,I){let ie=!1;B.__webglInit===void 0&&(B.__webglInit=!0,I.addEventListener("dispose",C));const me=I.source;let be=w.get(me);be===void 0&&(be={},w.set(me,be));const De=q(I);if(De!==B.__cacheKey){be[De]===void 0&&(be[De]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),be[De].usedTimes++;const je=be[B.__cacheKey];je!==void 0&&(be[B.__cacheKey].usedTimes--,je.usedTimes===0&&W(I)),B.__cacheKey=De,B.__webglTexture=be[De].texture}return ie}function et(B,I,ie){let me=3553;I.isDataArrayTexture&&(me=35866),I.isData3DTexture&&(me=32879);const be=at(B,I),De=I.source;if(t.activeTexture(33984+ie),t.bindTexture(me,B.__webglTexture),De.version!==De.__currentVersion||be===!0){n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const je=A(I)&&b(I.image)===!1;let ue=E(I.image,je,!1,d);ue=Lt(I,ue);const tt=b(ue)||l,nt=s.convert(I.format,I.encoding);let H=s.convert(I.type),N=D(I.internalFormat,nt,H,I.encoding,I.isVideoTexture);ae(me,I,tt);let fe;const he=I.mipmaps,Ie=l&&I.isVideoTexture!==!0,Me=B.__version===void 0,qe=V(I,ue,tt);if(I.isDepthTexture)N=6402,l?I.type===Hr?N=36012:I.type===Zl?N=33190:I.type===mo?N=35056:N=33189:I.type===Hr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===go&&N===6402&&I.type!==su&&I.type!==Zl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=su,H=s.convert(I.type)),I.format===Eo&&N===6402&&(N=34041,I.type!==mo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=mo,H=s.convert(I.type))),Ie&&Me?t.texStorage2D(3553,1,N,ue.width,ue.height):t.texImage2D(3553,0,N,ue.width,ue.height,0,nt,H,null);else if(I.isDataTexture)if(he.length>0&&tt){Ie&&Me&&t.texStorage2D(3553,qe,N,he[0].width,he[0].height);for(let Se=0,Ve=he.length;Se<Ve;Se++)fe=he[Se],Ie?t.texSubImage2D(3553,Se,0,0,fe.width,fe.height,nt,H,fe.data):t.texImage2D(3553,Se,N,fe.width,fe.height,0,nt,H,fe.data);I.generateMipmaps=!1}else Ie?(Me&&t.texStorage2D(3553,qe,N,ue.width,ue.height),t.texSubImage2D(3553,0,0,0,ue.width,ue.height,nt,H,ue.data)):t.texImage2D(3553,0,N,ue.width,ue.height,0,nt,H,ue.data);else if(I.isCompressedTexture){Ie&&Me&&t.texStorage2D(3553,qe,N,he[0].width,he[0].height);for(let Se=0,Ve=he.length;Se<Ve;Se++)fe=he[Se],I.format!==Di?nt!==null?Ie?t.compressedTexSubImage2D(3553,Se,0,0,fe.width,fe.height,nt,fe.data):t.compressedTexImage2D(3553,Se,N,fe.width,fe.height,0,fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?t.texSubImage2D(3553,Se,0,0,fe.width,fe.height,nt,H,fe.data):t.texImage2D(3553,Se,N,fe.width,fe.height,0,nt,H,fe.data)}else if(I.isDataArrayTexture)Ie?(Me&&t.texStorage3D(35866,qe,N,ue.width,ue.height,ue.depth),t.texSubImage3D(35866,0,0,0,0,ue.width,ue.height,ue.depth,nt,H,ue.data)):t.texImage3D(35866,0,N,ue.width,ue.height,ue.depth,0,nt,H,ue.data);else if(I.isData3DTexture)Ie?(Me&&t.texStorage3D(32879,qe,N,ue.width,ue.height,ue.depth),t.texSubImage3D(32879,0,0,0,0,ue.width,ue.height,ue.depth,nt,H,ue.data)):t.texImage3D(32879,0,N,ue.width,ue.height,ue.depth,0,nt,H,ue.data);else if(I.isFramebufferTexture)Ie&&Me?t.texStorage2D(3553,qe,N,ue.width,ue.height):t.texImage2D(3553,0,N,ue.width,ue.height,0,nt,H,null);else if(he.length>0&&tt){Ie&&Me&&t.texStorage2D(3553,qe,N,he[0].width,he[0].height);for(let Se=0,Ve=he.length;Se<Ve;Se++)fe=he[Se],Ie?t.texSubImage2D(3553,Se,0,0,nt,H,fe):t.texImage2D(3553,Se,N,nt,H,fe);I.generateMipmaps=!1}else Ie?(Me&&t.texStorage2D(3553,qe,N,ue.width,ue.height),t.texSubImage2D(3553,0,0,0,nt,H,ue)):t.texImage2D(3553,0,N,nt,H,ue);R(I,tt)&&P(me),De.__currentVersion=De.version,I.onUpdate&&I.onUpdate(I)}B.__version=I.version}function Je(B,I,ie){if(I.image.length!==6)return;const me=at(B,I),be=I.source;if(t.activeTexture(33984+ie),t.bindTexture(34067,B.__webglTexture),be.version!==be.__currentVersion||me===!0){n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const De=I.isCompressedTexture||I.image[0].isCompressedTexture,je=I.image[0]&&I.image[0].isDataTexture,ue=[];for(let Se=0;Se<6;Se++)!De&&!je?ue[Se]=E(I.image[Se],!1,!0,f):ue[Se]=je?I.image[Se].image:I.image[Se],ue[Se]=Lt(I,ue[Se]);const tt=ue[0],nt=b(tt)||l,H=s.convert(I.format,I.encoding),N=s.convert(I.type),fe=D(I.internalFormat,H,N,I.encoding),he=l&&I.isVideoTexture!==!0,Ie=B.__version===void 0;let Me=V(I,tt,nt);ae(34067,I,nt);let qe;if(De){he&&Ie&&t.texStorage2D(34067,Me,fe,tt.width,tt.height);for(let Se=0;Se<6;Se++){qe=ue[Se].mipmaps;for(let Ve=0;Ve<qe.length;Ve++){const gt=qe[Ve];I.format!==Di?H!==null?he?t.compressedTexSubImage2D(34069+Se,Ve,0,0,gt.width,gt.height,H,gt.data):t.compressedTexImage2D(34069+Se,Ve,fe,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?t.texSubImage2D(34069+Se,Ve,0,0,gt.width,gt.height,H,N,gt.data):t.texImage2D(34069+Se,Ve,fe,gt.width,gt.height,0,H,N,gt.data)}}}else{qe=I.mipmaps,he&&Ie&&(qe.length>0&&Me++,t.texStorage2D(34067,Me,fe,ue[0].width,ue[0].height));for(let Se=0;Se<6;Se++)if(je){he?t.texSubImage2D(34069+Se,0,0,0,ue[Se].width,ue[Se].height,H,N,ue[Se].data):t.texImage2D(34069+Se,0,fe,ue[Se].width,ue[Se].height,0,H,N,ue[Se].data);for(let Ve=0;Ve<qe.length;Ve++){const yt=qe[Ve].image[Se].image;he?t.texSubImage2D(34069+Se,Ve+1,0,0,yt.width,yt.height,H,N,yt.data):t.texImage2D(34069+Se,Ve+1,fe,yt.width,yt.height,0,H,N,yt.data)}}else{he?t.texSubImage2D(34069+Se,0,0,0,H,N,ue[Se]):t.texImage2D(34069+Se,0,fe,H,N,ue[Se]);for(let Ve=0;Ve<qe.length;Ve++){const gt=qe[Ve];he?t.texSubImage2D(34069+Se,Ve+1,0,0,H,N,gt.image[Se]):t.texImage2D(34069+Se,Ve+1,fe,H,N,gt.image[Se])}}}R(I,nt)&&P(34067),be.__currentVersion=be.version,I.onUpdate&&I.onUpdate(I)}B.__version=I.version}function we(B,I,ie,me,be){const De=s.convert(ie.format,ie.encoding),je=s.convert(ie.type),ue=D(ie.internalFormat,De,je,ie.encoding);i.get(I).__hasExternalTextures||(be===32879||be===35866?t.texImage3D(be,0,ue,I.width,I.height,I.depth,0,De,je,null):t.texImage2D(be,0,ue,I.width,I.height,0,De,je,null)),t.bindFramebuffer(36160,B),Ge(I)?m.framebufferTexture2DMultisampleEXT(36160,me,be,i.get(ie).__webglTexture,0,We(I)):n.framebufferTexture2D(36160,me,be,i.get(ie).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ze(B,I,ie){if(n.bindRenderbuffer(36161,B),I.depthBuffer&&!I.stencilBuffer){let me=33189;if(ie||Ge(I)){const be=I.depthTexture;be&&be.isDepthTexture&&(be.type===Hr?me=36012:be.type===Zl&&(me=33190));const De=We(I);Ge(I)?m.renderbufferStorageMultisampleEXT(36161,De,me,I.width,I.height):n.renderbufferStorageMultisample(36161,De,me,I.width,I.height)}else n.renderbufferStorage(36161,me,I.width,I.height);n.framebufferRenderbuffer(36160,36096,36161,B)}else if(I.depthBuffer&&I.stencilBuffer){const me=We(I);ie&&Ge(I)===!1?n.renderbufferStorageMultisample(36161,me,35056,I.width,I.height):Ge(I)?m.renderbufferStorageMultisampleEXT(36161,me,35056,I.width,I.height):n.renderbufferStorage(36161,34041,I.width,I.height),n.framebufferRenderbuffer(36160,33306,36161,B)}else{const me=I.isWebGLMultipleRenderTargets===!0?I.texture[0]:I.texture,be=s.convert(me.format,me.encoding),De=s.convert(me.type),je=D(me.internalFormat,be,De,me.encoding),ue=We(I);ie&&Ge(I)===!1?n.renderbufferStorageMultisample(36161,ue,je,I.width,I.height):Ge(I)?m.renderbufferStorageMultisampleEXT(36161,ue,je,I.width,I.height):n.renderbufferStorage(36161,je,I.width,I.height)}n.bindRenderbuffer(36161,null)}function ce(B,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,B),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),Q(I.depthTexture,0);const me=i.get(I.depthTexture).__webglTexture,be=We(I);if(I.depthTexture.format===go)Ge(I)?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,me,0,be):n.framebufferTexture2D(36160,36096,3553,me,0);else if(I.depthTexture.format===Eo)Ge(I)?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,me,0,be):n.framebufferTexture2D(36160,33306,3553,me,0);else throw new Error("Unknown depthTexture format")}function le(B){const I=i.get(B),ie=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture&&!I.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");ce(I.__webglFramebuffer,B)}else if(ie){I.__webglDepthbuffer=[];for(let me=0;me<6;me++)t.bindFramebuffer(36160,I.__webglFramebuffer[me]),I.__webglDepthbuffer[me]=n.createRenderbuffer(),Ze(I.__webglDepthbuffer[me],B,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),Ze(I.__webglDepthbuffer,B,!1);t.bindFramebuffer(36160,null)}function ye(B,I,ie){const me=i.get(B);I!==void 0&&we(me.__webglFramebuffer,B,B.texture,36064,3553),ie!==void 0&&le(B)}function ze(B){const I=B.texture,ie=i.get(B),me=i.get(I);B.addEventListener("dispose",k),B.isWebGLMultipleRenderTargets!==!0&&(me.__webglTexture===void 0&&(me.__webglTexture=n.createTexture()),me.__version=I.version,o.memory.textures++);const be=B.isWebGLCubeRenderTarget===!0,De=B.isWebGLMultipleRenderTargets===!0,je=b(B)||l;if(be){ie.__webglFramebuffer=[];for(let ue=0;ue<6;ue++)ie.__webglFramebuffer[ue]=n.createFramebuffer()}else if(ie.__webglFramebuffer=n.createFramebuffer(),De)if(r.drawBuffers){const ue=B.texture;for(let tt=0,nt=ue.length;tt<nt;tt++){const H=i.get(ue[tt]);H.__webglTexture===void 0&&(H.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(l&&B.samples>0&&Ge(B)===!1){ie.__webglMultisampledFramebuffer=n.createFramebuffer(),ie.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,ie.__webglColorRenderbuffer);const ue=s.convert(I.format,I.encoding),tt=s.convert(I.type),nt=D(I.internalFormat,ue,tt,I.encoding),H=We(B);n.renderbufferStorageMultisample(36161,H,nt,B.width,B.height),t.bindFramebuffer(36160,ie.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,ie.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),B.depthBuffer&&(ie.__webglDepthRenderbuffer=n.createRenderbuffer(),Ze(ie.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(36160,null)}if(be){t.bindTexture(34067,me.__webglTexture),ae(34067,I,je);for(let ue=0;ue<6;ue++)we(ie.__webglFramebuffer[ue],B,I,36064,34069+ue);R(I,je)&&P(34067),t.unbindTexture()}else if(De){const ue=B.texture;for(let tt=0,nt=ue.length;tt<nt;tt++){const H=ue[tt],N=i.get(H);t.bindTexture(3553,N.__webglTexture),ae(3553,H,je),we(ie.__webglFramebuffer,B,H,36064+tt,3553),R(H,je)&&P(3553)}t.unbindTexture()}else{let ue=3553;(B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(l?ue=B.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ue,me.__webglTexture),ae(ue,I,je),we(ie.__webglFramebuffer,B,I,36064,ue),R(I,je)&&P(ue),t.unbindTexture()}B.depthBuffer&&le(B)}function Re(B){const I=b(B)||l,ie=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let me=0,be=ie.length;me<be;me++){const De=ie[me];if(R(De,I)){const je=B.isWebGLCubeRenderTarget?34067:3553,ue=i.get(De).__webglTexture;t.bindTexture(je,ue),P(je),t.unbindTexture()}}}function $e(B){if(l&&B.samples>0&&Ge(B)===!1){const I=B.width,ie=B.height;let me=16384;const be=[36064],De=B.stencilBuffer?33306:36096;B.depthBuffer&&be.push(De);const je=i.get(B),ue=je.__ignoreDepthValues!==void 0?je.__ignoreDepthValues:!1;ue===!1&&(B.depthBuffer&&(me|=256),B.stencilBuffer&&(me|=1024)),t.bindFramebuffer(36008,je.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,je.__webglFramebuffer),ue===!0&&(n.invalidateFramebuffer(36008,[De]),n.invalidateFramebuffer(36009,[De])),n.blitFramebuffer(0,0,I,ie,0,0,I,ie,me,9728),g&&n.invalidateFramebuffer(36008,be),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,je.__webglMultisampledFramebuffer)}}function We(B){return Math.min(p,B.samples)}function Ge(B){const I=i.get(B);return l&&B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Tt(B){const I=o.render.frame;x.get(B)!==I&&(x.set(B,I),B.update())}function Lt(B,I){const ie=B.encoding,me=B.format,be=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||B.format===Dp||ie!==Tr&&(ie===dt?l===!1?e.has("EXT_sRGB")===!0&&me===Di?(B.format=Dp,B.minFilter=Pt,B.generateMipmaps=!1):I=Io.sRGBToLinear(I):(me!==Di||be!==_i)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ie)),I}this.allocateTextureUnit=O,this.resetTextureUnits=$,this.setTexture2D=Q,this.setTexture2DArray=oe,this.setTexture3D=de,this.setTextureCube=ve,this.rebindTextures=ye,this.setupRenderTarget=ze,this.updateRenderTargetMipmap=Re,this.updateMultisampleRenderTarget=$e,this.setupDepthRenderbuffer=le,this.setupFrameBufferTexture=we,this.useMultisampledRTT=Ge}function y3(n,e,t){const i=t.isWebGL2;function r(s,o=null){let l;if(s===_i)return 5121;if(s===P2)return 32819;if(s===L2)return 32820;if(s===A2)return 5120;if(s===C2)return 5122;if(s===su)return 5123;if(s===R2)return 5124;if(s===Zl)return 5125;if(s===Hr)return 5126;if(s===po)return i?5131:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===D2)return 6406;if(s===Di)return 6408;if(s===N2)return 6409;if(s===z2)return 6410;if(s===go)return 6402;if(s===Eo)return 34041;if(s===F2)return 6403;if(s===I2)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===Dp)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===k2)return 36244;if(s===B2)return 33319;if(s===O2)return 33320;if(s===U2)return 36249;if(s===Jh||s===Kh||s===$h||s===ep)if(o===dt)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===Jh)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Kh)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===$h)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ep)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===Jh)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Kh)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===$h)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ep)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Xv||s===Yv||s===Zv||s===Qv)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===Xv)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Yv)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Zv)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Qv)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===H2)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Jv||s===Kv)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===Jv)return o===dt?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===Kv)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===$v||s===ey||s===ty||s===ny||s===iy||s===ry||s===sy||s===oy||s===ay||s===ly||s===uy||s===cy||s===fy||s===dy)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===$v)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===ey)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===ty)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===ny)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===iy)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===ry)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===sy)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===oy)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===ay)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ly)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===uy)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===cy)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===fy)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===dy)return o===dt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===hy)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===hy)return o===dt?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===mo)return i?34042:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class Lx extends Ht{constructor(e=[]){super(),this.cameras=e}}Lx.prototype.isArrayCamera=!0;class ga extends vt{constructor(){super(),this.type="Group"}}ga.prototype.isGroup=!0;const IN={type:"move"};class C0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ga,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ga,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new L,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new L),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ga,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new L,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new L),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(l!==null&&(r=t.getPose(e.targetRaySpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(IN))),f&&e.hand){o=!0;for(const y of e.hand.values()){const w=t.getJointPose(y,i);if(f.joints[y.jointName]===void 0){const _=new ga;_.matrixAutoUpdate=!1,_.visible=!1,f.joints[y.jointName]=_,f.add(_)}const S=f.joints[y.jointName];w!==null&&(S.matrix.fromArray(w.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.jointRadius=w.radius),S.visible=w!==null}const d=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],m=d.position.distanceTo(p.position),g=.02,x=.005;f.inputState.pinching&&m>g+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&m<=g-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),f!==null&&(f.visible=o!==null),this}}class um extends hn{constructor(e,t,i,r,s,o,l,c,f,d){if(d=d!==void 0?d:go,d!==go&&d!==Eo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===go&&(i=su),i===void 0&&d===Eo&&(i=mo),super(null,r,s,o,l,c,d,i,f),this.image={width:e,height:t},this.magFilter=l!==void 0?l:Ut,this.minFilter=c!==void 0?c:Ut,this.flipY=!1,this.generateMipmaps=!1}}um.prototype.isDepthTexture=!0;class NN extends ar{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l="local-floor",c=null,f=null,d=null,p=null,m=null;const g=t.getContextAttributes();let x=null,y=null;const w=[],S=new Map,_=new Ht;_.layers.enable(1),_.viewport=new Nt;const E=new Ht;E.layers.enable(2),E.viewport=new Nt;const b=[_,E],A=new Lx;A.layers.enable(1),A.layers.enable(2);let R=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let q=w[O];return q===void 0&&(q=new C0,w[O]=q),q.getTargetRaySpace()},this.getControllerGrip=function(O){let q=w[O];return q===void 0&&(q=new C0,w[O]=q),q.getGripSpace()},this.getHand=function(O){let q=w[O];return q===void 0&&(q=new C0,w[O]=q),q.getHandSpace()};function D(O){const q=S.get(O.inputSource);q&&q.dispatchEvent({type:O.type,data:O.inputSource})}function V(){S.forEach(function(O,q){O.disconnect(q)}),S.clear(),R=null,P=null,e.setRenderTarget(x),p=null,d=null,f=null,r=null,y=null,$.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){s=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){l=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(O){if(r=O,r!==null){if(x=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",V),r.addEventListener("inputsourceschange",U),g.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const q={antialias:r.renderState.layers===void 0?g.antialias:!0,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,t,q),r.updateRenderState({baseLayer:p}),y=new Xt(p.framebufferWidth,p.framebufferHeight,{format:Di,type:_i,encoding:e.outputEncoding})}else{let q=null,Q=null,oe=null;g.depth&&(oe=g.stencil?35056:33190,q=g.stencil?Eo:go,Q=g.stencil?mo:su);const de={colorFormat:e.outputEncoding===dt?35907:32856,depthFormat:oe,scaleFactor:s};f=new XRWebGLBinding(r,t),d=f.createProjectionLayer(de),r.updateRenderState({layers:[d]}),y=new Xt(d.textureWidth,d.textureHeight,{format:Di,type:_i,depthTexture:new um(d.textureWidth,d.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,q),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0});const ve=e.properties.get(y);ve.__ignoreDepthValues=d.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(1),o=await r.requestReferenceSpace(l),$.setContext(r),$.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function U(O){const q=r.inputSources;for(let Q=0;Q<w.length;Q++)S.set(q[Q],w[Q]);for(let Q=0;Q<O.removed.length;Q++){const oe=O.removed[Q],de=S.get(oe);de&&(de.dispatchEvent({type:"disconnected",data:oe}),S.delete(oe))}for(let Q=0;Q<O.added.length;Q++){const oe=O.added[Q],de=S.get(oe);de&&de.dispatchEvent({type:"connected",data:oe})}}const C=new L,k=new L;function ee(O,q,Q){C.setFromMatrixPosition(q.matrixWorld),k.setFromMatrixPosition(Q.matrixWorld);const oe=C.distanceTo(k),de=q.projectionMatrix.elements,ve=Q.projectionMatrix.elements,Ye=de[14]/(de[10]-1),Ue=de[14]/(de[10]+1),ae=(de[9]+1)/de[5],at=(de[9]-1)/de[5],et=(de[8]-1)/de[0],Je=(ve[8]+1)/ve[0],we=Ye*et,Ze=Ye*Je,ce=oe/(-et+Je),le=ce*-et;q.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(le),O.translateZ(ce),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const ye=Ye+ce,ze=Ue+ce,Re=we-le,$e=Ze+(oe-le),We=ae*Ue/ze*ye,Ge=at*Ue/ze*ye;O.projectionMatrix.makePerspective(Re,$e,We,Ge,ye,ze)}function W(O,q){q===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(q.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(r===null)return;A.near=E.near=_.near=O.near,A.far=E.far=_.far=O.far,(R!==A.near||P!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),R=A.near,P=A.far);const q=O.parent,Q=A.cameras;W(A,q);for(let de=0;de<Q.length;de++)W(Q[de],q);A.matrixWorld.decompose(A.position,A.quaternion,A.scale),O.position.copy(A.position),O.quaternion.copy(A.quaternion),O.scale.copy(A.scale),O.matrix.copy(A.matrix),O.matrixWorld.copy(A.matrixWorld);const oe=O.children;for(let de=0,ve=oe.length;de<ve;de++)oe[de].updateMatrixWorld(!0);Q.length===2?ee(A,_,E):A.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return A},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(O){d!==null&&(d.fixedFoveation=O),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=O)};let K=null;function X(O,q){if(c=q.getViewerPose(o),m=q,c!==null){const oe=c.views;p!==null&&(e.setRenderTargetFramebuffer(y,p.framebuffer),e.setRenderTarget(y));let de=!1;oe.length!==A.cameras.length&&(A.cameras.length=0,de=!0);for(let ve=0;ve<oe.length;ve++){const Ye=oe[ve];let Ue=null;if(p!==null)Ue=p.getViewport(Ye);else{const at=f.getViewSubImage(d,Ye);Ue=at.viewport,ve===0&&(e.setRenderTargetTextures(y,at.colorTexture,d.ignoreDepthValues?void 0:at.depthStencilTexture),e.setRenderTarget(y))}const ae=b[ve];ae.matrix.fromArray(Ye.transform.matrix),ae.projectionMatrix.fromArray(Ye.projectionMatrix),ae.viewport.set(Ue.x,Ue.y,Ue.width,Ue.height),ve===0&&A.matrix.copy(ae.matrix),de===!0&&A.cameras.push(ae)}}const Q=r.inputSources;for(let oe=0;oe<w.length;oe++){const de=w[oe],ve=Q[oe];de.update(ve,q,o)}K&&K(O,q),m=null}const $=new u3;$.setAnimationLoop(X),this.setAnimationLoop=function(O){K=O},this.dispose=function(){}}}function zN(n,e){function t(y,w){y.fogColor.value.copy(w.color),w.isFog?(y.fogNear.value=w.near,y.fogFar.value=w.far):w.isFogExp2&&(y.fogDensity.value=w.density)}function i(y,w,S,_,E){w.isMeshBasicMaterial||w.isMeshLambertMaterial?r(y,w):w.isMeshToonMaterial?(r(y,w),d(y,w)):w.isMeshPhongMaterial?(r(y,w),f(y,w)):w.isMeshStandardMaterial?(r(y,w),p(y,w),w.isMeshPhysicalMaterial&&m(y,w,E)):w.isMeshMatcapMaterial?(r(y,w),g(y,w)):w.isMeshDepthMaterial?r(y,w):w.isMeshDistanceMaterial?(r(y,w),x(y,w)):w.isMeshNormalMaterial?r(y,w):w.isLineBasicMaterial?(s(y,w),w.isLineDashedMaterial&&o(y,w)):w.isPointsMaterial?l(y,w,S,_):w.isSpriteMaterial?c(y,w):w.isShadowMaterial?(y.color.value.copy(w.color),y.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function r(y,w){y.opacity.value=w.opacity,w.color&&y.diffuse.value.copy(w.color),w.emissive&&y.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.bumpMap&&(y.bumpMap.value=w.bumpMap,y.bumpScale.value=w.bumpScale,w.side===Nn&&(y.bumpScale.value*=-1)),w.displacementMap&&(y.displacementMap.value=w.displacementMap,y.displacementScale.value=w.displacementScale,y.displacementBias.value=w.displacementBias),w.emissiveMap&&(y.emissiveMap.value=w.emissiveMap),w.normalMap&&(y.normalMap.value=w.normalMap,y.normalScale.value.copy(w.normalScale),w.side===Nn&&y.normalScale.value.negate()),w.specularMap&&(y.specularMap.value=w.specularMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);const S=e.get(w).envMap;if(S&&(y.envMap.value=S,y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=w.reflectivity,y.ior.value=w.ior,y.refractionRatio.value=w.refractionRatio),w.lightMap){y.lightMap.value=w.lightMap;const b=n.physicallyCorrectLights!==!0?Math.PI:1;y.lightMapIntensity.value=w.lightMapIntensity*b}w.aoMap&&(y.aoMap.value=w.aoMap,y.aoMapIntensity.value=w.aoMapIntensity);let _;w.map?_=w.map:w.specularMap?_=w.specularMap:w.displacementMap?_=w.displacementMap:w.normalMap?_=w.normalMap:w.bumpMap?_=w.bumpMap:w.roughnessMap?_=w.roughnessMap:w.metalnessMap?_=w.metalnessMap:w.alphaMap?_=w.alphaMap:w.emissiveMap?_=w.emissiveMap:w.clearcoatMap?_=w.clearcoatMap:w.clearcoatNormalMap?_=w.clearcoatNormalMap:w.clearcoatRoughnessMap?_=w.clearcoatRoughnessMap:w.specularIntensityMap?_=w.specularIntensityMap:w.specularColorMap?_=w.specularColorMap:w.transmissionMap?_=w.transmissionMap:w.thicknessMap?_=w.thicknessMap:w.sheenColorMap?_=w.sheenColorMap:w.sheenRoughnessMap&&(_=w.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),y.uvTransform.value.copy(_.matrix));let E;w.aoMap?E=w.aoMap:w.lightMap&&(E=w.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),y.uv2Transform.value.copy(E.matrix))}function s(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity}function o(y,w){y.dashSize.value=w.dashSize,y.totalSize.value=w.dashSize+w.gapSize,y.scale.value=w.scale}function l(y,w,S,_){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.size.value=w.size*S,y.scale.value=_*.5,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);let E;w.map?E=w.map:w.alphaMap&&(E=w.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),y.uvTransform.value.copy(E.matrix))}function c(y,w){y.diffuse.value.copy(w.color),y.opacity.value=w.opacity,y.rotation.value=w.rotation,w.map&&(y.map.value=w.map),w.alphaMap&&(y.alphaMap.value=w.alphaMap),w.alphaTest>0&&(y.alphaTest.value=w.alphaTest);let S;w.map?S=w.map:w.alphaMap&&(S=w.alphaMap),S!==void 0&&(S.matrixAutoUpdate===!0&&S.updateMatrix(),y.uvTransform.value.copy(S.matrix))}function f(y,w){y.specular.value.copy(w.specular),y.shininess.value=Math.max(w.shininess,1e-4)}function d(y,w){w.gradientMap&&(y.gradientMap.value=w.gradientMap)}function p(y,w){y.roughness.value=w.roughness,y.metalness.value=w.metalness,w.roughnessMap&&(y.roughnessMap.value=w.roughnessMap),w.metalnessMap&&(y.metalnessMap.value=w.metalnessMap),e.get(w).envMap&&(y.envMapIntensity.value=w.envMapIntensity)}function m(y,w,S){y.ior.value=w.ior,w.sheen>0&&(y.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),y.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(y.sheenColorMap.value=w.sheenColorMap),w.sheenRoughnessMap&&(y.sheenRoughnessMap.value=w.sheenRoughnessMap)),w.clearcoat>0&&(y.clearcoat.value=w.clearcoat,y.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(y.clearcoatMap.value=w.clearcoatMap),w.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap),w.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),y.clearcoatNormalMap.value=w.clearcoatNormalMap,w.side===Nn&&y.clearcoatNormalScale.value.negate())),w.transmission>0&&(y.transmission.value=w.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),w.transmissionMap&&(y.transmissionMap.value=w.transmissionMap),y.thickness.value=w.thickness,w.thicknessMap&&(y.thicknessMap.value=w.thicknessMap),y.attenuationDistance.value=w.attenuationDistance,y.attenuationColor.value.copy(w.attenuationColor)),y.specularIntensity.value=w.specularIntensity,y.specularColor.value.copy(w.specularColor),w.specularIntensityMap&&(y.specularIntensityMap.value=w.specularIntensityMap),w.specularColorMap&&(y.specularColorMap.value=w.specularColorMap)}function g(y,w){w.matcap&&(y.matcap.value=w.matcap)}function x(y,w){y.referencePosition.value.copy(w.referencePosition),y.nearDistance.value=w.nearDistance,y.farDistance.value=w.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function FN(){const n=cf("canvas");return n.style.display="block",n}function zt(n={}){const e=n.canvas!==void 0?n.canvas:FN(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,c=n.powerPreference!==void 0?n.powerPreference:"default",f=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let d;n.context!==void 0?d=t.getContextAttributes().alpha:d=n.alpha!==void 0?n.alpha:!1;let p=null,m=null;const g=[],x=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Tr,this.physicallyCorrectLights=!1,this.toneMapping=Er,this.toneMappingExposure=1;const y=this;let w=!1,S=0,_=0,E=null,b=-1,A=null;const R=new Nt,P=new Nt;let D=null,V=e.width,U=e.height,C=1,k=null,ee=null;const W=new Nt(0,0,V,U),K=new Nt(0,0,V,U);let X=!1;const $=new Tf;let O=!1,q=!1,Q=null;const oe=new ke,de=new ne,ve=new L,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ue(){return E===null?C:1}let ae=t;function at(z,Y){for(let re=0;re<z.length;re++){const J=z[re],pe=e.getContext(J,Y);if(pe!==null)return pe}return null}try{const z={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Tu}`),e.addEventListener("webglcontextlost",N,!1),e.addEventListener("webglcontextrestored",fe,!1),ae===null){const Y=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&Y.shift(),ae=at(Y,z),ae===null)throw at(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ae.getShaderPrecisionFormat===void 0&&(ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let et,Je,we,Ze,ce,le,ye,ze,Re,$e,We,Ge,Tt,Lt,B,I,ie,me,be,De,je,ue,tt;function nt(){et=new t4(ae),Je=new ZI(ae,et,n),et.init(Je),ue=new y3(ae,et,Je),we=new LN(ae,et,Je),Ze=new r4(ae),ce=new _N,le=new DN(ae,et,we,ce,Je,ue,Ze),ye=new JI(y),ze=new e4(y),Re=new yL(ae,Je),tt=new XI(ae,et,Re,Je),$e=new n4(ae,Re,Ze,tt),We=new l4(ae,$e,Re,Ze),be=new a4(ae,Je,le),I=new QI(ce),Ge=new xN(y,ye,ze,et,Je,tt,I),Tt=new zN(y,ce),Lt=new SN,B=new CN(et,Je),me=new qI(y,ye,we,We,d,o),ie=new v3(y,We,Je),De=new YI(ae,et,Ze,Je),je=new i4(ae,et,Ze,Je),Ze.programs=Ge.programs,y.capabilities=Je,y.extensions=et,y.properties=ce,y.renderLists=Lt,y.shadowMap=ie,y.state=we,y.info=Ze}nt();const H=new NN(y,ae);this.xr=H,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const z=et.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=et.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(z){z!==void 0&&(C=z,this.setSize(V,U,!1))},this.getSize=function(z){return z.set(V,U)},this.setSize=function(z,Y,re){if(H.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=z,U=Y,e.width=Math.floor(z*C),e.height=Math.floor(Y*C),re!==!1&&(e.style.width=z+"px",e.style.height=Y+"px"),this.setViewport(0,0,z,Y)},this.getDrawingBufferSize=function(z){return z.set(V*C,U*C).floor()},this.setDrawingBufferSize=function(z,Y,re){V=z,U=Y,C=re,e.width=Math.floor(z*re),e.height=Math.floor(Y*re),this.setViewport(0,0,z,Y)},this.getCurrentViewport=function(z){return z.copy(R)},this.getViewport=function(z){return z.copy(W)},this.setViewport=function(z,Y,re,J){z.isVector4?W.set(z.x,z.y,z.z,z.w):W.set(z,Y,re,J),we.viewport(R.copy(W).multiplyScalar(C).floor())},this.getScissor=function(z){return z.copy(K)},this.setScissor=function(z,Y,re,J){z.isVector4?K.set(z.x,z.y,z.z,z.w):K.set(z,Y,re,J),we.scissor(P.copy(K).multiplyScalar(C).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(z){we.setScissorTest(X=z)},this.setOpaqueSort=function(z){k=z},this.setTransparentSort=function(z){ee=z},this.getClearColor=function(z){return z.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(z=!0,Y=!0,re=!0){let J=0;z&&(J|=16384),Y&&(J|=256),re&&(J|=1024),ae.clear(J)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",N,!1),e.removeEventListener("webglcontextrestored",fe,!1),Lt.dispose(),B.dispose(),ce.dispose(),ye.dispose(),ze.dispose(),We.dispose(),tt.dispose(),Ge.dispose(),H.dispose(),H.removeEventListener("sessionstart",Ve),H.removeEventListener("sessionend",gt),Q&&(Q.dispose(),Q=null),yt.stop()};function N(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const z=Ze.autoReset,Y=ie.enabled,re=ie.autoUpdate,J=ie.needsUpdate,pe=ie.type;nt(),Ze.autoReset=z,ie.enabled=Y,ie.autoUpdate=re,ie.needsUpdate=J,ie.type=pe}function he(z){const Y=z.target;Y.removeEventListener("dispose",he),Ie(Y)}function Ie(z){Me(z),ce.remove(z)}function Me(z){const Y=ce.get(z).programs;Y!==void 0&&(Y.forEach(function(re){Ge.releaseProgram(re)}),z.isShaderMaterial&&Ge.releaseShaderCache(z))}this.renderBufferDirect=function(z,Y,re,J,pe,Ke){Y===null&&(Y=Ye);const it=pe.isMesh&&pe.matrixWorld.determinant()<0,ut=Em(z,Y,re,J,pe);we.setMaterial(J,it);let lt=re.index;const Dt=re.attributes.position;if(lt===null){if(Dt===void 0||Dt.count===0)return}else if(lt.count===0)return;let wt=1;J.wireframe===!0&&(lt=$e.getWireframeAttribute(re),wt=2),tt.setup(pe,J,ut,re,lt);let St,Yt=De;lt!==null&&(St=Re.get(lt),Yt=je,Yt.setIndex(St));const $r=lt!==null?lt.count:Dt.count,Ps=re.drawRange.start*wt,Ls=re.drawRange.count*wt,Hi=Ke!==null?Ke.start*wt:0,bt=Ke!==null?Ke.count*wt:1/0,Rr=Math.max(Ps,Hi),Ot=Math.min($r,Ps+Ls,Hi+bt)-1,ai=Math.max(0,Ot-Rr+1);if(ai!==0){if(pe.isMesh)J.wireframe===!0?(we.setLineWidth(J.wireframeLinewidth*Ue()),Yt.setMode(1)):Yt.setMode(4);else if(pe.isLine){let Gi=J.linewidth;Gi===void 0&&(Gi=1),we.setLineWidth(Gi*Ue()),pe.isLineSegments?Yt.setMode(1):pe.isLineLoop?Yt.setMode(2):Yt.setMode(3)}else pe.isPoints?Yt.setMode(0):pe.isSprite&&Yt.setMode(4);if(pe.isInstancedMesh)Yt.renderInstances(Rr,ai,pe.count);else if(re.isInstancedBufferGeometry){const Gi=Math.min(re.instanceCount,re._maxInstanceCount);Yt.renderInstances(Rr,ai,Gi)}else Yt.render(Rr,ai)}},this.compile=function(z,Y){m=B.get(z),m.init(),x.push(m),z.traverseVisible(function(re){re.isLight&&re.layers.test(Y.layers)&&(m.pushLight(re),re.castShadow&&m.pushShadow(re))}),m.setupLights(y.physicallyCorrectLights),z.traverse(function(re){const J=re.material;if(J)if(Array.isArray(J))for(let pe=0;pe<J.length;pe++){const Ke=J[pe];qa(Ke,z,re)}else qa(J,z,re)}),x.pop(),m=null};let qe=null;function Se(z){qe&&qe(z)}function Ve(){yt.stop()}function gt(){yt.start()}const yt=new u3;yt.setAnimationLoop(Se),typeof self!="undefined"&&yt.setContext(self),this.setAnimationLoop=function(z){qe=z,H.setAnimationLoop(z),z===null?yt.stop():yt.start()},H.addEventListener("sessionstart",Ve),H.addEventListener("sessionend",gt),this.render=function(z,Y){if(Y!==void 0&&Y.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;z.autoUpdate===!0&&z.updateMatrixWorld(),Y.parent===null&&Y.updateMatrixWorld(),H.enabled===!0&&H.isPresenting===!0&&(H.cameraAutoUpdate===!0&&H.updateCamera(Y),Y=H.getCamera()),z.isScene===!0&&z.onBeforeRender(y,z,Y,E),m=B.get(z,x.length),m.init(),x.push(m),oe.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),$.setFromProjectionMatrix(oe),q=this.localClippingEnabled,O=I.init(this.clippingPlanes,q,Y),p=Lt.get(z,g.length),p.init(),g.push(p),Ui(z,Y,0,y.sortObjects),p.finish(),y.sortObjects===!0&&p.sort(k,ee),O===!0&&I.beginShadows();const re=m.state.shadowsArray;if(ie.render(re,z,Y),O===!0&&I.endShadows(),this.info.autoReset===!0&&this.info.reset(),me.render(p,z),m.setupLights(y.physicallyCorrectLights),Y.isArrayCamera){const J=Y.cameras;for(let pe=0,Ke=J.length;pe<Ke;pe++){const it=J[pe];Si(p,z,it,it.viewport)}}else Si(p,z,Y);E!==null&&(le.updateMultisampleRenderTarget(E),le.updateRenderTargetMipmap(E)),z.isScene===!0&&z.onAfterRender(y,z,Y),tt.resetDefaultState(),b=-1,A=null,x.pop(),x.length>0?m=x[x.length-1]:m=null,g.pop(),g.length>0?p=g[g.length-1]:p=null};function Ui(z,Y,re,J){if(z.visible===!1)return;if(z.layers.test(Y.layers)){if(z.isGroup)re=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(Y);else if(z.isLight)m.pushLight(z),z.castShadow&&m.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||$.intersectsSprite(z)){J&&ve.setFromMatrixPosition(z.matrixWorld).applyMatrix4(oe);const it=We.update(z),ut=z.material;ut.visible&&p.push(z,it,ut,re,ve.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(z.isSkinnedMesh&&z.skeleton.frame!==Ze.render.frame&&(z.skeleton.update(),z.skeleton.frame=Ze.render.frame),!z.frustumCulled||$.intersectsObject(z))){J&&ve.setFromMatrixPosition(z.matrixWorld).applyMatrix4(oe);const it=We.update(z),ut=z.material;if(Array.isArray(ut)){const lt=it.groups;for(let Dt=0,wt=lt.length;Dt<wt;Dt++){const St=lt[Dt],Yt=ut[St.materialIndex];Yt&&Yt.visible&&p.push(z,it,Yt,re,ve.z,St)}}else ut.visible&&p.push(z,it,ut,re,ve.z,null)}}const Ke=z.children;for(let it=0,ut=Ke.length;it<ut;it++)Ui(Ke[it],Y,re,J)}function Si(z,Y,re,J){const pe=z.opaque,Ke=z.transmissive,it=z.transparent;m.setupLightsView(re),Ke.length>0&&If(pe,Y,re),J&&we.viewport(R.copy(J)),pe.length>0&&ja(pe,Y,re),Ke.length>0&&ja(Ke,Y,re),it.length>0&&ja(it,Y,re),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function If(z,Y,re){const J=Je.isWebGL2;Q===null&&(Q=new Xt(1,1,{generateMipmaps:!0,type:ue.convert(po)!==null?po:_i,minFilter:Lo,samples:J&&s===!0?4:0})),y.getDrawingBufferSize(de),J?Q.setSize(de.x,de.y):Q.setSize(Ip(de.x),Ip(de.y));const pe=y.getRenderTarget();y.setRenderTarget(Q),y.clear();const Ke=y.toneMapping;y.toneMapping=Er,ja(z,Y,re),y.toneMapping=Ke,le.updateMultisampleRenderTarget(Q),le.updateRenderTargetMipmap(Q),y.setRenderTarget(pe)}function ja(z,Y,re){const J=Y.isScene===!0?Y.overrideMaterial:null;for(let pe=0,Ke=z.length;pe<Ke;pe++){const it=z[pe],ut=it.object,lt=it.geometry,Dt=J===null?it.material:J,wt=it.group;ut.layers.test(re.layers)&&Nf(ut,Y,re,lt,Dt,wt)}}function Nf(z,Y,re,J,pe,Ke){z.onBeforeRender(y,Y,re,J,pe,Ke),z.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),pe.onBeforeRender(y,Y,re,J,z,Ke),pe.transparent===!0&&pe.side===Sr?(pe.side=Nn,pe.needsUpdate=!0,y.renderBufferDirect(re,Y,J,pe,z,Ke),pe.side=wo,pe.needsUpdate=!0,y.renderBufferDirect(re,Y,J,pe,z,Ke),pe.side=Sr):y.renderBufferDirect(re,Y,J,pe,z,Ke),z.onAfterRender(y,Y,re,J,pe,Ke)}function qa(z,Y,re){Y.isScene!==!0&&(Y=Ye);const J=ce.get(z),pe=m.state.lights,Ke=m.state.shadowsArray,it=pe.state.version,ut=Ge.getParameters(z,pe.state,Ke,Y,re),lt=Ge.getProgramCacheKey(ut);let Dt=J.programs;J.environment=z.isMeshStandardMaterial?Y.environment:null,J.fog=Y.fog,J.envMap=(z.isMeshStandardMaterial?ze:ye).get(z.envMap||J.environment),Dt===void 0&&(z.addEventListener("dispose",he),Dt=new Map,J.programs=Dt);let wt=Dt.get(lt);if(wt!==void 0){if(J.currentProgram===wt&&J.lightsStateVersion===it)return Iu(z,ut),wt}else ut.uniforms=Ge.getUniforms(z),z.onBuild(re,ut,y),z.onBeforeCompile(ut,y),wt=Ge.acquireProgram(ut,lt),Dt.set(lt,wt),J.uniforms=ut.uniforms;const St=J.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(St.clippingPlanes=I.uniform),Iu(z,ut),J.needsLights=bm(z),J.lightsStateVersion=it,J.needsLights&&(St.ambientLightColor.value=pe.state.ambient,St.lightProbe.value=pe.state.probe,St.directionalLights.value=pe.state.directional,St.directionalLightShadows.value=pe.state.directionalShadow,St.spotLights.value=pe.state.spot,St.spotLightShadows.value=pe.state.spotShadow,St.rectAreaLights.value=pe.state.rectArea,St.ltc_1.value=pe.state.rectAreaLTC1,St.ltc_2.value=pe.state.rectAreaLTC2,St.pointLights.value=pe.state.point,St.pointLightShadows.value=pe.state.pointShadow,St.hemisphereLights.value=pe.state.hemi,St.directionalShadowMap.value=pe.state.directionalShadowMap,St.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,St.spotShadowMap.value=pe.state.spotShadowMap,St.spotShadowMatrix.value=pe.state.spotShadowMatrix,St.pointShadowMap.value=pe.state.pointShadowMap,St.pointShadowMatrix.value=pe.state.pointShadowMatrix);const Yt=wt.getUniforms(),$r=vo.seqWithValue(Yt.seq,St);return J.currentProgram=wt,J.uniformsList=$r,wt}function Iu(z,Y){const re=ce.get(z);re.outputEncoding=Y.outputEncoding,re.instancing=Y.instancing,re.skinning=Y.skinning,re.morphTargets=Y.morphTargets,re.morphNormals=Y.morphNormals,re.morphColors=Y.morphColors,re.morphTargetsCount=Y.morphTargetsCount,re.numClippingPlanes=Y.numClippingPlanes,re.numIntersection=Y.numClipIntersection,re.vertexAlphas=Y.vertexAlphas,re.vertexTangents=Y.vertexTangents,re.toneMapping=Y.toneMapping}function Em(z,Y,re,J,pe){Y.isScene!==!0&&(Y=Ye),le.resetTextureUnits();const Ke=Y.fog,it=J.isMeshStandardMaterial?Y.environment:null,ut=E===null?y.outputEncoding:E.isXRRenderTarget===!0?E.texture.encoding:Tr,lt=(J.isMeshStandardMaterial?ze:ye).get(J.envMap||it),Dt=J.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,wt=!!J.normalMap&&!!re.attributes.tangent,St=!!re.morphAttributes.position,Yt=!!re.morphAttributes.normal,$r=!!re.morphAttributes.color,Ps=J.toneMapped?y.toneMapping:Er,Ls=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,Hi=Ls!==void 0?Ls.length:0,bt=ce.get(J),Rr=m.state.lights;if(O===!0&&(q===!0||z!==A)){const ht=z===A&&J.id===b;I.setState(J,z,ht)}let Ot=!1;J.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Rr.state.version||bt.outputEncoding!==ut||pe.isInstancedMesh&&bt.instancing===!1||!pe.isInstancedMesh&&bt.instancing===!0||pe.isSkinnedMesh&&bt.skinning===!1||!pe.isSkinnedMesh&&bt.skinning===!0||bt.envMap!==lt||J.fog&&bt.fog!==Ke||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==I.numPlanes||bt.numIntersection!==I.numIntersection)||bt.vertexAlphas!==Dt||bt.vertexTangents!==wt||bt.morphTargets!==St||bt.morphNormals!==Yt||bt.morphColors!==$r||bt.toneMapping!==Ps||Je.isWebGL2===!0&&bt.morphTargetsCount!==Hi)&&(Ot=!0):(Ot=!0,bt.__version=J.version);let ai=bt.currentProgram;Ot===!0&&(ai=qa(J,Y,pe));let Gi=!1,ko=!1,Bo=!1;const Jt=ai.getUniforms(),li=bt.uniforms;if(we.useProgram(ai.program)&&(Gi=!0,ko=!0,Bo=!0),J.id!==b&&(b=J.id,ko=!0),Gi||A!==z){if(Jt.setValue(ae,"projectionMatrix",z.projectionMatrix),Je.logarithmicDepthBuffer&&Jt.setValue(ae,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),A!==z&&(A=z,ko=!0,Bo=!0),J.isShaderMaterial||J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshStandardMaterial||J.envMap){const ht=Jt.map.cameraPosition;ht!==void 0&&ht.setValue(ae,ve.setFromMatrixPosition(z.matrixWorld))}(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial)&&Jt.setValue(ae,"isOrthographic",z.isOrthographicCamera===!0),(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial||J.isShadowMaterial||pe.isSkinnedMesh)&&Jt.setValue(ae,"viewMatrix",z.matrixWorldInverse)}if(pe.isSkinnedMesh){Jt.setOptional(ae,pe,"bindMatrix"),Jt.setOptional(ae,pe,"bindMatrixInverse");const ht=pe.skeleton;ht&&(Je.floatVertexTextures?(ht.boneTexture===null&&ht.computeBoneTexture(),Jt.setValue(ae,"boneTexture",ht.boneTexture,le),Jt.setValue(ae,"boneTextureSize",ht.boneTextureSize)):Jt.setOptional(ae,ht,"boneMatrices"))}const Ft=re.morphAttributes;return(Ft.position!==void 0||Ft.normal!==void 0||Ft.color!==void 0&&Je.isWebGL2===!0)&&be.update(pe,re,J,ai),(ko||bt.receiveShadow!==pe.receiveShadow)&&(bt.receiveShadow=pe.receiveShadow,Jt.setValue(ae,"receiveShadow",pe.receiveShadow)),ko&&(Jt.setValue(ae,"toneMappingExposure",y.toneMappingExposure),bt.needsLights&&Tm(li,Bo),Ke&&J.fog&&Tt.refreshFogUniforms(li,Ke),Tt.refreshMaterialUniforms(li,J,C,U,Q),vo.upload(ae,bt.uniformsList,li,le)),J.isShaderMaterial&&J.uniformsNeedUpdate===!0&&(vo.upload(ae,bt.uniformsList,li,le),J.uniformsNeedUpdate=!1),J.isSpriteMaterial&&Jt.setValue(ae,"center",pe.center),Jt.setValue(ae,"modelViewMatrix",pe.modelViewMatrix),Jt.setValue(ae,"normalMatrix",pe.normalMatrix),Jt.setValue(ae,"modelMatrix",pe.matrixWorld),ai}function Tm(z,Y){z.ambientLightColor.needsUpdate=Y,z.lightProbe.needsUpdate=Y,z.directionalLights.needsUpdate=Y,z.directionalLightShadows.needsUpdate=Y,z.pointLights.needsUpdate=Y,z.pointLightShadows.needsUpdate=Y,z.spotLights.needsUpdate=Y,z.spotLightShadows.needsUpdate=Y,z.rectAreaLights.needsUpdate=Y,z.hemisphereLights.needsUpdate=Y}function bm(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(z,Y,re){ce.get(z.texture).__webglTexture=Y,ce.get(z.depthTexture).__webglTexture=re;const J=ce.get(z);J.__hasExternalTextures=!0,J.__hasExternalTextures&&(J.__autoAllocateDepthBuffer=re===void 0,J.__autoAllocateDepthBuffer||et.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),J.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(z,Y){const re=ce.get(z);re.__webglFramebuffer=Y,re.__useDefaultFramebuffer=Y===void 0},this.setRenderTarget=function(z,Y=0,re=0){E=z,S=Y,_=re;let J=!0;if(z){const lt=ce.get(z);lt.__useDefaultFramebuffer!==void 0?(we.bindFramebuffer(36160,null),J=!1):lt.__webglFramebuffer===void 0?le.setupRenderTarget(z):lt.__hasExternalTextures&&le.rebindTextures(z,ce.get(z.texture).__webglTexture,ce.get(z.depthTexture).__webglTexture)}let pe=null,Ke=!1,it=!1;if(z){const lt=z.texture;(lt.isData3DTexture||lt.isDataArrayTexture)&&(it=!0);const Dt=ce.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(pe=Dt[Y],Ke=!0):Je.isWebGL2&&z.samples>0&&le.useMultisampledRTT(z)===!1?pe=ce.get(z).__webglMultisampledFramebuffer:pe=Dt,R.copy(z.viewport),P.copy(z.scissor),D=z.scissorTest}else R.copy(W).multiplyScalar(C).floor(),P.copy(K).multiplyScalar(C).floor(),D=X;if(we.bindFramebuffer(36160,pe)&&Je.drawBuffers&&J&&we.drawBuffers(z,pe),we.viewport(R),we.scissor(P),we.setScissorTest(D),Ke){const lt=ce.get(z.texture);ae.framebufferTexture2D(36160,36064,34069+Y,lt.__webglTexture,re)}else if(it){const lt=ce.get(z.texture),Dt=Y||0;ae.framebufferTextureLayer(36160,36064,lt.__webglTexture,re||0,Dt)}b=-1},this.readRenderTargetPixels=function(z,Y,re,J,pe,Ke,it){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ut=ce.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&it!==void 0&&(ut=ut[it]),ut){we.bindFramebuffer(36160,ut);try{const lt=z.texture,Dt=lt.format,wt=lt.type;if(Dt!==Di&&ue.convert(Dt)!==ae.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const St=wt===po&&(et.has("EXT_color_buffer_half_float")||Je.isWebGL2&&et.has("EXT_color_buffer_float"));if(wt!==_i&&ue.convert(wt)!==ae.getParameter(35738)&&!(wt===Hr&&(Je.isWebGL2||et.has("OES_texture_float")||et.has("WEBGL_color_buffer_float")))&&!St){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Y>=0&&Y<=z.width-J&&re>=0&&re<=z.height-pe&&ae.readPixels(Y,re,J,pe,ue.convert(Dt),ue.convert(wt),Ke)}finally{const lt=E!==null?ce.get(E).__webglFramebuffer:null;we.bindFramebuffer(36160,lt)}}},this.copyFramebufferToTexture=function(z,Y,re=0){if(Y.isFramebufferTexture!==!0){console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");return}const J=Math.pow(2,-re),pe=Math.floor(Y.image.width*J),Ke=Math.floor(Y.image.height*J);le.setTexture2D(Y,0),ae.copyTexSubImage2D(3553,re,0,0,z.x,z.y,pe,Ke),we.unbindTexture()},this.copyTextureToTexture=function(z,Y,re,J=0){const pe=Y.image.width,Ke=Y.image.height,it=ue.convert(re.format),ut=ue.convert(re.type);le.setTexture2D(re,0),ae.pixelStorei(37440,re.flipY),ae.pixelStorei(37441,re.premultiplyAlpha),ae.pixelStorei(3317,re.unpackAlignment),Y.isDataTexture?ae.texSubImage2D(3553,J,z.x,z.y,pe,Ke,it,ut,Y.image.data):Y.isCompressedTexture?ae.compressedTexSubImage2D(3553,J,z.x,z.y,Y.mipmaps[0].width,Y.mipmaps[0].height,it,Y.mipmaps[0].data):ae.texSubImage2D(3553,J,z.x,z.y,it,ut,Y.image),J===0&&re.generateMipmaps&&ae.generateMipmap(3553),we.unbindTexture()},this.copyTextureToTexture3D=function(z,Y,re,J,pe=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ke=z.max.x-z.min.x+1,it=z.max.y-z.min.y+1,ut=z.max.z-z.min.z+1,lt=ue.convert(J.format),Dt=ue.convert(J.type);let wt;if(J.isData3DTexture)le.setTexture3D(J,0),wt=32879;else if(J.isDataArrayTexture)le.setTexture2DArray(J,0),wt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ae.pixelStorei(37440,J.flipY),ae.pixelStorei(37441,J.premultiplyAlpha),ae.pixelStorei(3317,J.unpackAlignment);const St=ae.getParameter(3314),Yt=ae.getParameter(32878),$r=ae.getParameter(3316),Ps=ae.getParameter(3315),Ls=ae.getParameter(32877),Hi=re.isCompressedTexture?re.mipmaps[0]:re.image;ae.pixelStorei(3314,Hi.width),ae.pixelStorei(32878,Hi.height),ae.pixelStorei(3316,z.min.x),ae.pixelStorei(3315,z.min.y),ae.pixelStorei(32877,z.min.z),re.isDataTexture||re.isData3DTexture?ae.texSubImage3D(wt,pe,Y.x,Y.y,Y.z,Ke,it,ut,lt,Dt,Hi.data):re.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ae.compressedTexSubImage3D(wt,pe,Y.x,Y.y,Y.z,Ke,it,ut,lt,Hi.data)):ae.texSubImage3D(wt,pe,Y.x,Y.y,Y.z,Ke,it,ut,lt,Dt,Hi),ae.pixelStorei(3314,St),ae.pixelStorei(32878,Yt),ae.pixelStorei(3316,$r),ae.pixelStorei(3315,Ps),ae.pixelStorei(32877,Ls),pe===0&&J.generateMipmaps&&ae.generateMipmap(wt),we.unbindTexture()},this.initTexture=function(z){le.setTexture2D(z,0),we.unbindTexture()},this.resetState=function(){S=0,_=0,E=null,we.reset(),tt.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}zt.prototype.isWebGLRenderer=!0;class x3 extends zt{}x3.prototype.isWebGL1Renderer=!0;class bf{constructor(e,t=25e-5){this.name="",this.color=new Te(e),this.density=t}clone(){return new bf(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}bf.prototype.isFogExp2=!0;class Af{constructor(e,t=1,i=1e3){this.name="",this.color=new Te(e),this.near=t,this.far=i}clone(){return new Af(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Af.prototype.isFog=!0;class ws extends vt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}ws.prototype.isScene=!0;class Ua{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ou,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ni()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ni()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ni()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Ua.prototype.isInterleavedBuffer=!0;const Qn=new L;class To{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Qn.fromBufferAttribute(this,t),Qn.applyMatrix4(e),this.setXYZ(t,Qn.x,Qn.y,Qn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Qn.fromBufferAttribute(this,t),Qn.applyNormalMatrix(e),this.setXYZ(t,Qn.x,Qn.y,Qn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Qn.fromBufferAttribute(this,t),Qn.transformDirection(e),this.setXYZ(t,Qn.x,Qn.y,Qn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new mt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new To(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}To.prototype.isInterleavedBufferAttribute=!0;class cm extends pn{constructor(e){super(),this.type="SpriteMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}cm.prototype.isSpriteMaterial=!0;let wl;const fc=new L,Sl=new L,Ml=new L,El=new ne,dc=new ne,_3=new ke,gh=new L,hc=new L,vh=new L,VS=new ne,R0=new ne,WS=new ne;class fm extends vt{constructor(e){if(super(),this.type="Sprite",wl===void 0){wl=new Qe;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ua(t,5);wl.setIndex([0,1,2,0,2,3]),wl.setAttribute("position",new To(i,3,0,!1)),wl.setAttribute("uv",new To(i,2,3,!1))}this.geometry=wl,this.material=e!==void 0?e:new cm,this.center=new ne(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Sl.setFromMatrixScale(this.matrixWorld),_3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ml.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Sl.multiplyScalar(-Ml.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;yh(gh.set(-.5,-.5,0),Ml,o,Sl,r,s),yh(hc.set(.5,-.5,0),Ml,o,Sl,r,s),yh(vh.set(.5,.5,0),Ml,o,Sl,r,s),VS.set(0,0),R0.set(1,0),WS.set(1,1);let l=e.ray.intersectTriangle(gh,hc,vh,!1,fc);if(l===null&&(yh(hc.set(-.5,.5,0),Ml,o,Sl,r,s),R0.set(0,1),l=e.ray.intersectTriangle(gh,vh,hc,!1,fc),l===null))return;const c=e.ray.origin.distanceTo(fc);c<e.near||c>e.far||t.push({distance:c,point:fc.clone(),uv:fn.getUV(fc,gh,hc,vh,VS,R0,WS,new ne),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}fm.prototype.isSprite=!0;function yh(n,e,t,i,r,s){El.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(dc.x=s*El.x-r*El.y,dc.y=r*El.x+s*El.y):dc.copy(El),n.copy(e),n.x+=dc.x,n.y+=dc.y,n.applyMatrix4(_3)}const xh=new L,jS=new L;class w3 extends vt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){xh.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(xh);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){xh.setFromMatrixPosition(e.matrixWorld),jS.setFromMatrixPosition(this.matrixWorld);const i=xh.distanceTo(jS)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s&&i>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const qS=new L,XS=new Nt,YS=new Nt,kN=new L,ZS=new ke;class dm extends dn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ke,this.bindMatrixInverse=new ke}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;XS.fromBufferAttribute(r.attributes.skinIndex,e),YS.fromBufferAttribute(r.attributes.skinWeight,e),qS.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=YS.getComponent(s);if(o!==0){const l=XS.getComponent(s);ZS.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(kN.copy(qS).applyMatrix4(ZS),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}dm.prototype.isSkinnedMesh=!0;class hm extends vt{constructor(){super(),this.type="Bone"}}hm.prototype.isBone=!0;class Ea extends hn{constructor(e=null,t=1,i=1,r,s,o,l,c,f=Ut,d=Ut,p,m){super(null,o,l,c,f,d,r,s,p,m),this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Ea.prototype.isDataTexture=!0;const QS=new ke,BN=new ke;class pm{constructor(e=[],t=[]){this.uuid=Ni(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ke)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ke;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:BN;QS.multiplyMatrices(l,t[s]),QS.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new pm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Z2(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ea(t,e,e,Di,Hr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new hm),this.bones.push(o),this.boneInverses.push(new ke().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Pa extends mt{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Pa.prototype.isInstancedBufferAttribute=!0;const JS=new ke,KS=new ke,_h=[],pc=new dn;class Dx extends dn{constructor(e,t,i){super(e,t),this.instanceMatrix=new Pa(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(pc.geometry=this.geometry,pc.material=this.material,pc.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,JS),KS.multiplyMatrices(i,JS),pc.matrixWorld=KS,pc.raycast(e,_h);for(let o=0,l=_h.length;o<l;o++){const c=_h[o];c.instanceId=s,c.object=this,t.push(c)}_h.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Pa(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Dx.prototype.isInstancedMesh=!0;class Ln extends pn{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Te(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Ln.prototype.isLineBasicMaterial=!0;const $S=new L,eM=new L,tM=new ke,P0=new zo,wh=new No;class bs extends vt{constructor(e=new Qe,t=new Ln){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)$S.fromBufferAttribute(t,r-1),eM.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=$S.distanceTo(eM);e.setAttribute("lineDistance",new Fe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),wh.copy(i.boundingSphere),wh.applyMatrix4(r),wh.radius+=s,e.ray.intersectsSphere(wh)===!1)return;tM.copy(r).invert(),P0.copy(e.ray).applyMatrix4(tM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=new L,d=new L,p=new L,m=new L,g=this.isLineSegments?2:1;if(i.isBufferGeometry){const x=i.index,w=i.attributes.position;if(x!==null){const S=Math.max(0,o.start),_=Math.min(x.count,o.start+o.count);for(let E=S,b=_-1;E<b;E+=g){const A=x.getX(E),R=x.getX(E+1);if(f.fromBufferAttribute(w,A),d.fromBufferAttribute(w,R),P0.distanceSqToSegment(f,d,m,p)>c)continue;m.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(m);D<e.near||D>e.far||t.push({distance:D,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const S=Math.max(0,o.start),_=Math.min(w.count,o.start+o.count);for(let E=S,b=_-1;E<b;E+=g){if(f.fromBufferAttribute(w,E),d.fromBufferAttribute(w,E+1),P0.distanceSqToSegment(f,d,m,p)>c)continue;m.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(m);R<e.near||R>e.far||t.push({distance:R,point:p.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}bs.prototype.isLine=!0;const nM=new L,iM=new L;class wi extends bs{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)nM.fromBufferAttribute(t,r),iM.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+nM.distanceTo(iM);e.setAttribute("lineDistance",new Fe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}wi.prototype.isLineSegments=!0;class Ix extends bs{constructor(e,t){super(e,t),this.type="LineLoop"}}Ix.prototype.isLineLoop=!0;class Ha extends pn{constructor(e){super(),this.type="PointsMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Ha.prototype.isPointsMaterial=!0;const rM=new ke,yy=new zo,Sh=new No,Mh=new L;class Cf extends vt{constructor(e=new Qe,t=new Ha){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Sh.copy(i.boundingSphere),Sh.applyMatrix4(r),Sh.radius+=s,e.ray.intersectsSphere(Sh)===!1)return;rM.copy(r).invert(),yy.copy(e.ray).applyMatrix4(rM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l;if(i.isBufferGeometry){const f=i.index,p=i.attributes.position;if(f!==null){const m=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let x=m,y=g;x<y;x++){const w=f.getX(x);Mh.fromBufferAttribute(p,w),sM(Mh,w,c,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let x=m,y=g;x<y;x++)Mh.fromBufferAttribute(p,x),sM(Mh,x,c,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Cf.prototype.isPoints=!0;function sM(n,e,t,i,r,s,o){const l=yy.distanceSqToPoint(n);if(l<t){const c=new L;yy.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:o})}}class S3 extends hn{constructor(e,t,i,r,s,o,l,c,f){super(e,t,i,r,s,o,l,c,f),this.minFilter=o!==void 0?o:Pt,this.magFilter=s!==void 0?s:Pt,this.generateMipmaps=!1;const d=this;function p(){d.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}S3.prototype.isVideoTexture=!0;class M3 extends hn{constructor(e,t,i){super({width:e,height:t}),this.format=i,this.magFilter=Ut,this.minFilter=Ut,this.generateMipmaps=!1,this.needsUpdate=!0}}M3.prototype.isFramebufferTexture=!0;class Nx extends hn{constructor(e,t,i,r,s,o,l,c,f,d,p,m){super(null,o,l,c,f,d,r,s,p,m),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Nx.prototype.isCompressedTexture=!0;class E3 extends hn{constructor(e,t,i,r,s,o,l,c,f){super(e,t,i,r,s,o,l,c,f),this.needsUpdate=!0}}E3.prototype.isCanvasTexture=!0;class Fi{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,c=s-1,f;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),f=i[r]-o,f<0)l=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);const d=i[r],m=i[r+1]-d,g=(o-d)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),c=t||(o.isVector2?new ne:new L);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new L,r=[],s=[],o=[],l=new L,c=new ke;for(let g=0;g<=e;g++){const x=g/e;r[g]=this.getTangentAt(x,new L)}s[0]=new L,o[0]=new L;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);d<=f&&(f=d,i.set(1,0,0)),p<=f&&(f=p,i.set(0,1,0)),m<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),l.crossVectors(r[g-1],r[g]),l.length()>Number.EPSILON){l.normalize();const x=Math.acos(cn(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(c.makeRotationAxis(l,x))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(cn(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(g=-g);for(let x=1;x<=e;x++)s[x].applyMatrix4(c.makeRotationAxis(r[x],g*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Rf extends Fi{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t){const i=t||new ne,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=c-this.aX,g=f-this.aY;c=m*d-g*p+this.aX,f=m*p+g*d+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Rf.prototype.isEllipseCurve=!0;class zx extends Rf{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}zx.prototype.isArcCurve=!0;function Fx(){let n=0,e=0,t=0,i=0;function r(s,o,l,c){n=s,e=l,t=-3*s+3*o-2*l-c,i=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,f){r(o,l,f*(l-s),f*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,f,d,p){let m=(o-s)/f-(l-s)/(f+d)+(l-o)/d,g=(l-o)/d-(c-o)/(d+p)+(c-l)/p;m*=d,g*=d,r(o,l,m,g)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const Eh=new L,L0=new Fx,D0=new Fx,I0=new Fx;class kx extends Fi{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new L){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let f,d;this.closed||l>0?f=r[(l-1)%s]:(Eh.subVectors(r[0],r[1]).add(r[0]),f=Eh);const p=r[l%s],m=r[(l+1)%s];if(this.closed||l+2<s?d=r[(l+2)%s]:(Eh.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Eh),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(p),g),y=Math.pow(p.distanceToSquared(m),g),w=Math.pow(m.distanceToSquared(d),g);y<1e-4&&(y=1),x<1e-4&&(x=y),w<1e-4&&(w=y),L0.initNonuniformCatmullRom(f.x,p.x,m.x,d.x,x,y,w),D0.initNonuniformCatmullRom(f.y,p.y,m.y,d.y,x,y,w),I0.initNonuniformCatmullRom(f.z,p.z,m.z,d.z,x,y,w)}else this.curveType==="catmullrom"&&(L0.initCatmullRom(f.x,p.x,m.x,d.x,this.tension),D0.initCatmullRom(f.y,p.y,m.y,d.y,this.tension),I0.initCatmullRom(f.z,p.z,m.z,d.z,this.tension));return i.set(L0.calc(c),D0.calc(c),I0.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new L().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}kx.prototype.isCatmullRomCurve3=!0;function oM(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*l+s*n+t}function ON(n,e){const t=1-n;return t*t*e}function UN(n,e){return 2*(1-n)*n*e}function HN(n,e){return n*n*e}function Ic(n,e,t,i){return ON(n,e)+UN(n,t)+HN(n,i)}function GN(n,e){const t=1-n;return t*t*t*e}function VN(n,e){const t=1-n;return 3*t*t*n*e}function WN(n,e){return 3*(1-n)*n*n*e}function jN(n,e){return n*n*n*e}function Nc(n,e,t,i,r){return GN(n,e)+VN(n,t)+WN(n,i)+jN(n,r)}class mm extends Fi{constructor(e=new ne,t=new ne,i=new ne,r=new ne){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ne){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(Nc(e,r.x,s.x,o.x,l.x),Nc(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}mm.prototype.isCubicBezierCurve=!0;class Bx extends Fi{constructor(e=new L,t=new L,i=new L,r=new L){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new L){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(Nc(e,r.x,s.x,o.x,l.x),Nc(e,r.y,s.y,o.y,l.y),Nc(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Bx.prototype.isCubicBezierCurve3=!0;class Pf extends Fi{constructor(e=new ne,t=new ne){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ne){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new ne;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Pf.prototype.isLineCurve=!0;class T3 extends Fi{constructor(e=new L,t=new L){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new L){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gm extends Fi{constructor(e=new ne,t=new ne,i=new ne){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ne){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ic(e,r.x,s.x,o.x),Ic(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}gm.prototype.isQuadraticBezierCurve=!0;class vm extends Fi{constructor(e=new L,t=new L,i=new L){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new L){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(Ic(e,r.x,s.x,o.x),Ic(e,r.y,s.y,o.y),Ic(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}vm.prototype.isQuadraticBezierCurve3=!0;class ym extends Fi{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ne){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,c=r[o===0?o:o-1],f=r[o],d=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return i.set(oM(l,c.x,f.x,d.x,p.x),oM(l,c.y,f.y,d.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ne().fromArray(r))}return this}}ym.prototype.isSplineCurve=!0;var Ox=Object.freeze({__proto__:null,ArcCurve:zx,CatmullRomCurve3:kx,CubicBezierCurve:mm,CubicBezierCurve3:Bx,EllipseCurve:Rf,LineCurve:Pf,LineCurve3:T3,QuadraticBezierCurve:gm,QuadraticBezierCurve3:vm,SplineCurve:ym});class b3 extends Fi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Pf(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,l=this.curves[s],c=l.getLength(),f=c===0?0:1-o/c;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let f=0;f<c.length;f++){const d=c[f];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Ox[r.type]().fromJSON(r))}return this}}class uu extends b3{constructor(e){super(),this.type="Path",this.currentPoint=new ne,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Pf(this.currentPoint.clone(),new ne(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new gm(this.currentPoint.clone(),new ne(e,t),new ne(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new mm(this.currentPoint.clone(),new ne(e,t),new ne(i,r),new ne(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new ym(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,i,r,s,o,l,c),this}absellipse(e,t,i,r,s,o,l,c){const f=new Rf(e,t,i,r,s,o,l,c);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class La extends Qe{constructor(e=[new ne(0,.5),new ne(.5,0),new ne(0,-.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=cn(r,0,Math.PI*2);const s=[],o=[],l=[],c=[],f=[],d=1/t,p=new L,m=new ne,g=new L,x=new L,y=new L;let w=0,S=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:w=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,g.x=S*1,g.y=-w,g.z=S*0,y.copy(g),g.normalize(),c.push(g.x,g.y,g.z);break;case e.length-1:c.push(y.x,y.y,y.z);break;default:w=e[_+1].x-e[_].x,S=e[_+1].y-e[_].y,g.x=S*1,g.y=-w,g.z=S*0,x.copy(g),g.x+=y.x,g.y+=y.y,g.z+=y.z,g.normalize(),c.push(g.x,g.y,g.z),y.copy(x)}for(let _=0;_<=t;_++){const E=i+_*d*r,b=Math.sin(E),A=Math.cos(E);for(let R=0;R<=e.length-1;R++){p.x=e[R].x*b,p.y=e[R].y,p.z=e[R].x*A,o.push(p.x,p.y,p.z),m.x=_/t,m.y=R/(e.length-1),l.push(m.x,m.y);const P=c[3*R+0]*b,D=c[3*R+1],V=c[3*R+0]*A;f.push(P,D,V)}}for(let _=0;_<t;_++)for(let E=0;E<e.length-1;E++){const b=E+_*e.length,A=b,R=b+e.length,P=b+e.length+1,D=b+1;s.push(A,R,D),s.push(P,D,R)}this.setIndex(s),this.setAttribute("position",new Fe(o,3)),this.setAttribute("uv",new Fe(l,2)),this.setAttribute("normal",new Fe(f,3))}static fromJSON(e){return new La(e.points,e.segments,e.phiStart,e.phiLength)}}class cu extends La{constructor(e=1,t=1,i=4,r=8){const s=new uu;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new cu(e.radius,e.length,e.capSegments,e.radialSegments)}}class fu extends Qe{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],c=[],f=new L,d=new ne;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const g=i+p/t*r;f.x=e*Math.cos(g),f.y=e*Math.sin(g),o.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(o[m]/e+1)/2,d.y=(o[m+1]/e+1)/2,c.push(d.x,d.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Fe(o,3)),this.setAttribute("normal",new Fe(l,3)),this.setAttribute("uv",new Fe(c,2))}static fromJSON(e){return new fu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class bo extends Qe{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const f=this;r=Math.floor(r),s=Math.floor(s);const d=[],p=[],m=[],g=[];let x=0;const y=[],w=i/2;let S=0;_(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(d),this.setAttribute("position",new Fe(p,3)),this.setAttribute("normal",new Fe(m,3)),this.setAttribute("uv",new Fe(g,2));function _(){const b=new L,A=new L;let R=0;const P=(t-e)/i;for(let D=0;D<=s;D++){const V=[],U=D/s,C=U*(t-e)+e;for(let k=0;k<=r;k++){const ee=k/r,W=ee*c+l,K=Math.sin(W),X=Math.cos(W);A.x=C*K,A.y=-U*i+w,A.z=C*X,p.push(A.x,A.y,A.z),b.set(K,P,X).normalize(),m.push(b.x,b.y,b.z),g.push(ee,1-U),V.push(x++)}y.push(V)}for(let D=0;D<r;D++)for(let V=0;V<s;V++){const U=y[V][D],C=y[V+1][D],k=y[V+1][D+1],ee=y[V][D+1];d.push(U,C,ee),d.push(C,k,ee),R+=6}f.addGroup(S,R,0),S+=R}function E(b){const A=x,R=new ne,P=new L;let D=0;const V=b===!0?e:t,U=b===!0?1:-1;for(let k=1;k<=r;k++)p.push(0,w*U,0),m.push(0,U,0),g.push(.5,.5),x++;const C=x;for(let k=0;k<=r;k++){const W=k/r*c+l,K=Math.cos(W),X=Math.sin(W);P.x=V*X,P.y=w*U,P.z=V*K,p.push(P.x,P.y,P.z),m.push(0,U,0),R.x=K*.5+.5,R.y=X*.5*U+.5,g.push(R.x,R.y),x++}for(let k=0;k<r;k++){const ee=A+k,W=C+k;b===!0?d.push(W,W+1,ee):d.push(W+1,W,ee),D+=3}f.addGroup(S,D,b===!0?1:2),S+=D}}static fromJSON(e){return new bo(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class du extends bo{constructor(e=1,t=1,i=8,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new du(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Yr extends Qe{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),f(i),d(),this.setAttribute("position",new Fe(s,3)),this.setAttribute("normal",new Fe(s.slice(),3)),this.setAttribute("uv",new Fe(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(_){const E=new L,b=new L,A=new L;for(let R=0;R<t.length;R+=3)g(t[R+0],E),g(t[R+1],b),g(t[R+2],A),c(E,b,A,_)}function c(_,E,b,A){const R=A+1,P=[];for(let D=0;D<=R;D++){P[D]=[];const V=_.clone().lerp(b,D/R),U=E.clone().lerp(b,D/R),C=R-D;for(let k=0;k<=C;k++)k===0&&D===R?P[D][k]=V:P[D][k]=V.clone().lerp(U,k/C)}for(let D=0;D<R;D++)for(let V=0;V<2*(R-D)-1;V++){const U=Math.floor(V/2);V%2===0?(m(P[D][U+1]),m(P[D+1][U]),m(P[D][U])):(m(P[D][U+1]),m(P[D+1][U+1]),m(P[D+1][U]))}}function f(_){const E=new L;for(let b=0;b<s.length;b+=3)E.x=s[b+0],E.y=s[b+1],E.z=s[b+2],E.normalize().multiplyScalar(_),s[b+0]=E.x,s[b+1]=E.y,s[b+2]=E.z}function d(){const _=new L;for(let E=0;E<s.length;E+=3){_.x=s[E+0],_.y=s[E+1],_.z=s[E+2];const b=w(_)/2/Math.PI+.5,A=S(_)/Math.PI+.5;o.push(b,1-A)}x(),p()}function p(){for(let _=0;_<o.length;_+=6){const E=o[_+0],b=o[_+2],A=o[_+4],R=Math.max(E,b,A),P=Math.min(E,b,A);R>.9&&P<.1&&(E<.2&&(o[_+0]+=1),b<.2&&(o[_+2]+=1),A<.2&&(o[_+4]+=1))}}function m(_){s.push(_.x,_.y,_.z)}function g(_,E){const b=_*3;E.x=e[b+0],E.y=e[b+1],E.z=e[b+2]}function x(){const _=new L,E=new L,b=new L,A=new L,R=new ne,P=new ne,D=new ne;for(let V=0,U=0;V<s.length;V+=9,U+=6){_.set(s[V+0],s[V+1],s[V+2]),E.set(s[V+3],s[V+4],s[V+5]),b.set(s[V+6],s[V+7],s[V+8]),R.set(o[U+0],o[U+1]),P.set(o[U+2],o[U+3]),D.set(o[U+4],o[U+5]),A.copy(_).add(E).add(b).divideScalar(3);const C=w(A);y(R,U+0,_,C),y(P,U+2,E,C),y(D,U+4,b,C)}}function y(_,E,b,A){A<0&&_.x===1&&(o[E]=_.x-1),b.x===0&&b.z===0&&(o[E]=A/2/Math.PI+.5)}function w(_){return Math.atan2(_.z,-_.x)}function S(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}static fromJSON(e){return new Yr(e.vertices,e.indices,e.radius,e.details)}}class hu extends Yr{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hu(e.radius,e.detail)}}const Th=new L,bh=new L,N0=new L,Ah=new fn;class Ux extends Qe{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(wa*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,f=[0,0,0],d=["a","b","c"],p=new Array(3),m={},g=[];for(let x=0;x<c;x+=3){o?(f[0]=o.getX(x),f[1]=o.getX(x+1),f[2]=o.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:y,b:w,c:S}=Ah;if(y.fromBufferAttribute(l,f[0]),w.fromBufferAttribute(l,f[1]),S.fromBufferAttribute(l,f[2]),Ah.getNormal(N0),p[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,p[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,p[2]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let _=0;_<3;_++){const E=(_+1)%3,b=p[_],A=p[E],R=Ah[d[_]],P=Ah[d[E]],D=`${b}_${A}`,V=`${A}_${b}`;V in m&&m[V]?(N0.dot(m[V].normal)<=s&&(g.push(R.x,R.y,R.z),g.push(P.x,P.y,P.z)),m[V]=null):D in m||(m[D]={index0:f[_],index1:f[E],normal:N0.clone()})}}for(const x in m)if(m[x]){const{index0:y,index1:w}=m[x];Th.fromBufferAttribute(l,y),bh.fromBufferAttribute(l,w),g.push(Th.x,Th.y,Th.z),g.push(bh.x,bh.y,bh.z)}this.setAttribute("position",new Fe(g,3))}}}class Wr extends uu{constructor(e){super(e),this.uuid=Ni(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new uu().fromJSON(r))}return this}}const qN={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=A3(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,f,d,p,m,g;if(i&&(s=JN(n,e,s,t)),n.length>80*t){l=f=n[0],c=d=n[1];for(let x=t;x<r;x+=t)p=n[x],m=n[x+1],p<l&&(l=p),m<c&&(c=m),p>f&&(f=p),m>d&&(d=m);g=Math.max(f-l,d-c),g=g!==0?1/g:0}return ff(s,o,t,l,c,g),o}};function A3(n,e,t,i,r){let s,o;if(r===lz(n,e,t,i)>0)for(s=e;s<t;s+=i)o=aM(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=aM(s,n[s],n[s+1],o);return o&&xm(o,o.next)&&(hf(o),o=o.next),o}function Ao(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(xm(t,t.next)||tn(t.prev,t,t.next)===0)){if(hf(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ff(n,e,t,i,r,s,o){if(!n)return;!o&&s&&nz(n,i,r,s);let l=n,c,f;for(;n.prev!==n.next;){if(c=n.prev,f=n.next,s?YN(n,i,r,s):XN(n)){e.push(c.i/t),e.push(n.i/t),e.push(f.i/t),hf(n),n=f.next,l=f.next;continue}if(n=f,n===l){o?o===1?(n=ZN(Ao(n),e,t),ff(n,e,t,i,r,s,2)):o===2&&QN(n,e,t,i,r,s):ff(Ao(n),e,t,i,r,s,1);break}}}function XN(n){const e=n.prev,t=n,i=n.next;if(tn(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Gl(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&tn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function YN(n,e,t,i){const r=n.prev,s=n,o=n.next;if(tn(r,s,o)>=0)return!1;const l=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,c=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,f=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,d=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,p=xy(l,c,e,t,i),m=xy(f,d,e,t,i);let g=n.prevZ,x=n.nextZ;for(;g&&g.z>=p&&x&&x.z<=m;){if(g!==n.prev&&g!==n.next&&Gl(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&tn(g.prev,g,g.next)>=0||(g=g.prevZ,x!==n.prev&&x!==n.next&&Gl(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&tn(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;g&&g.z>=p;){if(g!==n.prev&&g!==n.next&&Gl(r.x,r.y,s.x,s.y,o.x,o.y,g.x,g.y)&&tn(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;x&&x.z<=m;){if(x!==n.prev&&x!==n.next&&Gl(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&tn(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function ZN(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!xm(r,s)&&C3(r,i,i.next,s)&&df(r,s)&&df(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),hf(i),hf(i.next),i=n=s),i=i.next}while(i!==n);return Ao(i)}function QN(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&sz(o,l)){let c=R3(o,l);o=Ao(o,o.next),c=Ao(c,c.next),ff(o,e,t,i,r,s),ff(c,e,t,i,r,s);return}l=l.next}o=o.next}while(o!==n)}function JN(n,e,t,i){const r=[];let s,o,l,c,f;for(s=0,o=e.length;s<o;s++)l=e[s]*i,c=s<o-1?e[s+1]*i:n.length,f=A3(n,l,c,i,!1),f===f.next&&(f.steiner=!0),r.push(rz(f));for(r.sort(KN),s=0;s<r.length;s++)$N(r[s],t),t=Ao(t,t.next);return t}function KN(n,e){return n.x-e.x}function $N(n,e){if(e=ez(n,e),e){const t=R3(e,n);Ao(e,e.next),Ao(t,t.next)}}function ez(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const m=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=i&&m>s){if(s=m,m===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const l=o,c=o.x,f=o.y;let d=1/0,p;t=o;do i>=t.x&&t.x>=c&&i!==t.x&&Gl(r<f?i:s,r,c,f,r<f?s:i,r,t.x,t.y)&&(p=Math.abs(r-t.y)/(i-t.x),df(t,n)&&(p<d||p===d&&(t.x>o.x||t.x===o.x&&tz(o,t)))&&(o=t,d=p)),t=t.next;while(t!==l);return o}function tz(n,e){return tn(n.prev,n,e.prev)<0&&tn(e.next,n,n.next)<0}function nz(n,e,t,i){let r=n;do r.z===null&&(r.z=xy(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,iz(r)}function iz(n){let e,t,i,r,s,o,l,c,f=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,l=0,e=0;e<f&&(l++,i=i.nextZ,!!i);e++);for(c=f;l>0||c>0&&i;)l!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(o>1);return n}function xy(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function rz(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Gl(n,e,t,i,r,s,o,l){return(r-o)*(e-l)-(n-o)*(s-l)>=0&&(n-o)*(i-l)-(t-o)*(e-l)>=0&&(t-o)*(s-l)-(r-o)*(i-l)>=0}function sz(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!oz(n,e)&&(df(n,e)&&df(e,n)&&az(n,e)&&(tn(n.prev,n,e.prev)||tn(n,e.prev,e))||xm(n,e)&&tn(n.prev,n,n.next)>0&&tn(e.prev,e,e.next)>0)}function tn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function xm(n,e){return n.x===e.x&&n.y===e.y}function C3(n,e,t,i){const r=Rh(tn(n,e,t)),s=Rh(tn(n,e,i)),o=Rh(tn(t,i,n)),l=Rh(tn(t,i,e));return!!(r!==s&&o!==l||r===0&&Ch(n,t,e)||s===0&&Ch(n,i,e)||o===0&&Ch(t,n,i)||l===0&&Ch(t,e,i))}function Ch(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Rh(n){return n>0?1:n<0?-1:0}function oz(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&C3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function df(n,e){return tn(n.prev,n,n.next)<0?tn(n,e,n.next)>=0&&tn(n,n.prev,e)>=0:tn(n,e,n.prev)<0||tn(n,n.next,e)<0}function az(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function R3(n,e){const t=new _y(n.i,n.x,n.y),i=new _y(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function aM(n,e,t,i){const r=new _y(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function hf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function _y(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lz(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class jr{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return jr.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];lM(e),uM(i,e);let o=e.length;t.forEach(lM);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,uM(i,t[c]);const l=qN.triangulate(i,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function lM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function uM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Zr extends Qe{constructor(e=new Wr([new ne(.5,.5),new ne(-.5,.5),new ne(-.5,-.5),new ne(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];o(f)}this.setAttribute("position",new Fe(r,3)),this.setAttribute("uv",new Fe(s,2)),this.computeVertexNormals();function o(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1;let p=t.depth!==void 0?t.depth:1,m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:g-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:uz;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),p=t.amount);let E,b=!1,A,R,P,D;S&&(E=S.getSpacedPoints(d),b=!0,m=!1,A=S.computeFrenetFrames(d,!1),R=new L,P=new L,D=new L),m||(w=0,g=0,x=0,y=0);const V=l.extractPoints(f);let U=V.shape;const C=V.holes;if(!jr.isClockWise(U)){U=U.reverse();for(let ce=0,le=C.length;ce<le;ce++){const ye=C[ce];jr.isClockWise(ye)&&(C[ce]=ye.reverse())}}const ee=jr.triangulateShape(U,C),W=U;for(let ce=0,le=C.length;ce<le;ce++){const ye=C[ce];U=U.concat(ye)}function K(ce,le,ye){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().multiplyScalar(ye).add(ce)}const X=U.length,$=ee.length;function O(ce,le,ye){let ze,Re,$e;const We=ce.x-le.x,Ge=ce.y-le.y,Tt=ye.x-ce.x,Lt=ye.y-ce.y,B=We*We+Ge*Ge,I=We*Lt-Ge*Tt;if(Math.abs(I)>Number.EPSILON){const ie=Math.sqrt(B),me=Math.sqrt(Tt*Tt+Lt*Lt),be=le.x-Ge/ie,De=le.y+We/ie,je=ye.x-Lt/me,ue=ye.y+Tt/me,tt=((je-be)*Lt-(ue-De)*Tt)/(We*Lt-Ge*Tt);ze=be+We*tt-ce.x,Re=De+Ge*tt-ce.y;const nt=ze*ze+Re*Re;if(nt<=2)return new ne(ze,Re);$e=Math.sqrt(nt/2)}else{let ie=!1;We>Number.EPSILON?Tt>Number.EPSILON&&(ie=!0):We<-Number.EPSILON?Tt<-Number.EPSILON&&(ie=!0):Math.sign(Ge)===Math.sign(Lt)&&(ie=!0),ie?(ze=-Ge,Re=We,$e=Math.sqrt(B)):(ze=We,Re=Ge,$e=Math.sqrt(B/2))}return new ne(ze/$e,Re/$e)}const q=[];for(let ce=0,le=W.length,ye=le-1,ze=ce+1;ce<le;ce++,ye++,ze++)ye===le&&(ye=0),ze===le&&(ze=0),q[ce]=O(W[ce],W[ye],W[ze]);const Q=[];let oe,de=q.concat();for(let ce=0,le=C.length;ce<le;ce++){const ye=C[ce];oe=[];for(let ze=0,Re=ye.length,$e=Re-1,We=ze+1;ze<Re;ze++,$e++,We++)$e===Re&&($e=0),We===Re&&(We=0),oe[ze]=O(ye[ze],ye[$e],ye[We]);Q.push(oe),de=de.concat(oe)}for(let ce=0;ce<w;ce++){const le=ce/w,ye=g*Math.cos(le*Math.PI/2),ze=x*Math.sin(le*Math.PI/2)+y;for(let Re=0,$e=W.length;Re<$e;Re++){const We=K(W[Re],q[Re],ze);at(We.x,We.y,-ye)}for(let Re=0,$e=C.length;Re<$e;Re++){const We=C[Re];oe=Q[Re];for(let Ge=0,Tt=We.length;Ge<Tt;Ge++){const Lt=K(We[Ge],oe[Ge],ze);at(Lt.x,Lt.y,-ye)}}}const ve=x+y;for(let ce=0;ce<X;ce++){const le=m?K(U[ce],de[ce],ve):U[ce];b?(P.copy(A.normals[0]).multiplyScalar(le.x),R.copy(A.binormals[0]).multiplyScalar(le.y),D.copy(E[0]).add(P).add(R),at(D.x,D.y,D.z)):at(le.x,le.y,0)}for(let ce=1;ce<=d;ce++)for(let le=0;le<X;le++){const ye=m?K(U[le],de[le],ve):U[le];b?(P.copy(A.normals[ce]).multiplyScalar(ye.x),R.copy(A.binormals[ce]).multiplyScalar(ye.y),D.copy(E[ce]).add(P).add(R),at(D.x,D.y,D.z)):at(ye.x,ye.y,p/d*ce)}for(let ce=w-1;ce>=0;ce--){const le=ce/w,ye=g*Math.cos(le*Math.PI/2),ze=x*Math.sin(le*Math.PI/2)+y;for(let Re=0,$e=W.length;Re<$e;Re++){const We=K(W[Re],q[Re],ze);at(We.x,We.y,p+ye)}for(let Re=0,$e=C.length;Re<$e;Re++){const We=C[Re];oe=Q[Re];for(let Ge=0,Tt=We.length;Ge<Tt;Ge++){const Lt=K(We[Ge],oe[Ge],ze);b?at(Lt.x,Lt.y+E[d-1].y,E[d-1].x+ye):at(Lt.x,Lt.y,p+ye)}}}Ye(),Ue();function Ye(){const ce=r.length/3;if(m){let le=0,ye=X*le;for(let ze=0;ze<$;ze++){const Re=ee[ze];et(Re[2]+ye,Re[1]+ye,Re[0]+ye)}le=d+w*2,ye=X*le;for(let ze=0;ze<$;ze++){const Re=ee[ze];et(Re[0]+ye,Re[1]+ye,Re[2]+ye)}}else{for(let le=0;le<$;le++){const ye=ee[le];et(ye[2],ye[1],ye[0])}for(let le=0;le<$;le++){const ye=ee[le];et(ye[0]+X*d,ye[1]+X*d,ye[2]+X*d)}}i.addGroup(ce,r.length/3-ce,0)}function Ue(){const ce=r.length/3;let le=0;ae(W,le),le+=W.length;for(let ye=0,ze=C.length;ye<ze;ye++){const Re=C[ye];ae(Re,le),le+=Re.length}i.addGroup(ce,r.length/3-ce,1)}function ae(ce,le){let ye=ce.length;for(;--ye>=0;){const ze=ye;let Re=ye-1;Re<0&&(Re=ce.length-1);for(let $e=0,We=d+w*2;$e<We;$e++){const Ge=X*$e,Tt=X*($e+1),Lt=le+ze+Ge,B=le+Re+Ge,I=le+Re+Tt,ie=le+ze+Tt;Je(Lt,B,I,ie)}}}function at(ce,le,ye){c.push(ce),c.push(le),c.push(ye)}function et(ce,le,ye){we(ce),we(le),we(ye);const ze=r.length/3,Re=_.generateTopUV(i,r,ze-3,ze-2,ze-1);Ze(Re[0]),Ze(Re[1]),Ze(Re[2])}function Je(ce,le,ye,ze){we(ce),we(le),we(ze),we(le),we(ye),we(ze);const Re=r.length/3,$e=_.generateSideWallUV(i,r,Re-6,Re-3,Re-2,Re-1);Ze($e[0]),Ze($e[1]),Ze($e[3]),Ze($e[1]),Ze($e[2]),Ze($e[3])}function we(ce){r.push(c[ce*3+0]),r.push(c[ce*3+1]),r.push(c[ce*3+2])}function Ze(ce){s.push(ce.x),s.push(ce.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return cz(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Ox[r.type]().fromJSON(r)),new Zr(i,e.options)}}const uz={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],c=e[i*3+1],f=e[r*3],d=e[r*3+1];return[new ne(s,o),new ne(l,c),new ne(f,d)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[i*3],d=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],x=e[r*3+2],y=e[s*3],w=e[s*3+1],S=e[s*3+2];return Math.abs(l-d)<Math.abs(o-f)?[new ne(o,1-c),new ne(f,1-p),new ne(m,1-x),new ne(y,1-S)]:[new ne(l,1-c),new ne(d,1-p),new ne(g,1-x),new ne(w,1-S)]}};function cz(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class pu extends Yr{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pu(e.radius,e.detail)}}class Da extends Yr{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Da(e.radius,e.detail)}}class mu extends Qe{constructor(e=.5,t=1,i=8,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],f=[],d=[];let p=e;const m=(t-e)/r,g=new L,x=new ne;for(let y=0;y<=r;y++){for(let w=0;w<=i;w++){const S=s+w/i*o;g.x=p*Math.cos(S),g.y=p*Math.sin(S),c.push(g.x,g.y,g.z),f.push(0,0,1),x.x=(g.x/t+1)/2,x.y=(g.y/t+1)/2,d.push(x.x,x.y)}p+=m}for(let y=0;y<r;y++){const w=y*(i+1);for(let S=0;S<i;S++){const _=S+w,E=_,b=_+i+1,A=_+i+2,R=_+1;l.push(E,b,R),l.push(b,A,R)}}this.setIndex(l),this.setAttribute("position",new Fe(c,3)),this.setAttribute("normal",new Fe(f,3)),this.setAttribute("uv",new Fe(d,2))}static fromJSON(e){return new mu(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ia extends Qe{constructor(e=new Wr([new ne(0,.5),new ne(-.5,-.5),new ne(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(l,c,d),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new Fe(r,3)),this.setAttribute("normal",new Fe(s,3)),this.setAttribute("uv",new Fe(o,2));function f(d){const p=r.length/3,m=d.extractPoints(t);let g=m.shape;const x=m.holes;jr.isClockWise(g)===!1&&(g=g.reverse());for(let w=0,S=x.length;w<S;w++){const _=x[w];jr.isClockWise(_)===!0&&(x[w]=_.reverse())}const y=jr.triangulateShape(g,x);for(let w=0,S=x.length;w<S;w++){const _=x[w];g=g.concat(_)}for(let w=0,S=g.length;w<S;w++){const _=g[w];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let w=0,S=y.length;w<S;w++){const _=y[w],E=_[0]+p,b=_[1]+p,A=_[2]+p;i.push(E,b,A),c+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return fz(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Ia(i,e.curveSegments)}}function fz(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Na extends Qe{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+l,Math.PI);let f=0;const d=[],p=new L,m=new L,g=[],x=[],y=[],w=[];for(let S=0;S<=i;S++){const _=[],E=S/i;let b=0;S==0&&o==0?b=.5/t:S==i&&c==Math.PI&&(b=-.5/t);for(let A=0;A<=t;A++){const R=A/t;p.x=-e*Math.cos(r+R*s)*Math.sin(o+E*l),p.y=e*Math.cos(o+E*l),p.z=e*Math.sin(r+R*s)*Math.sin(o+E*l),x.push(p.x,p.y,p.z),m.copy(p).normalize(),y.push(m.x,m.y,m.z),w.push(R+b,1-E),_.push(f++)}d.push(_)}for(let S=0;S<i;S++)for(let _=0;_<t;_++){const E=d[S][_+1],b=d[S][_],A=d[S+1][_],R=d[S+1][_+1];(S!==0||o>0)&&g.push(E,b,R),(S!==i-1||c<Math.PI)&&g.push(b,A,R)}this.setIndex(g),this.setAttribute("position",new Fe(x,3)),this.setAttribute("normal",new Fe(y,3)),this.setAttribute("uv",new Fe(w,2))}static fromJSON(e){return new Na(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class gu extends Yr{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new gu(e.radius,e.detail)}}class vu extends Qe{constructor(e=1,t=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],f=[],d=new L,p=new L,m=new L;for(let g=0;g<=i;g++)for(let x=0;x<=r;x++){const y=x/r*s,w=g/i*Math.PI*2;p.x=(e+t*Math.cos(w))*Math.cos(y),p.y=(e+t*Math.cos(w))*Math.sin(y),p.z=t*Math.sin(w),l.push(p.x,p.y,p.z),d.x=e*Math.cos(y),d.y=e*Math.sin(y),m.subVectors(p,d).normalize(),c.push(m.x,m.y,m.z),f.push(x/r),f.push(g/i)}for(let g=1;g<=i;g++)for(let x=1;x<=r;x++){const y=(r+1)*g+x-1,w=(r+1)*(g-1)+x-1,S=(r+1)*(g-1)+x,_=(r+1)*g+x;o.push(y,w,_),o.push(w,S,_)}this.setIndex(o),this.setAttribute("position",new Fe(l,3)),this.setAttribute("normal",new Fe(c,3)),this.setAttribute("uv",new Fe(f,2))}static fromJSON(e){return new vu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class yu extends Qe{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],f=[],d=[],p=new L,m=new L,g=new L,x=new L,y=new L,w=new L,S=new L;for(let E=0;E<=i;++E){const b=E/i*s*Math.PI*2;_(b,s,o,e,g),_(b+.01,s,o,e,x),w.subVectors(x,g),S.addVectors(x,g),y.crossVectors(w,S),S.crossVectors(y,w),y.normalize(),S.normalize();for(let A=0;A<=r;++A){const R=A/r*Math.PI*2,P=-t*Math.cos(R),D=t*Math.sin(R);p.x=g.x+(P*S.x+D*y.x),p.y=g.y+(P*S.y+D*y.y),p.z=g.z+(P*S.z+D*y.z),c.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),f.push(m.x,m.y,m.z),d.push(E/i),d.push(A/r)}}for(let E=1;E<=i;E++)for(let b=1;b<=r;b++){const A=(r+1)*(E-1)+(b-1),R=(r+1)*E+(b-1),P=(r+1)*E+b,D=(r+1)*(E-1)+b;l.push(A,R,D),l.push(R,P,D)}this.setIndex(l),this.setAttribute("position",new Fe(c,3)),this.setAttribute("normal",new Fe(f,3)),this.setAttribute("uv",new Fe(d,2));function _(E,b,A,R,P){const D=Math.cos(E),V=Math.sin(E),U=A/b*E,C=Math.cos(U);P.x=R*(2+C)*.5*D,P.y=R*(2+C)*V*.5,P.z=R*Math.sin(U)*.5}}static fromJSON(e){return new yu(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class xu extends Qe{constructor(e=new vm(new L(-1,-1,0),new L(-1,1,0),new L(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new L,c=new L,f=new ne;let d=new L;const p=[],m=[],g=[],x=[];y(),this.setIndex(x),this.setAttribute("position",new Fe(p,3)),this.setAttribute("normal",new Fe(m,3)),this.setAttribute("uv",new Fe(g,2));function y(){for(let E=0;E<t;E++)w(E);w(s===!1?t:0),_(),S()}function w(E){d=e.getPointAt(E/t,d);const b=o.normals[E],A=o.binormals[E];for(let R=0;R<=r;R++){const P=R/r*Math.PI*2,D=Math.sin(P),V=-Math.cos(P);c.x=V*b.x+D*A.x,c.y=V*b.y+D*A.y,c.z=V*b.z+D*A.z,c.normalize(),m.push(c.x,c.y,c.z),l.x=d.x+i*c.x,l.y=d.y+i*c.y,l.z=d.z+i*c.z,p.push(l.x,l.y,l.z)}}function S(){for(let E=1;E<=t;E++)for(let b=1;b<=r;b++){const A=(r+1)*(E-1)+(b-1),R=(r+1)*E+(b-1),P=(r+1)*E+b,D=(r+1)*(E-1)+b;x.push(A,R,D),x.push(R,P,D)}}function _(){for(let E=0;E<=t;E++)for(let b=0;b<=r;b++)f.x=E/t,f.y=b/r,g.push(f.x,f.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new xu(new Ox[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Hx extends Qe{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new L,s=new L;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,d=c.length;f<d;++f){const p=c[f],m=p.start,g=p.count;for(let x=m,y=m+g;x<y;x+=3)for(let w=0;w<3;w++){const S=l.getX(x+w),_=l.getX(x+(w+1)%3);r.fromBufferAttribute(o,S),s.fromBufferAttribute(o,_),cM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let f=0;f<3;f++){const d=3*l+f,p=3*l+(f+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,p),cM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Fe(t,3))}}}function cM(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var fM=Object.freeze({__proto__:null,BoxGeometry:Ts,BoxBufferGeometry:Ts,CapsuleGeometry:cu,CapsuleBufferGeometry:cu,CircleGeometry:fu,CircleBufferGeometry:fu,ConeGeometry:du,ConeBufferGeometry:du,CylinderGeometry:bo,CylinderBufferGeometry:bo,DodecahedronGeometry:hu,DodecahedronBufferGeometry:hu,EdgesGeometry:Ux,ExtrudeGeometry:Zr,ExtrudeBufferGeometry:Zr,IcosahedronGeometry:pu,IcosahedronBufferGeometry:pu,LatheGeometry:La,LatheBufferGeometry:La,OctahedronGeometry:Da,OctahedronBufferGeometry:Da,PlaneGeometry:Ra,PlaneBufferGeometry:Ra,PolyhedronGeometry:Yr,PolyhedronBufferGeometry:Yr,RingGeometry:mu,RingBufferGeometry:mu,ShapeGeometry:Ia,ShapeBufferGeometry:Ia,SphereGeometry:Na,SphereBufferGeometry:Na,TetrahedronGeometry:gu,TetrahedronBufferGeometry:gu,TorusGeometry:vu,TorusBufferGeometry:vu,TorusKnotGeometry:yu,TorusKnotBufferGeometry:yu,TubeGeometry:xu,TubeBufferGeometry:xu,WireframeGeometry:Hx});class Gx extends pn{constructor(e){super(),this.type="ShadowMaterial",this.color=new Te(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}Gx.prototype.isShadowMaterial=!0;class Vx extends Pn{constructor(e){super(e),this.type="RawShaderMaterial"}}Vx.prototype.isRawShaderMaterial=!0;class _m extends pn{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Te(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ba,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}_m.prototype.isMeshStandardMaterial=!0;class wm extends _m{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ne(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return cn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Te(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Te(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Te(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}wm.prototype.isMeshPhysicalMaterial=!0;class Wx extends pn{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Te(16777215),this.specular=new Te(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ba,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Wx.prototype.isMeshPhongMaterial=!0;class jx extends pn{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Te(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ba,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}jx.prototype.isMeshToonMaterial=!0;class Sm extends pn{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ba,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Sm.prototype.isMeshNormalMaterial=!0;class qx extends pn{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Mf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}qx.prototype.isMeshLambertMaterial=!0;class Xx extends pn{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Te(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ba,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}Xx.prototype.isMeshMatcapMaterial=!0;class Yx extends Ln{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}Yx.prototype.isLineDashedMaterial=!0;const dz={ShadowMaterial:Gx,SpriteMaterial:cm,RawShaderMaterial:Vx,ShaderMaterial:Pn,PointsMaterial:Ha,MeshPhysicalMaterial:wm,MeshStandardMaterial:_m,MeshPhongMaterial:Wx,MeshToonMaterial:jx,MeshNormalMaterial:Sm,MeshLambertMaterial:qx,MeshDepthMaterial:am,MeshDistanceMaterial:lm,MeshBasicMaterial:Rs,MeshMatcapMaterial:Xx,LineDashedMaterial:Yx,LineBasicMaterial:Ln,Material:pn};pn.fromType=function(n){return new dz[n]};const Wt={arraySlice:function(n,e,t){return Wt.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[l+c]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const f=s.tracks[c],d=f.getValueSize(),p=[],m=[];for(let g=0;g<f.times.length;++g){const x=f.times[g]*r;if(!(x<t||x>=i)){p.push(f.times[g]);for(let y=0;y<d;++y)m.push(f.values[g*d+y])}}p.length!==0&&(f.times=Wt.convertArray(p,f.times.constructor),f.values=Wt.convertArray(m,f.values.constructor),o.push(f))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===c});if(f===void 0)continue;let d=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);let m=0;const g=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const x=l.times.length-1;let y;if(s<=l.times[0]){const S=d,_=p-d;y=Wt.arraySlice(l.values,S,_)}else if(s>=l.times[x]){const S=x*p+d,_=S+p-d;y=Wt.arraySlice(l.values,S,_)}else{const S=l.createInterpolant(),_=d,E=p-d;S.evaluate(s),y=Wt.arraySlice(S.resultBuffer,_,E)}c==="quaternion"&&new En().fromArray(y).normalize().conjugate().toArray(y);const w=f.times.length;for(let S=0;S<w;++S){const _=S*g+m;if(c==="quaternion")En.multiplyQuaternionsFlat(f.values,_,y,0,f.values,_);else{const E=g-m*2;for(let b=0;b<E;++b)f.values[_+b]-=y[b]}}}return n.blendMode=Cx,n}};class As{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const l=i+o>>>1;e<t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}As.prototype.beforeStart_=As.prototype.copySampleValue_;As.prototype.afterEnd_=As.prototype.copySampleValue_;class P3 extends As{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ha,endingEnd:ha}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case pa:s=e,l=2*t-i;break;case lf:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case pa:o=e,c=2*i-t;break;case lf:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const f=(i-t)*.5,d=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,d=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,x=(i-t)/(r-t),y=x*x,w=y*x,S=-m*w+2*m*y-m*x,_=(1+m)*w+(-1.5-2*m)*y+(-.5+m)*x+1,E=(-1-g)*w+(1.5+g)*y+.5*x,b=g*w-g*y;for(let A=0;A!==l;++A)s[A]=S*o[d+A]+_*o[f+A]+E*o[c+A]+b*o[p+A];return s}}class Zx extends As{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,d=(i-t)/(r-t),p=1-d;for(let m=0;m!==l;++m)s[m]=o[f+m]*p+o[c+m]*d;return s}}class L3 extends As{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ar{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wt.convertArray(t,this.TimeBufferType),this.values=Wt.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Wt.convertArray(e.times,Array),values:Wt.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new L3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Zx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new P3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case of:t=this.InterpolantFactoryMethodDiscrete;break;case af:t=this.InterpolantFactoryMethodLinear;break;case tp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return of;case this.InterpolantFactoryMethodLinear:return af;case this.InterpolantFactoryMethodSmooth:return tp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=Wt.arraySlice(i,s,o),this.values=Wt.arraySlice(this.values,s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&Wt.isTypedArray(r))for(let l=0,c=r.length;l!==c;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=Wt.arraySlice(this.times),t=Wt.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===tp,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const f=e[l],d=e[l+1];if(f!==d&&(l!==1||f!==e[0]))if(r)c=!0;else{const p=l*i,m=p-i,g=p+i;for(let x=0;x!==i;++x){const y=t[p+x];if(y!==t[m+x]||y!==t[g+x]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const p=l*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++o}}if(s>0){e[o]=e[s];for(let l=s*i,c=o*i,f=0;f!==i;++f)t[c+f]=t[l+f];++o}return o!==e.length?(this.times=Wt.arraySlice(e,0,o),this.values=Wt.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Wt.arraySlice(this.times,0),t=Wt.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ar.prototype.TimeBufferType=Float32Array;Ar.prototype.ValueBufferType=Float32Array;Ar.prototype.DefaultInterpolation=af;class Ga extends Ar{}Ga.prototype.ValueTypeName="bool";Ga.prototype.ValueBufferType=Array;Ga.prototype.DefaultInterpolation=of;Ga.prototype.InterpolantFactoryMethodLinear=void 0;Ga.prototype.InterpolantFactoryMethodSmooth=void 0;class Qx extends Ar{}Qx.prototype.ValueTypeName="color";class pf extends Ar{}pf.prototype.ValueTypeName="number";class D3 extends As{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let f=e*l;for(let d=f+l;f!==d;f+=4)En.slerpFlat(s,0,o,f-l,o,f,c);return s}}class Pu extends Ar{InterpolantFactoryMethodLinear(e){return new D3(this.times,this.values,this.getValueSize(),e)}}Pu.prototype.ValueTypeName="quaternion";Pu.prototype.DefaultInterpolation=af;Pu.prototype.InterpolantFactoryMethodSmooth=void 0;class Va extends Ar{}Va.prototype.ValueTypeName="string";Va.prototype.ValueBufferType=Array;Va.prototype.DefaultInterpolation=of;Va.prototype.InterpolantFactoryMethodLinear=void 0;Va.prototype.InterpolantFactoryMethodSmooth=void 0;class mf extends Ar{}mf.prototype.ValueTypeName="vector";class gf{constructor(e,t=-1,i,r=tm){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ni(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(pz(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ar.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],f=[];c.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const d=Wt.getKeyframeOrder(c);c=Wt.sortedArray(c,1,d),f=Wt.sortedArray(f,1,d),!r&&c[0]===0&&(c.push(s),f.push(f[0])),o.push(new pf(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],d=f.name.match(s);if(d&&d.length>1){const p=d[1];let m=r[p];m||(r[p]=m=[]),m.push(f)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,g,x,y){if(g.length!==0){const w=[],S=[];Wt.flattenJSON(g,w,S,x),w.length!==0&&y.push(new p(m,w,S))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const m=f[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let y=0;y<m[x].morphTargets.length;y++)g[m[x].morphTargets[y]]=-1;for(const y in g){const w=[],S=[];for(let _=0;_!==m[x].morphTargets.length;++_){const E=m[x];w.push(E.time),S.push(E.morphTarget===y?1:0)}r.push(new pf(".morphTargetInfluence["+y+"]",w,S))}c=g.length*o}else{const g=".bones["+t[p].name+"]";i(mf,g+".position",m,"pos",r),i(Pu,g+".quaternion",m,"rot",r),i(mf,g+".scale",m,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function hz(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pf;case"vector":case"vector2":case"vector3":case"vector4":return mf;case"color":return Qx;case"quaternion":return Pu;case"bool":case"boolean":return Ga;case"string":return Va}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function pz(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=hz(n.type);if(n.times===void 0){const t=[],i=[];Wt.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const za={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Jx{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){l++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,l),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,p){return f.push(d,p),this},this.removeHandler=function(d){const p=f.indexOf(d);return p!==-1&&f.splice(p,2),this},this.getHandler=function(d){for(let p=0,m=f.length;p<m;p+=2){const g=f[p],x=f[p+1];if(g.global&&(g.lastIndex=0),g.test(d))return x}return null}}}const I3=new Jx;class oi{constructor(e){this.manager=e!==void 0?e:I3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const fs={};class Qr extends oi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=za.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fs[e]!==void 0){fs[e].push({onLoad:t,onProgress:i,onError:r});return}fs[e]=[],fs[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||f.body===void 0||f.body.getReader===void 0)return f;const d=fs[e],p=f.body.getReader(),m=f.headers.get("Content-Length"),g=m?parseInt(m):0,x=g!==0;let y=0;const w=new ReadableStream({start(S){_();function _(){p.read().then(({done:E,value:b})=>{if(E)S.close();else{y+=b.byteLength;const A=new ProgressEvent("progress",{lengthComputable:x,loaded:y,total:g});for(let R=0,P=d.length;R<P;R++){const D=d[R];D.onProgress&&D.onProgress(A)}S.enqueue(b),_()}})}}});return new Response(w)}else throw Error(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return f.json();default:if(l===void 0)return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(l),m=p&&p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return f.arrayBuffer().then(x=>g.decode(x))}}}).then(f=>{za.add(e,f);const d=fs[e];delete fs[e];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onLoad&&g.onLoad(f)}}).catch(f=>{const d=fs[e];if(d===void 0)throw this.manager.itemError(e),f;delete fs[e];for(let p=0,m=d.length;p<m;p++){const g=d[p];g.onError&&g.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class mz extends oi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=gf.parse(e[i]);t.push(r)}return t}}class gz extends oi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new Nx,c=new Qr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let f=0;function d(p){c.load(e[p],function(m){const g=s.parse(m,!0);o[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},f+=1,f===6&&(g.mipmapCount===1&&(l.minFilter=Pt),l.image=o,l.format=g.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)d(p);else c.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let x=0;x<g;x++){o[x]={mipmaps:[]};for(let y=0;y<m.mipmapCount;y++)o[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+y]),o[x].format=m.format,o[x].width=m.width,o[x].height=m.height}l.image=o}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&&(l.minFilter=Pt),l.format=m.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class vf extends oi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=za.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=cf("img");function c(){d(),za.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(p){d(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class N3 extends oi{constructor(e){super(e)}load(e,t,i,r){const s=new Cu,o=new vf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(f){o.load(e[f],function(d){s.images[f]=d,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return s}}class z3 extends oi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ea,l=new Qr(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){const f=s.parse(c);!f||(f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:$n,o.wrapT=f.wrapT!==void 0?f.wrapT:$n,o.magFilter=f.magFilter!==void 0?f.magFilter:Pt,o.minFilter=f.minFilter!==void 0?f.minFilter:Pt,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.encoding!==void 0&&(o.encoding=f.encoding),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Lo),f.mipmapCount===1&&(o.minFilter=Pt),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f))},i,r),o}}class F3 extends oi{constructor(e){super(e)}load(e,t,i,r){const s=new hn,o=new vf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class br extends vt{constructor(e,t=1){super(),this.type="Light",this.color=new Te(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}br.prototype.isLight=!0;class Kx extends br{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(vt.DefaultUp),this.updateMatrix(),this.groundColor=new Te(t)}copy(e){return br.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Kx.prototype.isHemisphereLight=!0;const dM=new ke,hM=new L,pM=new L;class $x{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ne(512,512),this.map=null,this.mapPass=null,this.matrix=new ke,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tf,this._frameExtents=new ne(1,1),this._viewportCount=1,this._viewports=[new Nt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;hM.setFromMatrixPosition(e.matrixWorld),t.position.copy(hM),pM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pM),t.updateMatrixWorld(),dM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dM),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class k3 extends $x{constructor(){super(new Ht(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=uf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}k3.prototype.isSpotLightShadow=!0;class e1 extends br{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(vt.DefaultUp),this.updateMatrix(),this.target=new vt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new k3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}e1.prototype.isSpotLight=!0;const mM=new ke,mc=new L,z0=new L;class B3 extends $x{constructor(){super(new Ht(90,1,.5,500)),this._frameExtents=new ne(4,2),this._viewportCount=6,this._viewports=[new Nt(2,1,1,1),new Nt(0,1,1,1),new Nt(3,1,1,1),new Nt(1,1,1,1),new Nt(3,0,1,1),new Nt(1,0,1,1)],this._cubeDirections=[new L(1,0,0),new L(-1,0,0),new L(0,0,1),new L(0,0,-1),new L(0,1,0),new L(0,-1,0)],this._cubeUps=[new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,0,1),new L(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),mc.setFromMatrixPosition(e.matrixWorld),i.position.copy(mc),z0.copy(i.position),z0.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(z0),i.updateMatrixWorld(),r.makeTranslation(-mc.x,-mc.y,-mc.z),mM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mM)}}B3.prototype.isPointLightShadow=!0;class t1 extends br{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new B3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}t1.prototype.isPointLight=!0;class O3 extends $x{constructor(){super(new _s(-5,5,5,-5,.5,500))}}O3.prototype.isDirectionalLightShadow=!0;class n1 extends br{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(vt.DefaultUp),this.updateMatrix(),this.target=new vt,this.shadow=new O3}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}n1.prototype.isDirectionalLight=!0;class i1 extends br{constructor(e,t){super(e,t),this.type="AmbientLight"}}i1.prototype.isAmbientLight=!0;class r1 extends br{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}r1.prototype.isRectAreaLight=!0;class s1{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new L)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}s1.prototype.isSphericalHarmonics3=!0;class Lf extends br{constructor(e=new s1,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Lf.prototype.isLightProbe=!0;class U3 extends oi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Qr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=pn.fromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Te().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Te().setHex(o.value);break;case"v2":r.uniforms[s].value=new ne().fromArray(o.value);break;case"v3":r.uniforms[s].value=new L().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Nt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Mn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ke().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new ne().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new ne().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}}class Np{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class o1 extends Qe{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}o1.prototype.isInstancedBufferGeometry=!0;class H3 extends oi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,x){if(t[x]!==void 0)return t[x];const w=g.interleavedBuffers[x],S=s(g,w.buffer),_=Ul(w.type,S),E=new Ua(_,w.stride);return E.uuid=w.uuid,t[x]=E,E}function s(g,x){if(i[x]!==void 0)return i[x];const w=g.arrayBuffers[x],S=new Uint32Array(w).buffer;return i[x]=S,S}const o=e.isInstancedBufferGeometry?new o1:new Qe,l=e.data.index;if(l!==void 0){const g=Ul(l.type,l.array);o.setIndex(new mt(g,1))}const c=e.data.attributes;for(const g in c){const x=c[g];let y;if(x.isInterleavedBufferAttribute){const w=r(e.data,x.data);y=new To(w,x.itemSize,x.offset,x.normalized)}else{const w=Ul(x.type,x.array),S=x.isInstancedBufferAttribute?Pa:mt;y=new S(w,x.itemSize,x.normalized)}x.name!==void 0&&(y.name=x.name),x.usage!==void 0&&y.setUsage(x.usage),x.updateRange!==void 0&&(y.updateRange.offset=x.updateRange.offset,y.updateRange.count=x.updateRange.count),o.setAttribute(g,y)}const f=e.data.morphAttributes;if(f)for(const g in f){const x=f[g],y=[];for(let w=0,S=x.length;w<S;w++){const _=x[w];let E;if(_.isInterleavedBufferAttribute){const b=r(e.data,_.data);E=new To(b,_.itemSize,_.offset,_.normalized)}else{const b=Ul(_.type,_.array);E=new mt(b,_.itemSize,_.normalized)}_.name!==void 0&&(E.name=_.name),y.push(E)}o.morphAttributes[g]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,x=p.length;g!==x;++g){const y=p[g];o.addGroup(y.start,y.count,y.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new L;m.center!==void 0&&g.fromArray(m.center),o.boundingSphere=new No(g,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class vz extends oi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?Np.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new Qr(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Np.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Qr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,c,l,i),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),t!==void 0){let p=!1;for(const m in o)if(o[m]instanceof HTMLImageElement){p=!0;break}p===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Wr().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new pm().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new H3;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:c.type in fM?l=fM[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),l.isBufferGeometry===!0&&c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new U3;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];if(c.type==="MultiMaterial"){const f=[];for(let d=0;d<c.materials.length;d++){const p=c.materials[d];i[p.uuid]===void 0&&(i[p.uuid]=s.parse(p)),f.push(i[p.uuid])}r[c.uuid]=f}else i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=gf.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return o(d)}else return c.data?{data:Ul(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new Jx(t);s=new vf(c),s.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const p=e[f],m=p.url;if(Array.isArray(m)){const g=[];for(let x=0,y=m.length;x<y;x++){const w=m[x],S=l(w);S!==null&&(S instanceof HTMLImageElement?g.push(S):g.push(new Ea(S.data,S.width,S.height)))}r[p.uuid]=new ma(g)}else{const g=l(p.url);r[p.uuid]=new ma(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return o.data?{data:Ul(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new vf(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],f=c.url;if(Array.isArray(f)){const d=[];for(let p=0,m=f.length;p<m;p++){const g=f[p],x=await s(g);x!==null&&(x instanceof HTMLImageElement?d.push(x):d.push(new Ea(x.data,x.width,x.height)))}i[c.uuid]=new ma(d)}else{const d=await s(c.url);i[c.uuid]=new ma(d)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let d;Array.isArray(f)?(d=new Cu,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new Ea:d=new hn,f&&(d.needsUpdate=!0)),d.source=c,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=i(l.mapping,yz)),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=i(l.wrap[0],gM),d.wrapT=i(l.wrap[1],gM)),l.format!==void 0&&(d.format=l.format),l.type!==void 0&&(d.type=l.type),l.encoding!==void 0&&(d.encoding=l.encoding),l.minFilter!==void 0&&(d.minFilter=i(l.minFilter,vM)),l.magFilter!==void 0&&(d.magFilter=i(l.magFilter,vM)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.userData!==void 0&&(d.userData=l.userData),r[l.uuid]=d}return r}parseObject(e,t,i,r,s){let o;function l(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function c(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let x=0,y=m.length;x<y;x++){const w=m[x];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),g.push(i[w])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function f(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let d,p;switch(e.type){case"Scene":o=new ws,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Te(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Af(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new bf(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new Ht(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new _s(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new i1(e.color,e.intensity);break;case"DirectionalLight":o=new n1(e.color,e.intensity);break;case"PointLight":o=new t1(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new r1(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new e1(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Kx(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Lf().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),p=c(e.material),o=new dm(d,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),p=c(e.material),o=new dn(d,p);break;case"InstancedMesh":d=l(e.geometry),p=c(e.material);const m=e.count,g=e.instanceMatrix,x=e.instanceColor;o=new Dx(d,p,m),o.instanceMatrix=new Pa(new Float32Array(g.array),16),x!==void 0&&(o.instanceColor=new Pa(new Float32Array(x.array),x.itemSize));break;case"LOD":o=new w3;break;case"Line":o=new bs(l(e.geometry),c(e.material));break;case"LineLoop":o=new Ix(l(e.geometry),c(e.material));break;case"LineSegments":o=new wi(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new Cf(l(e.geometry),c(e.material));break;case"Sprite":o=new fm(c(e.material));break;case"Group":o=new ga;break;case"Bone":o=new hm;break;default:o=new vt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const x=m[g];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const x=m[g],y=o.getObjectByProperty("uuid",x.object);y!==void 0&&o.addLevel(y,x.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const yz={UVMapping:em,CubeReflectionMapping:So,CubeRefractionMapping:Mo,EquirectangularReflectionMapping:tf,EquirectangularRefractionMapping:nf,CubeUVReflectionMapping:bu},gM={RepeatWrapping:rf,ClampToEdgeWrapping:$n,MirroredRepeatWrapping:sf},vM={NearestFilter:Ut,NearestMipmapNearestFilter:Pp,NearestMipmapLinearFilter:Lp,LinearFilter:Pt,LinearMipmapNearestFilter:Ax,LinearMipmapLinearFilter:Lo};class G3 extends oi{constructor(e){super(e),typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=za.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){za.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}G3.prototype.isImageBitmapLoader=!0;let Ph;const a1={getContext:function(){return Ph===void 0&&(Ph=new(window.AudioContext||window.webkitAudioContext)),Ph},setContext:function(n){Ph=n}};class V3 extends oi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);a1.getContext().decodeAudioData(c,function(d){t(d)})}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}}class W3 extends Lf{constructor(e,t,i=1){super(void 0,i);const r=new Te().set(e),s=new Te().set(t),o=new L(r.r,r.g,r.b),l=new L(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(l).multiplyScalar(f)}}W3.prototype.isHemisphereLightProbe=!0;class j3 extends Lf{constructor(e,t=1){super(void 0,t);const i=new Te().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}j3.prototype.isAmbientLightProbe=!0;const yM=new ke,xM=new ke,Ko=new ke;class xz{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ht,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ht,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ko.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(wa*t.fov*.5)/t.zoom;let l,c;xM.elements[12]=-r,yM.elements[12]=r,l=-o*t.aspect+s,c=o*t.aspect+s,Ko.elements[0]=2*t.near/(c-l),Ko.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Ko),l=-o*t.aspect-s,c=o*t.aspect-s,Ko.elements[0]=2*t.near/(c-l),Ko.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Ko)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(xM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yM)}}class l1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_M(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_M();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _M(){return(typeof performance=="undefined"?Date:performance).now()}const $o=new L,wM=new En,_z=new L,ea=new L;class wz extends vt{constructor(){super(),this.type="AudioListener",this.context=a1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new l1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($o,wM,_z),ea.set(0,0,-1).applyQuaternion(wM),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($o.x,r),t.positionY.linearRampToValueAtTime($o.y,r),t.positionZ.linearRampToValueAtTime($o.z,r),t.forwardX.linearRampToValueAtTime(ea.x,r),t.forwardY.linearRampToValueAtTime(ea.y,r),t.forwardZ.linearRampToValueAtTime(ea.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition($o.x,$o.y,$o.z),t.setOrientation(ea.x,ea.y,ea.z,i.x,i.y,i.z)}}class u1 extends vt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ta=new L,SM=new En,Sz=new L,na=new L;class Mz extends u1{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ta,SM,Sz),na.set(0,0,1).applyQuaternion(SM);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ta.x,i),t.positionY.linearRampToValueAtTime(ta.y,i),t.positionZ.linearRampToValueAtTime(ta.z,i),t.orientationX.linearRampToValueAtTime(na.x,i),t.orientationY.linearRampToValueAtTime(na.y,i),t.orientationZ.linearRampToValueAtTime(na.z,i)}else t.setPosition(ta.x,ta.y,ta.z),t.setOrientation(na.x,na.y,na.z)}}class q3{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class X3{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){En.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;En.multiplyQuaternionsFlat(e,o,e,t,e,i),En.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const c1="\\[\\]\\.:\\/",Ez=new RegExp("["+c1+"]","g"),f1="[^"+c1+"]",Tz="[^"+c1.replace("\\.","")+"]",bz=/((?:WC+[\/:])*)/.source.replace("WC",f1),Az=/(WCOD+)?/.source.replace("WCOD",Tz),Cz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",f1),Rz=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",f1),Pz=new RegExp("^"+bz+Az+Cz+Rz+"$"),Lz=["material","materials","bones"];class Dz{constructor(e,t,i){const r=i||Et.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Et{constructor(e,t,i){this.path=t,this.parsedPath=i||Et.parseTrackName(t),this.node=Et.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Et.Composite(e,t,i):new Et(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ez,"")}static parseTrackName(e){const t=Pz.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Lz.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Et.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Et.Composite=Dz;Et.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Et.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Et.prototype.GetterByBindingType=[Et.prototype._getValue_direct,Et.prototype._getValue_array,Et.prototype._getValue_arrayElement,Et.prototype._getValue_toArray];Et.prototype.SetterByBindingTypeAndVersioning=[[Et.prototype._setValue_direct,Et.prototype._setValue_direct_setNeedsUpdate,Et.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Et.prototype._setValue_array,Et.prototype._setValue_array_setNeedsUpdate,Et.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Et.prototype._setValue_arrayElement,Et.prototype._setValue_arrayElement_setNeedsUpdate,Et.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Et.prototype._setValue_fromArray,Et.prototype._setValue_fromArray_setNeedsUpdate,Et.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Y3{constructor(){this.uuid=Ni(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,f=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const m=arguments[d],g=m.uuid;let x=t[g];if(x===void 0){x=c++,t[g]=x,e.push(m);for(let y=0,w=o;y!==w;++y)s[y].push(new Et(m,i[y],r[y]))}else if(x<f){l=e[x];const y=--f,w=e[y];t[w.uuid]=x,e[x]=w,t[g]=y,e[y]=m;for(let S=0,_=o;S!==_;++S){const E=s[S],b=E[y];let A=E[x];E[x]=b,A===void 0&&(A=new Et(m,i[S],r[S])),E[y]=A}}else e[x]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],f=c.uuid,d=t[f];if(d!==void 0&&d>=s){const p=s++,m=e[p];t[m.uuid]=d,e[d]=m,t[f]=p,e[p]=c;for(let g=0,x=r;g!==x;++g){const y=i[g],w=y[p],S=y[d];y[d]=w,y[p]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],d=f.uuid,p=t[d];if(p!==void 0)if(delete t[d],p<s){const m=--s,g=e[m],x=--o,y=e[x];t[g.uuid]=p,e[p]=g,t[y.uuid]=m,e[m]=y,e.pop();for(let w=0,S=r;w!==S;++w){const _=i[w],E=_[m],b=_[x];_[p]=E,_[m]=b,_.pop()}}else{const m=--o,g=e[m];m>0&&(t[g.uuid]=p),e[p]=g,e.pop();for(let x=0,y=r;x!==y;++x){const w=i[x];w[p]=w[m],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,d=this.nCachedObjects_,p=new Array(f);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(p);for(let m=d,g=c.length;m!==g;++m){const x=c[m];p[m]=new Et(x,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],f=e[l];t[f]=i,o[i]=c,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}Y3.prototype.isAnimationObjectGroup=!0;class Iz{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:ha,endingEnd:ha};for(let f=0;f!==o;++f){const d=s[f].createInterpolant(null);l[f]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=V2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=s,c[1]=s+i,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;if(c<0||i===0)return;this._startTime=null,t=i*c}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Cx:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(o),f[d].accumulateAdditive(l);break;case tm:default:for(let d=0,p=c.length;d!==p;++d)c[d].evaluate(o),f[d].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===W2;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===G2){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=pa,r.endingEnd=pa):(e?r.endingStart=this.zeroSlopeAtStart?pa:ha:r.endingStart=lf,t?r.endingEnd=this.zeroSlopeAtEnd?pa:ha:r.endingEnd=lf)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=i,this}}class Z3 extends ar{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let d=f[c];d===void 0&&(d={},f[c]=d);for(let p=0;p!==s;++p){const m=r[p],g=m.name;let x=d[g];if(x!==void 0)++x.referenceCount,o[p]=x;else{if(x=o[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,g));continue}const y=t&&t._propertyBindings[p].binding.parsedPath;x=new X3(Et.create(i,g,y),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,g),o[p]=x}l[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,f=c[c.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Zx(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?gf.findByName(r,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let f=null;if(i===void 0&&(o!==null?i=o.blendMode:i=tm),c!==void 0){const p=c.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;f=c.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const d=new Iz(this,o,t,i);return this._bindAction(d,f),this._addInactiveAction(d,l,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?gf.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const f=o[l];this._deactivateAction(f);const d=f._cacheIndex,p=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=d,t[d]=p,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}Z3.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Be{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Be(this.value.clone===void 0?this.value:this.value.clone())}}class Q3 extends Ua{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Q3.prototype.isInstancedInterleavedBuffer=!0;class J3{constructor(e,t,i,r,s){this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}J3.prototype.isGLBufferAttribute=!0;class K3{constructor(e,t,i=0,r=1/0){this.ray=new zo(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Ma,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return wy(e,this,i,t),i.sort(MM),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)wy(e[r],this,i,t);return i.sort(MM),i}}function MM(n,e){return n.distance-e.distance}function wy(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)wy(r[s],e,t,!0)}}class Sy{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(cn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Nz{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const EM=new ne;class Lu{constructor(e=new ne(1/0,1/0),t=new ne(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=EM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return EM.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Lu.prototype.isBox2=!0;const TM=new L,Lh=new L;class $3{constructor(e=new L,t=new L){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){TM.subVectors(e,this.start),Lh.subVectors(this.end,this.start);const i=Lh.dot(Lh);let s=Lh.dot(TM)/i;return t&&(s=cn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const bM=new L;class zz extends vt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new Qe,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const f=o/c*Math.PI*2,d=l/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Fe(r,3));const s=new Ln({fog:!1,toneMapped:!1});this.cone=new wi(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),bM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(bM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ys=new L,Dh=new ke,F0=new ke;class eb extends wi{constructor(e){const t=tb(e),i=new Qe,r=[],s=[],o=new Te(0,0,1),l=new Te(0,1,0);for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new Fe(r,3)),i.setAttribute("color",new Fe(s,3));const c=new Ln({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");F0.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Dh.multiplyMatrices(F0,l.matrixWorld),Ys.setFromMatrixPosition(Dh),r.setXYZ(o,Ys.x,Ys.y,Ys.z),Dh.multiplyMatrices(F0,l.parent.matrixWorld),Ys.setFromMatrixPosition(Dh),r.setXYZ(o+1,Ys.x,Ys.y,Ys.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function tb(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,tb(n.children[t]));return e}class Fz extends dn{constructor(e,t,i){const r=new Na(t,4,2),s=new Rs({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const kz=new L,AM=new Te,CM=new Te;class Bz extends vt{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const r=new Da(t);r.rotateY(Math.PI*.5),this.material=new Rs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new mt(o,3)),this.add(new dn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");AM.copy(this.light.color),CM.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?AM:CM;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(kz.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nb extends wi{constructor(e=10,t=10,i=4473924,r=8947848){i=new Te(i),r=new Te(r);const s=t/2,o=e/t,l=e/2,c=[],f=[];for(let m=0,g=0,x=-l;m<=t;m++,x+=o){c.push(-l,0,x,l,0,x),c.push(x,0,-l,x,0,l);const y=m===s?i:r;y.toArray(f,g),g+=3,y.toArray(f,g),g+=3,y.toArray(f,g),g+=3,y.toArray(f,g),g+=3}const d=new Qe;d.setAttribute("position",new Fe(c,3)),d.setAttribute("color",new Fe(f,3));const p=new Ln({vertexColors:!0,toneMapped:!1});super(d,p),this.type="GridHelper"}}class Oz extends wi{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Te(s),o=new Te(o);const l=[],c=[];for(let p=0;p<=t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,x=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,x);const y=p&1?s:o;c.push(y.r,y.g,y.b),c.push(y.r,y.g,y.b)}for(let p=0;p<=i;p++){const m=p&1?s:o,g=e-e/i*p;for(let x=0;x<r;x++){let y=x/r*(Math.PI*2),w=Math.sin(y)*g,S=Math.cos(y)*g;l.push(w,0,S),c.push(m.r,m.g,m.b),y=(x+1)/r*(Math.PI*2),w=Math.sin(y)*g,S=Math.cos(y)*g,l.push(w,0,S),c.push(m.r,m.g,m.b)}}const f=new Qe;f.setAttribute("position",new Fe(l,3)),f.setAttribute("color",new Fe(c,3));const d=new Ln({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}}const RM=new L,Ih=new L,PM=new L;class Uz extends vt{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let r=new Qe;r.setAttribute("position",new Fe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ln({fog:!1,toneMapped:!1});this.lightPlane=new bs(r,s),this.add(this.lightPlane),r=new Qe,r.setAttribute("position",new Fe([0,0,0,0,0,1],3)),this.targetLine=new bs(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){RM.setFromMatrixPosition(this.light.matrixWorld),Ih.setFromMatrixPosition(this.light.target.matrixWorld),PM.subVectors(Ih,RM),this.lightPlane.lookAt(Ih),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ih),this.targetLine.scale.z=PM.length()}}const Nh=new L,sn=new Oa;class Hz extends wi{constructor(e){const t=new Qe,i=new Ln({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={},l=new Te(16755200),c=new Te(16711680),f=new Te(43775),d=new Te(16777215),p=new Te(3355443);m("n1","n2",l),m("n2","n4",l),m("n4","n3",l),m("n3","n1",l),m("f1","f2",l),m("f2","f4",l),m("f4","f3",l),m("f3","f1",l),m("n1","f1",l),m("n2","f2",l),m("n3","f3",l),m("n4","f4",l),m("p","n1",c),m("p","n2",c),m("p","n3",c),m("p","n4",c),m("u1","u2",f),m("u2","u3",f),m("u3","u1",f),m("c","t",d),m("p","c",p),m("cn1","cn2",p),m("cn3","cn4",p),m("cf1","cf2",p),m("cf3","cf4",p);function m(x,y,w){g(x,w),g(y,w)}function g(x,y){r.push(0,0,0),s.push(y.r,y.g,y.b),o[x]===void 0&&(o[x]=[]),o[x].push(r.length/3-1)}t.setAttribute("position",new Fe(r,3)),t.setAttribute("color",new Fe(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;sn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ln("c",t,e,sn,0,0,-1),ln("t",t,e,sn,0,0,1),ln("n1",t,e,sn,-i,-r,-1),ln("n2",t,e,sn,i,-r,-1),ln("n3",t,e,sn,-i,r,-1),ln("n4",t,e,sn,i,r,-1),ln("f1",t,e,sn,-i,-r,1),ln("f2",t,e,sn,i,-r,1),ln("f3",t,e,sn,-i,r,1),ln("f4",t,e,sn,i,r,1),ln("u1",t,e,sn,i*.7,r*1.1,-1),ln("u2",t,e,sn,-i*.7,r*1.1,-1),ln("u3",t,e,sn,0,r*2,-1),ln("cf1",t,e,sn,-i,0,1),ln("cf2",t,e,sn,i,0,1),ln("cf3",t,e,sn,0,-r,1),ln("cf4",t,e,sn,0,r,1),ln("cn1",t,e,sn,-i,0,-1),ln("cn2",t,e,sn,i,0,-1),ln("cn3",t,e,sn,0,-r,-1),ln("cn4",t,e,sn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ln(n,e,t,i,r,s,o){Nh.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,d=l.length;f<d;f++)c.setXYZ(l[f],Nh.x,Nh.y,Nh.z)}}const zh=new Oi;class ib extends wi{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Qe;s.setIndex(new mt(i,1)),s.setAttribute("position",new mt(r,3)),super(s,new Ln({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&zh.setFromObject(this.object),zh.isEmpty())return;const t=zh.min,i=zh.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return wi.prototype.copy.call(this,e),this.object=e.object,this}}class Gz extends wi{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Qe;s.setIndex(new mt(i,1)),s.setAttribute("position",new Fe(r,3)),super(s,new Ln({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Vz extends bs{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new Qe;o.setAttribute("position",new Fe(s,3)),o.computeBoundingSphere(),super(o,new Ln({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],c=new Qe;c.setAttribute("position",new Fe(l,3)),c.computeBoundingSphere(),this.add(new dn(c,new Rs({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Nn:wo,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const LM=new L;let Fh,k0;class Wz extends vt{constructor(e=new L(0,0,1),t=new L(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Fh===void 0&&(Fh=new Qe,Fh.setAttribute("position",new Fe([0,0,0,0,1,0],3)),k0=new bo(0,.5,1,5,1),k0.translate(0,-.5,0)),this.position.copy(t),this.line=new bs(Fh,new Ln({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new dn(k0,new Rs({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{LM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(LM,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class rb extends wi{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Qe;r.setAttribute("position",new Fe(t,3)),r.setAttribute("color",new Fe(i,3));const s=new Ln({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Te,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class jz{constructor(){this.type="ShapePath",this.color=new Te,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new uu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(_){const E=[];for(let b=0,A=_.length;b<A;b++){const R=_[b],P=new Wr;P.curves=R.curves,E.push(P)}return E}function r(_,E){const b=E.length;let A=!1;for(let R=b-1,P=0;P<b;R=P++){let D=E[R],V=E[P],U=V.x-D.x,C=V.y-D.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(D=E[P],U=-U,V=E[R],C=-C),_.y<D.y||_.y>V.y)continue;if(_.y===D.y){if(_.x===D.x)return!0}else{const k=C*(_.x-D.x)-U*(_.y-D.y);if(k===0)return!0;if(k<0)continue;A=!A}}else{if(_.y!==D.y)continue;if(V.x<=_.x&&_.x<=D.x||D.x<=_.x&&_.x<=V.x)return!0}}return A}const s=jr.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return i(o);let l,c,f;const d=[];if(o.length===1)return c=o[0],f=new Wr,f.curves=c.curves,d.push(f),d;let p=!s(o[0].getPoints());p=e?!p:p;const m=[],g=[];let x=[],y=0,w;g[y]=void 0,x[y]=[];for(let _=0,E=o.length;_<E;_++)c=o[_],w=c.getPoints(),l=s(w),l=e?!l:l,l?(!p&&g[y]&&y++,g[y]={s:new Wr,p:w},g[y].s.curves=c.curves,p&&y++,x[y]=[]):x[y].push({h:c,p:w[0]});if(!g[0])return i(o);if(g.length>1){let _=!1,E=0;for(let b=0,A=g.length;b<A;b++)m[b]=[];for(let b=0,A=g.length;b<A;b++){const R=x[b];for(let P=0;P<R.length;P++){const D=R[P];let V=!0;for(let U=0;U<g.length;U++)r(D.p,g[U].p)&&(b!==U&&E++,V?(V=!1,m[U].push(D)):_=!0);V&&m[b].push(D)}}E>0&&_===!1&&(x=m)}let S;for(let _=0,E=g.length;_<E;_++){f=g[_].s,d.push(f),S=x[_];for(let b=0,A=S.length;b<A;b++)f.holes.push(S[b].h)}return d}}class qz{static toHalfFloat(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=cn(e,-65504,65504),DM[0]=e;const t=IM[0],i=t>>23&511;return vr[i]+((t&8388607)>>yr[i])}static fromHalfFloat(e){const t=e>>10;return IM[0]=d1[ob[t]+(e&1023)]+Du[t],DM[0]}}const sb=new ArrayBuffer(4),DM=new Float32Array(sb),IM=new Uint32Array(sb),vr=new Uint32Array(512),yr=new Uint32Array(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(vr[n]=0,vr[n|256]=32768,yr[n]=24,yr[n|256]=24):e<-14?(vr[n]=1024>>-e-14,vr[n|256]=1024>>-e-14|32768,yr[n]=-e-1,yr[n|256]=-e-1):e<=15?(vr[n]=e+15<<10,vr[n|256]=e+15<<10|32768,yr[n]=13,yr[n|256]=13):e<128?(vr[n]=31744,vr[n|256]=64512,yr[n]=24,yr[n|256]=24):(vr[n]=31744,vr[n|256]=64512,yr[n]=13,yr[n|256]=13)}const d1=new Uint32Array(2048),Du=new Uint32Array(64),ob=new Uint32Array(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;(e&8388608)===0;)e<<=1,t-=8388608;e&=-8388609,t+=947912704,d1[n]=e|t}for(let n=1024;n<2048;++n)d1[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)Du[n]=n<<23;Du[31]=1199570944;Du[32]=2147483648;for(let n=33;n<63;++n)Du[n]=2147483648+(n-32<<23);Du[63]=3347054592;for(let n=1;n<64;++n)n!==32&&(ob[n]=1024);const Xz=0,Yz=1,Zz=0,Qz=1,Jz=2;function Kz(n){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),n}function $z(n=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),n.isMultiMaterial=!0,n.materials=n,n.clone=function(){return n.slice()},n}class eF extends Cf{constructor(e,t){console.warn("THREE.PointCloud has been renamed to THREE.Points."),super(e,t)}}class tF extends fm{constructor(e){console.warn("THREE.Particle has been renamed to THREE.Sprite."),super(e)}}class nF extends Cf{constructor(e,t){console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),super(e,t)}}class iF extends Ha{constructor(e){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),super(e)}}class rF extends Ha{constructor(e){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),super(e)}}class sF extends Ha{constructor(e){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),super(e)}}class oF extends L{constructor(e,t,i){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),super(e,t,i)}}class aF extends mt{constructor(e,t){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),super(e,t),this.setUsage(au)}}class lF extends t3{constructor(e,t){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),super(e,t)}}class uF extends n3{constructor(e,t){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),super(e,t)}}class cF extends i3{constructor(e,t){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),super(e,t)}}class fF extends r3{constructor(e,t){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),super(e,t)}}class dF extends nm{constructor(e,t){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),super(e,t)}}class hF extends s3{constructor(e,t){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),super(e,t)}}class pF extends im{constructor(e,t){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),super(e,t)}}class mF extends Fe{constructor(e,t){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),super(e,t)}}class gF extends a3{constructor(e,t){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),super(e,t)}}Fi.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Fi.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};uu.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};class vF extends rb{constructor(e){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),super(e)}}class yF extends ib{constructor(e,t){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),super(e,t)}}class xF extends wi{constructor(e,t){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),super(new Ux(e.geometry),new Ln({color:t!==void 0?t:16777215}))}}nb.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};eb.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};class _F extends wi{constructor(e,t){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),super(new Hx(e.geometry),new Ln({color:t!==void 0?t:16777215}))}}oi.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Np.extractUrlBase(n)};oi.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};class wF extends Qr{constructor(e){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),super(e)}}class SF extends z3{constructor(e){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),super(e)}}Lu.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)};Lu.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Lu.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Lu.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)};Oi.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};Oi.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Oi.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Oi.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Oi.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};Fo.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")};No.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Tf.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};$3.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)};Mn.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Mn.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Mn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Mn.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Mn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Mn.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};ke.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};ke.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};ke.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new L().setFromMatrixColumn(this,3)};ke.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};ke.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};ke.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ke.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ke.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};ke.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};ke.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ke.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};ke.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};ke.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};ke.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};ke.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};ke.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};ke.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};ke.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)};ke.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Br.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};En.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};En.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};zo.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};zo.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};zo.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};fn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};fn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};fn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};fn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};fn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};fn.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),fn.getBarycoord(n,e,t,i,r)};fn.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),fn.getNormal(n,e,t,i)};Wr.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};Wr.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Zr(this,n)};Wr.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ia(this,n)};ne.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};ne.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};ne.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};L.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};L.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};L.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};L.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};L.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};L.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};L.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};L.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};L.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Nt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Nt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};vt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};vt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};vt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};vt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};vt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(vt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});dn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(dn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),j2},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});dm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Ht.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(br.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(mt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===au},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(au)}}});mt.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?au:ou),this};mt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},mt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Qe.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};Qe.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new mt(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};Qe.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};Qe.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Qe.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Qe.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};Qe.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(Qe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Ua.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?au:ou),this};Ua.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Zr.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Zr.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Zr.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};ws.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Be.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(pn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Te}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Mx}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Pn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});zt.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)};zt.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};zt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};zt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};zt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};zt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};zt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};zt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};zt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};zt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};zt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};zt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};zt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};zt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};zt.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};zt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};zt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};zt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};zt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};zt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};zt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};zt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};zt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};zt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};zt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(zt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?dt:Tr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});Object.defineProperties(v3.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});class MF extends sm{constructor(e,t,i){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),super(e,i)}}Object.defineProperties(Xt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});u1.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new V3().load(n,function(i){e.setBuffer(i)}),this};q3.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};rm.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};rm.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};Io.crossOrigin=void 0;Io.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new F3;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Io.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new N3;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Io.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Io.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function EF(){console.error("THREE.CanvasRenderer has been removed")}function TF(){console.error("THREE.JSONLoader has been removed.")}const bF={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function AF(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}class CF extends Qe{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class RF extends Qe{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function PF(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function LF(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function DF(){console.error("THREE.ImmediateRenderObject has been removed.")}class ab extends Xt{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class IF extends Au{constructor(e,t,i,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,r)}}class NF extends Ef{constructor(e,t,i,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,r)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Tu}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Tu);var zF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:bx,AddEquation:la,AddOperation:S2,AdditiveAnimationBlendMode:Cx,AdditiveBlending:Gv,AlphaFormat:D2,AlwaysDepth:m2,AlwaysStencilFunc:Y2,AmbientLight:i1,AmbientLightProbe:j3,AnimationClip:gf,AnimationLoader:mz,AnimationMixer:Z3,AnimationObjectGroup:Y3,AnimationUtils:Wt,ArcCurve:zx,ArrayCamera:Lx,ArrowHelper:Wz,Audio:u1,AudioAnalyser:q3,AudioContext:a1,AudioListener:wz,AudioLoader:V3,AxesHelper:rb,AxisHelper:vF,BackSide:Nn,BasicDepthPacking:Do,BasicShadowMap:cP,BinaryTextureLoader:SF,Bone:hm,BooleanKeyframeTrack:Ga,BoundingBoxHelper:yF,Box2:Lu,Box3:Oi,Box3Helper:Gz,BoxBufferGeometry:Ts,BoxGeometry:Ts,BoxHelper:ib,BufferAttribute:mt,BufferGeometry:Qe,BufferGeometryLoader:H3,ByteType:A2,Cache:za,Camera:Oa,CameraHelper:Hz,CanvasRenderer:EF,CanvasTexture:E3,CapsuleBufferGeometry:cu,CapsuleGeometry:cu,CatmullRomCurve3:kx,CineonToneMapping:T2,CircleBufferGeometry:fu,CircleGeometry:fu,ClampToEdgeWrapping:$n,Clock:l1,Color:Te,ColorKeyframeTrack:Qx,ColorManagement:Jn,CompressedTexture:Nx,CompressedTextureLoader:gz,ConeBufferGeometry:du,ConeGeometry:du,CubeCamera:rm,CubeReflectionMapping:So,CubeRefractionMapping:Mo,CubeTexture:Cu,CubeTextureLoader:N3,CubeUVReflectionMapping:bu,CubicBezierCurve:mm,CubicBezierCurve3:Bx,CubicInterpolant:P3,CullFaceBack:Hv,CullFaceFront:t2,CullFaceFrontBack:uP,CullFaceNone:e2,Curve:Fi,CurvePath:b3,CustomBlending:n2,CustomToneMapping:b2,CylinderBufferGeometry:bo,CylinderGeometry:bo,Cylindrical:Nz,Data3DTexture:Ef,DataArrayTexture:Au,DataTexture:Ea,DataTexture2DArray:IF,DataTexture3D:NF,DataTextureLoader:z3,DataUtils:qz,DecrementStencilOp:SP,DecrementWrapStencilOp:EP,DefaultLoadingManager:I3,DepthFormat:go,DepthStencilFormat:Eo,DepthTexture:um,DirectionalLight:n1,DirectionalLightHelper:Uz,DiscreteInterpolant:L3,DodecahedronBufferGeometry:hu,DodecahedronGeometry:hu,DoubleSide:Sr,DstAlphaFactor:u2,DstColorFactor:f2,DynamicBufferAttribute:aF,DynamicCopyUsage:BP,DynamicDrawUsage:au,DynamicReadUsage:zP,EdgesGeometry:Ux,EdgesHelper:xF,EllipseCurve:Rf,EqualDepth:v2,EqualStencilFunc:CP,EquirectangularReflectionMapping:tf,EquirectangularRefractionMapping:nf,Euler:Fo,EventDispatcher:ar,ExtrudeBufferGeometry:Zr,ExtrudeGeometry:Zr,FaceColors:Qz,FileLoader:Qr,FlatShading:Mx,Float16BufferAttribute:o3,Float32Attribute:mF,Float32BufferAttribute:Fe,Float64Attribute:gF,Float64BufferAttribute:a3,FloatType:Hr,Fog:Af,FogExp2:bf,Font:LF,FontLoader:PF,FramebufferTexture:M3,FrontSide:wo,Frustum:Tf,GLBufferAttribute:J3,GLSL1:UP,GLSL3:py,GreaterDepth:x2,GreaterEqualDepth:y2,GreaterEqualStencilFunc:DP,GreaterStencilFunc:PP,GridHelper:nb,Group:ga,HalfFloatType:po,HemisphereLight:Kx,HemisphereLightHelper:Bz,HemisphereLightProbe:W3,IcosahedronBufferGeometry:pu,IcosahedronGeometry:pu,ImageBitmapLoader:G3,ImageLoader:vf,ImageUtils:Io,ImmediateRenderObject:DF,IncrementStencilOp:wP,IncrementWrapStencilOp:MP,InstancedBufferAttribute:Pa,InstancedBufferGeometry:o1,InstancedInterleavedBuffer:Q3,InstancedMesh:Dx,Int16Attribute:fF,Int16BufferAttribute:r3,Int32Attribute:hF,Int32BufferAttribute:s3,Int8Attribute:lF,Int8BufferAttribute:t3,IntType:R2,InterleavedBuffer:Ua,InterleavedBufferAttribute:To,Interpolant:As,InterpolateDiscrete:of,InterpolateLinear:af,InterpolateSmooth:tp,InvertStencilOp:TP,JSONLoader:TF,KeepStencilOp:np,KeyframeTrack:Ar,LOD:w3,LatheBufferGeometry:La,LatheGeometry:La,Layers:Ma,LensFlare:AF,LessDepth:g2,LessEqualDepth:Rp,LessEqualStencilFunc:RP,LessStencilFunc:AP,Light:br,LightProbe:Lf,Line:bs,Line3:$3,LineBasicMaterial:Ln,LineCurve:Pf,LineCurve3:T3,LineDashedMaterial:Yx,LineLoop:Ix,LinePieces:Yz,LineSegments:wi,LineStrip:Xz,LinearEncoding:Tr,LinearFilter:Pt,LinearInterpolant:Zx,LinearMipMapLinearFilter:mP,LinearMipMapNearestFilter:pP,LinearMipmapLinearFilter:Lo,LinearMipmapNearestFilter:Ax,LinearSRGBColorSpace:ro,LinearToneMapping:M2,Loader:oi,LoaderUtils:Np,LoadingManager:Jx,LoopOnce:G2,LoopPingPong:W2,LoopRepeat:V2,LuminanceAlphaFormat:z2,LuminanceFormat:N2,MOUSE:sa,Material:pn,MaterialLoader:U3,Math:cS,MathUtils:cS,Matrix3:Mn,Matrix4:ke,MaxEquation:qv,Mesh:dn,MeshBasicMaterial:Rs,MeshDepthMaterial:am,MeshDistanceMaterial:lm,MeshFaceMaterial:Kz,MeshLambertMaterial:qx,MeshMatcapMaterial:Xx,MeshNormalMaterial:Sm,MeshPhongMaterial:Wx,MeshPhysicalMaterial:wm,MeshStandardMaterial:_m,MeshToonMaterial:jx,MinEquation:jv,MirroredRepeatWrapping:sf,MixOperation:w2,MultiMaterial:$z,MultiplyBlending:Wv,MultiplyOperation:Mf,NearestFilter:Ut,NearestMipMapLinearFilter:hP,NearestMipMapNearestFilter:dP,NearestMipmapLinearFilter:Lp,NearestMipmapNearestFilter:Pp,NeverDepth:p2,NeverStencilFunc:bP,NoBlending:ni,NoColorSpace:yP,NoColors:Zz,NoToneMapping:Er,NormalAnimationBlendMode:tm,NormalBlending:_a,NotEqualDepth:_2,NotEqualStencilFunc:LP,NumberKeyframeTrack:pf,Object3D:vt,ObjectLoader:vz,ObjectSpaceNormalMap:X2,OctahedronBufferGeometry:Da,OctahedronGeometry:Da,OneFactor:o2,OneMinusDstAlphaFactor:c2,OneMinusDstColorFactor:d2,OneMinusSrcAlphaFactor:Tx,OneMinusSrcColorFactor:l2,OrthographicCamera:_s,PCFShadowMap:wx,PCFSoftShadowMap:Sx,PMREMGenerator:gy,ParametricGeometry:CF,Particle:tF,ParticleBasicMaterial:rF,ParticleSystem:nF,ParticleSystemMaterial:sF,Path:uu,PerspectiveCamera:Ht,Plane:Br,PlaneBufferGeometry:Ra,PlaneGeometry:Ra,PlaneHelper:Vz,PointCloud:eF,PointCloudMaterial:iF,PointLight:t1,PointLightHelper:Fz,Points:Cf,PointsMaterial:Ha,PolarGridHelper:Oz,PolyhedronBufferGeometry:Yr,PolyhedronGeometry:Yr,PositionalAudio:Mz,PropertyBinding:Et,PropertyMixer:X3,QuadraticBezierCurve:gm,QuadraticBezierCurve3:vm,Quaternion:En,QuaternionKeyframeTrack:Pu,QuaternionLinearInterpolant:D3,REVISION:Tu,RGBADepthPacking:q2,RGBAFormat:Di,RGBAIntegerFormat:U2,RGBA_ASTC_10x10_Format:cy,RGBA_ASTC_10x5_Format:ay,RGBA_ASTC_10x6_Format:ly,RGBA_ASTC_10x8_Format:uy,RGBA_ASTC_12x10_Format:fy,RGBA_ASTC_12x12_Format:dy,RGBA_ASTC_4x4_Format:$v,RGBA_ASTC_5x4_Format:ey,RGBA_ASTC_5x5_Format:ty,RGBA_ASTC_6x5_Format:ny,RGBA_ASTC_6x6_Format:iy,RGBA_ASTC_8x5_Format:ry,RGBA_ASTC_8x6_Format:sy,RGBA_ASTC_8x8_Format:oy,RGBA_BPTC_Format:hy,RGBA_ETC2_EAC_Format:Kv,RGBA_PVRTC_2BPPV1_Format:Qv,RGBA_PVRTC_4BPPV1_Format:Zv,RGBA_S3TC_DXT1_Format:Kh,RGBA_S3TC_DXT3_Format:$h,RGBA_S3TC_DXT5_Format:ep,RGBFormat:I2,RGB_ETC1_Format:H2,RGB_ETC2_Format:Jv,RGB_PVRTC_2BPPV1_Format:Yv,RGB_PVRTC_4BPPV1_Format:Xv,RGB_S3TC_DXT1_Format:Jh,RGFormat:B2,RGIntegerFormat:O2,RawShaderMaterial:Vx,Ray:zo,Raycaster:K3,RectAreaLight:r1,RedFormat:F2,RedIntegerFormat:k2,ReinhardToneMapping:E2,RepeatWrapping:rf,ReplaceStencilOp:_P,ReverseSubtractEquation:r2,RingBufferGeometry:mu,RingGeometry:mu,SRGBColorSpace:kr,Scene:ws,SceneUtils:bF,ShaderChunk:pt,ShaderLib:wr,ShaderMaterial:Pn,ShadowMaterial:Gx,Shape:Wr,ShapeBufferGeometry:Ia,ShapeGeometry:Ia,ShapePath:jz,ShapeUtils:jr,ShortType:C2,Skeleton:pm,SkeletonHelper:eb,SkinnedMesh:dm,SmoothShading:fP,Source:ma,Sphere:No,SphereBufferGeometry:Na,SphereGeometry:Na,Spherical:Sy,SphericalHarmonics3:s1,SplineCurve:ym,SpotLight:e1,SpotLightHelper:zz,Sprite:fm,SpriteMaterial:cm,SrcAlphaFactor:Ex,SrcAlphaSaturateFactor:h2,SrcColorFactor:a2,StaticCopyUsage:kP,StaticDrawUsage:ou,StaticReadUsage:NP,StereoCamera:xz,StreamCopyUsage:OP,StreamDrawUsage:IP,StreamReadUsage:FP,StringKeyframeTrack:Va,SubtractEquation:i2,SubtractiveBlending:Vv,TOUCH:oa,TangentSpaceNormalMap:Ba,TetrahedronBufferGeometry:gu,TetrahedronGeometry:gu,TextGeometry:RF,Texture:hn,TextureLoader:F3,TorusBufferGeometry:vu,TorusGeometry:vu,TorusKnotBufferGeometry:yu,TorusKnotGeometry:yu,Triangle:fn,TriangleFanDrawMode:vP,TriangleStripDrawMode:gP,TrianglesDrawMode:j2,TubeBufferGeometry:xu,TubeGeometry:xu,UVMapping:em,Uint16Attribute:dF,Uint16BufferAttribute:nm,Uint32Attribute:pF,Uint32BufferAttribute:im,Uint8Attribute:uF,Uint8BufferAttribute:n3,Uint8ClampedAttribute:cF,Uint8ClampedBufferAttribute:i3,Uniform:Be,UniformsLib:Ee,UniformsUtils:l3,UnsignedByteType:_i,UnsignedInt248Type:mo,UnsignedIntType:Zl,UnsignedShort4444Type:P2,UnsignedShort5551Type:L2,UnsignedShortType:su,VSMShadowMap:Ol,Vector2:ne,Vector3:L,Vector4:Nt,VectorKeyframeTrack:mf,Vertex:oF,VertexColors:Jz,VideoTexture:S3,WebGL1Renderer:x3,WebGL3DRenderTarget:$2,WebGLArrayRenderTarget:K2,WebGLCubeRenderTarget:sm,WebGLMultipleRenderTargets:e3,WebGLMultisampleRenderTarget:ab,WebGLRenderTarget:Xt,WebGLRenderTargetCube:MF,WebGLRenderer:zt,WebGLUtils:y3,WireframeGeometry:Hx,WireframeHelper:_F,WrapAroundEnding:lf,XHRLoader:wF,ZeroCurvatureEnding:ha,ZeroFactor:s2,ZeroSlopeEnding:pa,ZeroStencilOp:xP,_SRGBAFormat:Dp,sRGBEncoding:dt},Symbol.toStringTag,{value:"Module"})),Ql={exports:{}},Wa={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Wa.ConcurrentRoot=1;Wa.ContinuousEventPriority=4;Wa.DefaultEventPriority=16;Wa.DiscreteEventPriority=1;Wa.IdleEventPriority=536870912;Wa.LegacyRoot=0;Ql.exports=Wa;function FF(n){let e;const t=new Set,i=(f,d)=>{const p=typeof f=="function"?f(e):f;if(p!==e){const m=e;e=d?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},r=()=>e,s=(f,d=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=d(e);function g(){const x=d(e);if(!p(m,x)){const y=m;f(m=x,y)}}return t.add(g),()=>t.delete(g)},c={setState:i,getState:r,subscribe:(f,d,p)=>d||p?s(f,d,p):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,c),c}const kF=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),NM=kF?_e.exports.useEffect:_e.exports.useLayoutEffect;function BF(n){const e=typeof n=="function"?FF(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=_e.exports.useReducer(w=>w+1,0),o=e.getState(),l=_e.exports.useRef(o),c=_e.exports.useRef(i),f=_e.exports.useRef(r),d=_e.exports.useRef(!1),p=_e.exports.useRef();p.current===void 0&&(p.current=i(o));let m,g=!1;(l.current!==o||c.current!==i||f.current!==r||d.current)&&(m=i(o),g=!r(p.current,m)),NM(()=>{g&&(p.current=m),l.current=o,c.current=i,f.current=r,d.current=!1});const x=_e.exports.useRef(o);NM(()=>{const w=()=>{try{const _=e.getState(),E=c.current(_);f.current(p.current,E)||(l.current=_,p.current=E,s())}catch{d.current=!0,s()}},S=e.subscribe(w);return e.getState()!==x.current&&w(),S},[]);const y=g?m:p.current;return _e.exports.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var lb={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OF=function(e){var t={},i=_e.exports,r=zc.exports,s=Object.assign;function o(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),f=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),A=Symbol.iterator;function R(a){return a===null||typeof a!="object"?null:(a=A&&a[A]||a["@@iterator"],typeof a=="function"?a:null)}function P(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case d:return"Fragment";case f:return"Portal";case m:return"Profiler";case p:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case x:return(a.displayName||"Context")+".Consumer";case g:return(a._context.displayName||"Context")+".Provider";case y:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case _:return u=a.displayName||null,u!==null?u:P(a.type)||"Memo";case E:u=a._payload,a=a._init;try{return P(a(u))}catch{}}return null}function D(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(u);case 8:return u===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function V(a){var u=a,h=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(h=u.return),a=u.return;while(a)}return u.tag===3?h:null}function U(a){if(V(a)!==a)throw Error(o(188))}function C(a){var u=a.alternate;if(!u){if(u=V(a),u===null)throw Error(o(188));return u!==a?null:a}for(var h=a,v=u;;){var M=h.return;if(M===null)break;var T=M.alternate;if(T===null){if(v=M.return,v!==null){h=v;continue}break}if(M.child===T.child){for(T=M.child;T;){if(T===h)return U(M),a;if(T===v)return U(M),u;T=T.sibling}throw Error(o(188))}if(h.return!==v.return)h=M,v=T;else{for(var F=!1,G=M.child;G;){if(G===h){F=!0,h=M,v=T;break}if(G===v){F=!0,v=M,h=T;break}G=G.sibling}if(!F){for(G=T.child;G;){if(G===h){F=!0,h=T,v=M;break}if(G===v){F=!0,v=T,h=M;break}G=G.sibling}if(!F)throw Error(o(189))}}if(h.alternate!==v)throw Error(o(190))}if(h.tag!==3)throw Error(o(188));return h.stateNode.current===h?a:u}function k(a){return a=C(a),a!==null?ee(a):null}function ee(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=ee(a);if(u!==null)return u;a=a.sibling}return null}function W(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var u=W(a);if(u!==null)return u}a=a.sibling}return null}var K=Array.isArray,X=e.getPublicInstance,$=e.getRootHostContext,O=e.getChildHostContext,q=e.prepareForCommit,Q=e.resetAfterCommit,oe=e.createInstance,de=e.appendInitialChild,ve=e.finalizeInitialChildren,Ye=e.prepareUpdate,Ue=e.shouldSetTextContent,ae=e.createTextInstance,at=e.scheduleTimeout,et=e.cancelTimeout,Je=e.noTimeout,we=e.isPrimaryRenderer,Ze=e.supportsMutation,ce=e.supportsPersistence,le=e.supportsHydration,ye=e.getInstanceFromNode,ze=e.preparePortalMount,Re=e.getCurrentEventPriority,$e=e.detachDeletedInstance,We=e.supportsMicrotasks,Ge=e.scheduleMicrotask,Tt=e.supportsTestSelectors,Lt=e.findFiberRoot,B=e.getBoundingRect,I=e.getTextContent,ie=e.isHiddenSubtree,me=e.matchAccessibilityRole,be=e.setFocusIfFocusable,De=e.setupIntersectionObserver,je=e.appendChild,ue=e.appendChildToContainer,tt=e.commitTextUpdate,nt=e.commitMount,H=e.commitUpdate,N=e.insertBefore,fe=e.insertInContainerBefore,he=e.removeChild,Ie=e.removeChildFromContainer,Me=e.resetTextContent,qe=e.hideInstance,Se=e.hideTextInstance,Ve=e.unhideInstance,gt=e.unhideTextInstance,yt=e.clearContainer,Ui=e.cloneInstance,Si=e.createContainerChildSet,If=e.appendChildToContainerChildSet,ja=e.finalizeContainerChildren,Nf=e.replaceContainerChildren,qa=e.cloneHiddenInstance,Iu=e.cloneHiddenTextInstance,Em=e.canHydrateInstance,Tm=e.canHydrateTextInstance,bm=e.canHydrateSuspenseInstance,z=e.isSuspenseInstancePending,Y=e.isSuspenseInstanceFallback,re=e.registerSuspenseInstanceRetry,J=e.getNextHydratableSibling,pe=e.getFirstHydratableChild,Ke=e.getFirstHydratableChildWithinContainer,it=e.getFirstHydratableChildWithinSuspenseInstance,ut=e.hydrateInstance,lt=e.hydrateTextInstance,Dt=e.hydrateSuspenseInstance,wt=e.getNextHydratableInstanceAfterSuspenseInstance,St=e.commitHydratedContainer,Yt=e.commitHydratedSuspenseInstance,$r=e.clearSuspenseBoundary,Ps=e.clearSuspenseBoundaryFromContainer,Ls=e.shouldDeleteUnhydratedTailInstances,Hi=e.didNotMatchHydratedContainerTextInstance,bt=e.didNotMatchHydratedTextInstance,Rr;function Ot(a){if(Rr===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Rr=u&&u[1]||""}return`
`+Rr+a}var ai=!1;function Gi(a,u){if(!a||ai)return"";ai=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(xe){var v=xe}Reflect.construct(a,[],u)}else{try{u.call()}catch(xe){v=xe}a.call(u.prototype)}else{try{throw Error()}catch(xe){v=xe}a()}}catch(xe){if(xe&&v&&typeof xe.stack=="string"){for(var M=xe.stack.split(`
`),T=v.stack.split(`
`),F=M.length-1,G=T.length-1;1<=F&&0<=G&&M[F]!==T[G];)G--;for(;1<=F&&0<=G;F--,G--)if(M[F]!==T[G]){if(F!==1||G!==1)do if(F--,G--,0>G||M[F]!==T[G]){var se=`
`+M[F].replace(" at new "," at ");return a.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",a.displayName)),se}while(1<=F&&0<=G);break}}}finally{ai=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?Ot(a):""}var ko=Object.prototype.hasOwnProperty,Bo=[],Jt=-1;function li(a){return{current:a}}function Ft(a){0>Jt||(a.current=Bo[Jt],Bo[Jt]=null,Jt--)}function ht(a,u){Jt++,Bo[Jt]=a.current,a.current=u}var Ds={},kn=li(Ds),ui=li(!1),Oo=Ds;function Xa(a,u){var h=a.type.contextTypes;if(!h)return Ds;var v=a.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===u)return v.__reactInternalMemoizedMaskedChildContext;var M={},T;for(T in h)M[T]=u[T];return v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=M),M}function ci(a){return a=a.childContextTypes,a!=null}function zf(){Ft(ui),Ft(kn)}function p1(a,u,h){if(kn.current!==Ds)throw Error(o(168));ht(kn,u),ht(ui,h)}function m1(a,u,h){var v=a.stateNode;if(u=u.childContextTypes,typeof v.getChildContext!="function")return h;v=v.getChildContext();for(var M in v)if(!(M in u))throw Error(o(108,D(a)||"Unknown",M));return s({},h,v)}function Ff(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ds,Oo=kn.current,ht(kn,a),ht(ui,ui.current),!0}function g1(a,u,h){var v=a.stateNode;if(!v)throw Error(o(169));h?(a=m1(a,u,Oo),v.__reactInternalMemoizedMergedChildContext=a,Ft(ui),Ft(kn),ht(kn,a)):Ft(ui),ht(ui,h)}var cr=Math.clz32?Math.clz32:Cb,bb=Math.log,Ab=Math.LN2;function Cb(a){return a>>>=0,a===0?32:31-(bb(a)/Ab|0)|0}var kf=64,Bf=4194304;function Nu(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Of(a,u){var h=a.pendingLanes;if(h===0)return 0;var v=0,M=a.suspendedLanes,T=a.pingedLanes,F=h&268435455;if(F!==0){var G=F&~M;G!==0?v=Nu(G):(T&=F,T!==0&&(v=Nu(T)))}else F=h&~M,F!==0?v=Nu(F):T!==0&&(v=Nu(T));if(v===0)return 0;if(u!==0&&u!==v&&(u&M)===0&&(M=v&-v,T=u&-u,M>=T||M===16&&(T&4194240)!==0))return u;if((v&4)!==0&&(v|=h&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=v;0<u;)h=31-cr(u),M=1<<h,v|=a[h],u&=~M;return v}function Rb(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pb(a,u){for(var h=a.suspendedLanes,v=a.pingedLanes,M=a.expirationTimes,T=a.pendingLanes;0<T;){var F=31-cr(T),G=1<<F,se=M[F];se===-1?((G&h)===0||(G&v)!==0)&&(M[F]=Rb(G,u)):se<=u&&(a.expiredLanes|=G),T&=~G}}function Am(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Cm(a){for(var u=[],h=0;31>h;h++)u.push(a);return u}function zu(a,u,h){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-cr(u),a[u]=h}function Lb(a,u){var h=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var v=a.eventTimes;for(a=a.expirationTimes;0<h;){var M=31-cr(h),T=1<<M;u[M]=0,v[M]=-1,a[M]=-1,h&=~T}}function Rm(a,u){var h=a.entangledLanes|=u;for(a=a.entanglements;h;){var v=31-cr(h),M=1<<v;M&u|a[v]&u&&(a[v]|=u),h&=~M}}var At=0;function v1(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Pm=r.unstable_scheduleCallback,y1=r.unstable_cancelCallback,Db=r.unstable_shouldYield,Ib=r.unstable_requestPaint,Tn=r.unstable_now,Lm=r.unstable_ImmediatePriority,Nb=r.unstable_UserBlockingPriority,Dm=r.unstable_NormalPriority,zb=r.unstable_IdlePriority,Uf=null,Pr=null;function Fb(a){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(Uf,a,void 0,(a.current.flags&128)===128)}catch{}}function kb(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var Lr=typeof Object.is=="function"?Object.is:kb,es=null,Hf=!1,Im=!1;function x1(a){es===null?es=[a]:es.push(a)}function Bb(a){Hf=!0,x1(a)}function Dr(){if(!Im&&es!==null){Im=!0;var a=0,u=At;try{var h=es;for(At=1;a<h.length;a++){var v=h[a];do v=v(!0);while(v!==null)}es=null,Hf=!1}catch(M){throw es!==null&&(es=es.slice(a+1)),Pm(Lm,Dr),M}finally{At=u,Im=!1}}return null}var Ob=l.ReactCurrentBatchConfig;function Gf(a,u){if(Lr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var h=Object.keys(a),v=Object.keys(u);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var M=h[v];if(!ko.call(u,M)||!Lr(a[M],u[M]))return!1}return!0}function Ub(a){switch(a.tag){case 5:return Ot(a.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 2:case 15:return a=Gi(a.type,!1),a;case 11:return a=Gi(a.type.render,!1),a;case 1:return a=Gi(a.type,!0),a;default:return""}}function fr(a,u){if(a&&a.defaultProps){u=s({},u),a=a.defaultProps;for(var h in a)u[h]===void 0&&(u[h]=a[h]);return u}return u}var Vf=li(null),Wf=null,Ya=null,Nm=null;function zm(){Nm=Ya=Wf=null}function _1(a,u,h){we?(ht(Vf,u._currentValue),u._currentValue=h):(ht(Vf,u._currentValue2),u._currentValue2=h)}function Fm(a){var u=Vf.current;Ft(Vf),we?a._currentValue=u:a._currentValue2=u}function km(a,u,h){for(;a!==null;){var v=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),a===h)break;a=a.return}}function Za(a,u){Wf=a,Nm=Ya=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(Ti=!0),a.firstContext=null)}function Vi(a){var u=we?a._currentValue:a._currentValue2;if(Nm!==a)if(a={context:a,memoizedValue:u,next:null},Ya===null){if(Wf===null)throw Error(o(308));Ya=a,Wf.dependencies={lanes:0,firstContext:a}}else Ya=Ya.next=a;return u}var Ir=null,Is=!1;function Bm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w1(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ts(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function Ns(a,u){var h=a.updateQueue;h!==null&&(h=h.shared,mn!==null&&(a.mode&1)!==0&&(ft&2)===0?(a=h.interleaved,a===null?(u.next=u,Ir===null?Ir=[h]:Ir.push(h)):(u.next=a.next,a.next=u),h.interleaved=u):(a=h.pending,a===null?u.next=u:(u.next=a.next,a.next=u),h.pending=u))}function jf(a,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194240)!==0)){var v=u.lanes;v&=a.pendingLanes,h|=v,u.lanes=h,Rm(a,h)}}function S1(a,u){var h=a.updateQueue,v=a.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var M=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var F={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};T===null?M=T=F:T=T.next=F,h=h.next}while(h!==null);T===null?M=T=u:T=T.next=u}else M=T=u;h={baseState:v.baseState,firstBaseUpdate:M,lastBaseUpdate:T,shared:v.shared,effects:v.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=u}function qf(a,u,h,v){var M=a.updateQueue;Is=!1;var T=M.firstBaseUpdate,F=M.lastBaseUpdate,G=M.shared.pending;if(G!==null){M.shared.pending=null;var se=G,xe=se.next;se.next=null,F===null?T=xe:F.next=xe,F=se;var Ne=a.alternate;Ne!==null&&(Ne=Ne.updateQueue,G=Ne.lastBaseUpdate,G!==F&&(G===null?Ne.firstBaseUpdate=xe:G.next=xe,Ne.lastBaseUpdate=se))}if(T!==null){var rt=M.baseState;F=0,Ne=xe=se=null,G=T;do{var Xe=G.lane,Bt=G.eventTime;if((v&Xe)===Xe){Ne!==null&&(Ne=Ne.next={eventTime:Bt,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var He=a,Hn=G;switch(Xe=u,Bt=h,Hn.tag){case 1:if(He=Hn.payload,typeof He=="function"){rt=He.call(Bt,rt,Xe);break e}rt=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Hn.payload,Xe=typeof He=="function"?He.call(Bt,rt,Xe):He,Xe==null)break e;rt=s({},rt,Xe);break e;case 2:Is=!0}}G.callback!==null&&G.lane!==0&&(a.flags|=64,Xe=M.effects,Xe===null?M.effects=[G]:Xe.push(G))}else Bt={eventTime:Bt,lane:Xe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Ne===null?(xe=Ne=Bt,se=rt):Ne=Ne.next=Bt,F|=Xe;if(G=G.next,G===null){if(G=M.shared.pending,G===null)break;Xe=G,G=Xe.next,Xe.next=null,M.lastBaseUpdate=Xe,M.shared.pending=null}}while(1);if(Ne===null&&(se=rt),M.baseState=se,M.firstBaseUpdate=xe,M.lastBaseUpdate=Ne,u=M.shared.interleaved,u!==null){M=u;do F|=M.lane,M=M.next;while(M!==u)}else T===null&&(M.shared.lanes=0);rl|=F,a.lanes=F,a.memoizedState=rt}}function M1(a,u,h){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var v=a[u],M=v.callback;if(M!==null){if(v.callback=null,v=h,typeof M!="function")throw Error(o(191,M));M.call(v)}}}var E1=new i.Component().refs;function Om(a,u,h,v){u=a.memoizedState,h=h(v,u),h=h==null?u:s({},u,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Xf={isMounted:function(a){return(a=a._reactInternals)?V(a)===a:!1},enqueueSetState:function(a,u,h){a=a._reactInternals;var v=Zn(),M=ks(a),T=ts(v,M);T.payload=u,h!=null&&(T.callback=h),Ns(a,T),u=Yi(a,M,v),u!==null&&jf(u,a,M)},enqueueReplaceState:function(a,u,h){a=a._reactInternals;var v=Zn(),M=ks(a),T=ts(v,M);T.tag=1,T.payload=u,h!=null&&(T.callback=h),Ns(a,T),u=Yi(a,M,v),u!==null&&jf(u,a,M)},enqueueForceUpdate:function(a,u){a=a._reactInternals;var h=Zn(),v=ks(a),M=ts(h,v);M.tag=2,u!=null&&(M.callback=u),Ns(a,M),u=Yi(a,v,h),u!==null&&jf(u,a,v)}};function T1(a,u,h,v,M,T,F){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(v,T,F):u.prototype&&u.prototype.isPureReactComponent?!Gf(h,v)||!Gf(M,T):!0}function b1(a,u,h){var v=!1,M=Ds,T=u.contextType;return typeof T=="object"&&T!==null?T=Vi(T):(M=ci(u)?Oo:kn.current,v=u.contextTypes,T=(v=v!=null)?Xa(a,M):Ds),u=new u(h,T),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Xf,a.stateNode=u,u._reactInternals=a,v&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=M,a.__reactInternalMemoizedMaskedChildContext=T),u}function A1(a,u,h,v){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,v),u.state!==a&&Xf.enqueueReplaceState(u,u.state,null)}function Um(a,u,h,v){var M=a.stateNode;M.props=h,M.state=a.memoizedState,M.refs=E1,Bm(a);var T=u.contextType;typeof T=="object"&&T!==null?M.context=Vi(T):(T=ci(u)?Oo:kn.current,M.context=Xa(a,T)),M.state=a.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(Om(a,u,T,h),M.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(u=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),u!==M.state&&Xf.enqueueReplaceState(M,M.state,null),qf(a,h,M,v),M.state=a.memoizedState),typeof M.componentDidMount=="function"&&(a.flags|=4194308)}var Qa=[],Ja=0,Yf=null,Zf=0,Wi=[],ji=0,Uo=null,ns=1,is="";function Ho(a,u){Qa[Ja++]=Zf,Qa[Ja++]=Yf,Yf=a,Zf=u}function C1(a,u,h){Wi[ji++]=ns,Wi[ji++]=is,Wi[ji++]=Uo,Uo=a;var v=ns;a=is;var M=32-cr(v)-1;v&=~(1<<M),h+=1;var T=32-cr(u)+M;if(30<T){var F=M-M%5;T=(v&(1<<F)-1).toString(32),v>>=F,M-=F,ns=1<<32-cr(u)+M|h<<M|v,is=T+a}else ns=1<<T|h<<M|v,is=a}function Hm(a){a.return!==null&&(Ho(a,1),C1(a,1,0))}function Gm(a){for(;a===Yf;)Yf=Qa[--Ja],Qa[Ja]=null,Zf=Qa[--Ja],Qa[Ja]=null;for(;a===Uo;)Uo=Wi[--ji],Wi[ji]=null,is=Wi[--ji],Wi[ji]=null,ns=Wi[--ji],Wi[ji]=null}var Mi=null,Ei=null,Zt=!1,Fu=!1,dr=null;function R1(a,u){var h=Zi(5,null,null,0);h.elementType="DELETED",h.stateNode=u,h.return=a,u=a.deletions,u===null?(a.deletions=[h],a.flags|=16):u.push(h)}function P1(a,u){switch(a.tag){case 5:return u=Em(u,a.type,a.pendingProps),u!==null?(a.stateNode=u,Mi=a,Ei=pe(u),!0):!1;case 6:return u=Tm(u,a.pendingProps),u!==null?(a.stateNode=u,Mi=a,Ei=null,!0):!1;case 13:if(u=bm(u),u!==null){var h=Uo!==null?{id:ns,overflow:is}:null;return a.memoizedState={dehydrated:u,treeContext:h,retryLane:1073741824},h=Zi(18,null,null,0),h.stateNode=u,h.return=a,a.child=h,Mi=a,Ei=null,!0}return!1;default:return!1}}function Vm(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Wm(a){if(Zt){var u=Ei;if(u){var h=u;if(!P1(a,u)){if(Vm(a))throw Error(o(418));u=J(h);var v=Mi;u&&P1(a,u)?R1(v,h):(a.flags=a.flags&-4097|2,Zt=!1,Mi=a)}}else{if(Vm(a))throw Error(o(418));a.flags=a.flags&-4097|2,Zt=!1,Mi=a}}}function L1(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Mi=a}function ku(a){if(!le||a!==Mi)return!1;if(!Zt)return L1(a),Zt=!0,!1;if(a.tag!==3&&(a.tag!==5||Ls(a.type)&&!Ue(a.type,a.memoizedProps))){var u=Ei;if(u){if(Vm(a)){for(a=Ei;a;)a=J(a);throw Error(o(418))}for(;u;)R1(a,u),u=J(u)}}if(L1(a),a.tag===13){if(!le)throw Error(o(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));Ei=wt(a)}else Ei=Mi?J(a.stateNode):null;return!0}function Ka(){le&&(Ei=Mi=null,Fu=Zt=!1)}function jm(a){dr===null?dr=[a]:dr.push(a)}function Bu(a,u,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(o(309));var v=h.stateNode}if(!v)throw Error(o(147,a));var M=v,T=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===T?u.ref:(u=function(F){var G=M.refs;G===E1&&(G=M.refs={}),F===null?delete G[T]:G[T]=F},u._stringRef=T,u)}if(typeof a!="string")throw Error(o(284));if(!h._owner)throw Error(o(290,a))}return a}function Qf(a,u){throw a=Object.prototype.toString.call(u),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function D1(a){var u=a._init;return u(a._payload)}function I1(a){function u(Z,j){if(a){var te=Z.deletions;te===null?(Z.deletions=[j],Z.flags|=16):te.push(j)}}function h(Z,j){if(!a)return null;for(;j!==null;)u(Z,j),j=j.sibling;return null}function v(Z,j){for(Z=new Map;j!==null;)j.key!==null?Z.set(j.key,j):Z.set(j.index,j),j=j.sibling;return Z}function M(Z,j){return Z=Os(Z,j),Z.index=0,Z.sibling=null,Z}function T(Z,j,te){return Z.index=te,a?(te=Z.alternate,te!==null?(te=te.index,te<j?(Z.flags|=2,j):te):(Z.flags|=2,j)):(Z.flags|=1048576,j)}function F(Z){return a&&Z.alternate===null&&(Z.flags|=2),Z}function G(Z,j,te,Le){return j===null||j.tag!==6?(j=Cg(te,Z.mode,Le),j.return=Z,j):(j=M(j,te),j.return=Z,j)}function se(Z,j,te,Le){var Oe=te.type;return Oe===d?Ne(Z,j,te.props.children,Le,te.key):j!==null&&(j.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===E&&D1(Oe)===j.type)?(Le=M(j,te.props),Le.ref=Bu(Z,j,te),Le.return=Z,Le):(Le=Ad(te.type,te.key,te.props,null,Z.mode,Le),Le.ref=Bu(Z,j,te),Le.return=Z,Le)}function xe(Z,j,te,Le){return j===null||j.tag!==4||j.stateNode.containerInfo!==te.containerInfo||j.stateNode.implementation!==te.implementation?(j=Rg(te,Z.mode,Le),j.return=Z,j):(j=M(j,te.children||[]),j.return=Z,j)}function Ne(Z,j,te,Le,Oe){return j===null||j.tag!==7?(j=Yo(te,Z.mode,Le,Oe),j.return=Z,j):(j=M(j,te),j.return=Z,j)}function rt(Z,j,te){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Cg(""+j,Z.mode,te),j.return=Z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case c:return te=Ad(j.type,j.key,j.props,null,Z.mode,te),te.ref=Bu(Z,null,j),te.return=Z,te;case f:return j=Rg(j,Z.mode,te),j.return=Z,j;case E:var Le=j._init;return rt(Z,Le(j._payload),te)}if(K(j)||R(j))return j=Yo(j,Z.mode,te,null),j.return=Z,j;Qf(Z,j)}return null}function Xe(Z,j,te,Le){var Oe=j!==null?j.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Oe!==null?null:G(Z,j,""+te,Le);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case c:return te.key===Oe?se(Z,j,te,Le):null;case f:return te.key===Oe?xe(Z,j,te,Le):null;case E:return Oe=te._init,Xe(Z,j,Oe(te._payload),Le)}if(K(te)||R(te))return Oe!==null?null:Ne(Z,j,te,Le,null);Qf(Z,te)}return null}function Bt(Z,j,te,Le,Oe){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Z=Z.get(te)||null,G(j,Z,""+Le,Oe);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case c:return Z=Z.get(Le.key===null?te:Le.key)||null,se(j,Z,Le,Oe);case f:return Z=Z.get(Le.key===null?te:Le.key)||null,xe(j,Z,Le,Oe);case E:var ct=Le._init;return Bt(Z,j,te,ct(Le._payload),Oe)}if(K(Le)||R(Le))return Z=Z.get(te)||null,Ne(j,Z,Le,Oe,null);Qf(j,Le)}return null}function He(Z,j,te,Le){for(var Oe=null,ct=null,st=j,Ct=j=0,An=null;st!==null&&Ct<te.length;Ct++){st.index>Ct?(An=st,st=null):An=st.sibling;var Rt=Xe(Z,st,te[Ct],Le);if(Rt===null){st===null&&(st=An);break}a&&st&&Rt.alternate===null&&u(Z,st),j=T(Rt,j,Ct),ct===null?Oe=Rt:ct.sibling=Rt,ct=Rt,st=An}if(Ct===te.length)return h(Z,st),Zt&&Ho(Z,Ct),Oe;if(st===null){for(;Ct<te.length;Ct++)st=rt(Z,te[Ct],Le),st!==null&&(j=T(st,j,Ct),ct===null?Oe=st:ct.sibling=st,ct=st);return Zt&&Ho(Z,Ct),Oe}for(st=v(Z,st);Ct<te.length;Ct++)An=Bt(st,Z,Ct,te[Ct],Le),An!==null&&(a&&An.alternate!==null&&st.delete(An.key===null?Ct:An.key),j=T(An,j,Ct),ct===null?Oe=An:ct.sibling=An,ct=An);return a&&st.forEach(function(Us){return u(Z,Us)}),Zt&&Ho(Z,Ct),Oe}function Hn(Z,j,te,Le){var Oe=R(te);if(typeof Oe!="function")throw Error(o(150));if(te=Oe.call(te),te==null)throw Error(o(151));for(var ct=Oe=null,st=j,Ct=j=0,An=null,Rt=te.next();st!==null&&!Rt.done;Ct++,Rt=te.next()){st.index>Ct?(An=st,st=null):An=st.sibling;var Us=Xe(Z,st,Rt.value,Le);if(Us===null){st===null&&(st=An);break}a&&st&&Us.alternate===null&&u(Z,st),j=T(Us,j,Ct),ct===null?Oe=Us:ct.sibling=Us,ct=Us,st=An}if(Rt.done)return h(Z,st),Zt&&Ho(Z,Ct),Oe;if(st===null){for(;!Rt.done;Ct++,Rt=te.next())Rt=rt(Z,Rt.value,Le),Rt!==null&&(j=T(Rt,j,Ct),ct===null?Oe=Rt:ct.sibling=Rt,ct=Rt);return Zt&&Ho(Z,Ct),Oe}for(st=v(Z,st);!Rt.done;Ct++,Rt=te.next())Rt=Bt(st,Z,Ct,Rt.value,Le),Rt!==null&&(a&&Rt.alternate!==null&&st.delete(Rt.key===null?Ct:Rt.key),j=T(Rt,j,Ct),ct===null?Oe=Rt:ct.sibling=Rt,ct=Rt);return a&&st.forEach(function(gA){return u(Z,gA)}),Zt&&Ho(Z,Ct),Oe}function Qi(Z,j,te,Le){if(typeof te=="object"&&te!==null&&te.type===d&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case c:e:{for(var Oe=te.key,ct=j;ct!==null;){if(ct.key===Oe){if(Oe=te.type,Oe===d){if(ct.tag===7){h(Z,ct.sibling),j=M(ct,te.props.children),j.return=Z,Z=j;break e}}else if(ct.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===E&&D1(Oe)===ct.type){h(Z,ct.sibling),j=M(ct,te.props),j.ref=Bu(Z,ct,te),j.return=Z,Z=j;break e}h(Z,ct);break}else u(Z,ct);ct=ct.sibling}te.type===d?(j=Yo(te.props.children,Z.mode,Le,te.key),j.return=Z,Z=j):(Le=Ad(te.type,te.key,te.props,null,Z.mode,Le),Le.ref=Bu(Z,j,te),Le.return=Z,Z=Le)}return F(Z);case f:e:{for(ct=te.key;j!==null;){if(j.key===ct)if(j.tag===4&&j.stateNode.containerInfo===te.containerInfo&&j.stateNode.implementation===te.implementation){h(Z,j.sibling),j=M(j,te.children||[]),j.return=Z,Z=j;break e}else{h(Z,j);break}else u(Z,j);j=j.sibling}j=Rg(te,Z.mode,Le),j.return=Z,Z=j}return F(Z);case E:return ct=te._init,Qi(Z,j,ct(te._payload),Le)}if(K(te))return He(Z,j,te,Le);if(R(te))return Hn(Z,j,te,Le);Qf(Z,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,j!==null&&j.tag===6?(h(Z,j.sibling),j=M(j,te),j.return=Z,Z=j):(h(Z,j),j=Cg(te,Z.mode,Le),j.return=Z,Z=j),F(Z)):h(Z,j)}return Qi}var $a=I1(!0),N1=I1(!1),Ou={},qi=li(Ou),Uu=li(Ou),el=li(Ou);function Nr(a){if(a===Ou)throw Error(o(174));return a}function qm(a,u){ht(el,u),ht(Uu,a),ht(qi,Ou),a=$(u),Ft(qi),ht(qi,a)}function tl(){Ft(qi),Ft(Uu),Ft(el)}function z1(a){var u=Nr(el.current),h=Nr(qi.current);u=O(h,a.type,u),h!==u&&(ht(Uu,a),ht(qi,u))}function Xm(a){Uu.current===a&&(Ft(qi),Ft(Uu))}var Kt=li(0);function Jf(a){for(var u=a;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||z(h)||Y(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ym=[];function Zm(){for(var a=0;a<Ym.length;a++){var u=Ym[a];we?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Ym.length=0}var Kf=l.ReactCurrentDispatcher,Xi=l.ReactCurrentBatchConfig,nl=0,rn=null,Bn=null,bn=null,$f=!1,Hu=!1,Gu=0,Hb=0;function On(){throw Error(o(321))}function Qm(a,u){if(u===null)return!1;for(var h=0;h<u.length&&h<a.length;h++)if(!Lr(a[h],u[h]))return!1;return!0}function Jm(a,u,h,v,M,T){if(nl=T,rn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Kf.current=a===null||a.memoizedState===null?jb:qb,a=h(v,M),Hu){T=0;do{if(Hu=!1,Gu=0,25<=T)throw Error(o(301));T+=1,bn=Bn=null,u.updateQueue=null,Kf.current=Xb,a=h(v,M)}while(Hu)}if(Kf.current=rd,u=Bn!==null&&Bn.next!==null,nl=0,bn=Bn=rn=null,$f=!1,u)throw Error(o(300));return a}function Km(){var a=Gu!==0;return Gu=0,a}function rs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?rn.memoizedState=bn=a:bn=bn.next=a,bn}function zr(){if(Bn===null){var a=rn.alternate;a=a!==null?a.memoizedState:null}else a=Bn.next;var u=bn===null?rn.memoizedState:bn.next;if(u!==null)bn=u,Bn=a;else{if(a===null)throw Error(o(310));Bn=a,a={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},bn===null?rn.memoizedState=bn=a:bn=bn.next=a}return bn}function Go(a,u){return typeof u=="function"?u(a):u}function ed(a){var u=zr(),h=u.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=a;var v=Bn,M=v.baseQueue,T=h.pending;if(T!==null){if(M!==null){var F=M.next;M.next=T.next,T.next=F}v.baseQueue=M=T,h.pending=null}if(M!==null){T=M.next,v=v.baseState;var G=F=null,se=null,xe=T;do{var Ne=xe.lane;if((nl&Ne)===Ne)se!==null&&(se=se.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),v=xe.hasEagerState?xe.eagerState:a(v,xe.action);else{var rt={lane:Ne,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};se===null?(G=se=rt,F=v):se=se.next=rt,rn.lanes|=Ne,rl|=Ne}xe=xe.next}while(xe!==null&&xe!==T);se===null?F=v:se.next=G,Lr(v,u.memoizedState)||(Ti=!0),u.memoizedState=v,u.baseState=F,u.baseQueue=se,h.lastRenderedState=v}if(a=h.interleaved,a!==null){M=a;do T=M.lane,rn.lanes|=T,rl|=T,M=M.next;while(M!==a)}else M===null&&(h.lanes=0);return[u.memoizedState,h.dispatch]}function td(a){var u=zr(),h=u.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=a;var v=h.dispatch,M=h.pending,T=u.memoizedState;if(M!==null){h.pending=null;var F=M=M.next;do T=a(T,F.action),F=F.next;while(F!==M);Lr(T,u.memoizedState)||(Ti=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),h.lastRenderedState=T}return[T,v]}function F1(){}function k1(a,u){var h=rn,v=zr(),M=u(),T=!Lr(v.memoizedState,M);if(T&&(v.memoizedState=M,Ti=!0),v=v.queue,Wu(U1.bind(null,h,v,a),[a]),v.getSnapshot!==u||T||bn!==null&&bn.memoizedState.tag&1){if(h.flags|=2048,Vu(9,O1.bind(null,h,v,M,u),void 0,null),mn===null)throw Error(o(349));(nl&30)!==0||B1(h,u,M)}return M}function B1(a,u,h){a.flags|=16384,a={getSnapshot:u,value:h},u=rn.updateQueue,u===null?(u={lastEffect:null,stores:null},rn.updateQueue=u,u.stores=[a]):(h=u.stores,h===null?u.stores=[a]:h.push(a))}function O1(a,u,h,v){u.value=h,u.getSnapshot=v,H1(u)&&Yi(a,1,-1)}function U1(a,u,h){return h(function(){H1(u)&&Yi(a,1,-1)})}function H1(a){var u=a.getSnapshot;a=a.value;try{var h=u();return!Lr(a,h)}catch{return!0}}function $m(a){var u=rs();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:a},u.queue=a,a=a.dispatch=Wb.bind(null,rn,a),[u.memoizedState,a]}function Vu(a,u,h,v){return a={tag:a,create:u,destroy:h,deps:v,next:null},u=rn.updateQueue,u===null?(u={lastEffect:null,stores:null},rn.updateQueue=u,u.lastEffect=a.next=a):(h=u.lastEffect,h===null?u.lastEffect=a.next=a:(v=h.next,h.next=a,a.next=v,u.lastEffect=a)),a}function G1(){return zr().memoizedState}function nd(a,u,h,v){var M=rs();rn.flags|=a,M.memoizedState=Vu(1|u,h,void 0,v===void 0?null:v)}function id(a,u,h,v){var M=zr();v=v===void 0?null:v;var T=void 0;if(Bn!==null){var F=Bn.memoizedState;if(T=F.destroy,v!==null&&Qm(v,F.deps)){M.memoizedState=Vu(u,h,T,v);return}}rn.flags|=a,M.memoizedState=Vu(1|u,h,T,v)}function eg(a,u){return nd(8390656,8,a,u)}function Wu(a,u){return id(2048,8,a,u)}function V1(a,u){return id(4,2,a,u)}function W1(a,u){return id(4,4,a,u)}function j1(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function q1(a,u,h){return h=h!=null?h.concat([a]):null,id(4,4,j1.bind(null,u,a),h)}function tg(){}function X1(a,u){var h=zr();u=u===void 0?null:u;var v=h.memoizedState;return v!==null&&u!==null&&Qm(u,v[1])?v[0]:(h.memoizedState=[a,u],a)}function Y1(a,u){var h=zr();u=u===void 0?null:u;var v=h.memoizedState;return v!==null&&u!==null&&Qm(u,v[1])?v[0]:(a=a(),h.memoizedState=[a,u],a)}function Gb(a,u){var h=At;At=h!==0&&4>h?h:4,a(!0);var v=Xi.transition;Xi.transition={};try{a(!1),u()}finally{At=h,Xi.transition=v}}function Z1(){return zr().memoizedState}function Vb(a,u,h){var v=ks(a);h={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null},Q1(a)?J1(u,h):(K1(a,u,h),h=Zn(),a=Yi(a,v,h),a!==null&&$1(a,u,v))}function Wb(a,u,h){var v=ks(a),M={lane:v,action:h,hasEagerState:!1,eagerState:null,next:null};if(Q1(a))J1(u,M);else{K1(a,u,M);var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=u.lastRenderedReducer,T!==null))try{var F=u.lastRenderedState,G=T(F,h);if(M.hasEagerState=!0,M.eagerState=G,Lr(G,F))return}catch{}finally{}h=Zn(),a=Yi(a,v,h),a!==null&&$1(a,u,v)}}function Q1(a){var u=a.alternate;return a===rn||u!==null&&u===rn}function J1(a,u){Hu=$f=!0;var h=a.pending;h===null?u.next=u:(u.next=h.next,h.next=u),a.pending=u}function K1(a,u,h){mn!==null&&(a.mode&1)!==0&&(ft&2)===0?(a=u.interleaved,a===null?(h.next=h,Ir===null?Ir=[u]:Ir.push(u)):(h.next=a.next,a.next=h),u.interleaved=h):(a=u.pending,a===null?h.next=h:(h.next=a.next,a.next=h),u.pending=h)}function $1(a,u,h){if((h&4194240)!==0){var v=u.lanes;v&=a.pendingLanes,h|=v,u.lanes=h,Rm(a,h)}}var rd={readContext:Vi,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},jb={readContext:Vi,useCallback:function(a,u){return rs().memoizedState=[a,u===void 0?null:u],a},useContext:Vi,useEffect:eg,useImperativeHandle:function(a,u,h){return h=h!=null?h.concat([a]):null,nd(4194308,4,j1.bind(null,u,a),h)},useLayoutEffect:function(a,u){return nd(4194308,4,a,u)},useInsertionEffect:function(a,u){return nd(4,2,a,u)},useMemo:function(a,u){var h=rs();return u=u===void 0?null:u,a=a(),h.memoizedState=[a,u],a},useReducer:function(a,u,h){var v=rs();return u=h!==void 0?h(u):u,v.memoizedState=v.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},v.queue=a,a=a.dispatch=Vb.bind(null,rn,a),[v.memoizedState,a]},useRef:function(a){var u=rs();return a={current:a},u.memoizedState=a},useState:$m,useDebugValue:tg,useDeferredValue:function(a){var u=$m(a),h=u[0],v=u[1];return eg(function(){var M=Xi.transition;Xi.transition={};try{v(a)}finally{Xi.transition=M}},[a]),h},useTransition:function(){var a=$m(!1),u=a[0];return a=Gb.bind(null,a[1]),rs().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,h){var v=rn,M=rs();if(Zt){if(h===void 0)throw Error(o(407));h=h()}else{if(h=u(),mn===null)throw Error(o(349));(nl&30)!==0||B1(v,u,h)}M.memoizedState=h;var T={value:h,getSnapshot:u};return M.queue=T,eg(U1.bind(null,v,T,a),[a]),v.flags|=2048,Vu(9,O1.bind(null,v,T,h,u),void 0,null),h},useId:function(){var a=rs(),u=mn.identifierPrefix;if(Zt){var h=is,v=ns;h=(v&~(1<<32-cr(v)-1)).toString(32)+h,u=":"+u+"R"+h,h=Gu++,0<h&&(u+="H"+h.toString(32)),u+=":"}else h=Hb++,u=":"+u+"r"+h.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},qb={readContext:Vi,useCallback:X1,useContext:Vi,useEffect:Wu,useImperativeHandle:q1,useInsertionEffect:V1,useLayoutEffect:W1,useMemo:Y1,useReducer:ed,useRef:G1,useState:function(){return ed(Go)},useDebugValue:tg,useDeferredValue:function(a){var u=ed(Go),h=u[0],v=u[1];return Wu(function(){var M=Xi.transition;Xi.transition={};try{v(a)}finally{Xi.transition=M}},[a]),h},useTransition:function(){var a=ed(Go)[0],u=zr().memoizedState;return[a,u]},useMutableSource:F1,useSyncExternalStore:k1,useId:Z1,unstable_isNewReconciler:!1},Xb={readContext:Vi,useCallback:X1,useContext:Vi,useEffect:Wu,useImperativeHandle:q1,useInsertionEffect:V1,useLayoutEffect:W1,useMemo:Y1,useReducer:td,useRef:G1,useState:function(){return td(Go)},useDebugValue:tg,useDeferredValue:function(a){var u=td(Go),h=u[0],v=u[1];return Wu(function(){var M=Xi.transition;Xi.transition={};try{v(a)}finally{Xi.transition=M}},[a]),h},useTransition:function(){var a=td(Go)[0],u=zr().memoizedState;return[a,u]},useMutableSource:F1,useSyncExternalStore:k1,useId:Z1,unstable_isNewReconciler:!1};function ng(a,u){try{var h="",v=u;do h+=Ub(v),v=v.return;while(v);var M=h}catch(T){M=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:u,stack:M}}function ig(a,u){try{console.error(u.value)}catch(h){setTimeout(function(){throw h})}}var Yb=typeof WeakMap=="function"?WeakMap:Map;function e_(a,u,h){h=ts(-1,h),h.tag=3,h.payload={element:null};var v=u.value;return h.callback=function(){_d||(_d=!0,wg=v),ig(a,u)},h}function t_(a,u,h){h=ts(-1,h),h.tag=3;var v=a.type.getDerivedStateFromError;if(typeof v=="function"){var M=u.value;h.payload=function(){return v(M)},h.callback=function(){ig(a,u)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(h.callback=function(){ig(a,u),typeof v!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var F=u.stack;this.componentDidCatch(u.value,{componentStack:F!==null?F:""})}),h}function n_(a,u,h){var v=a.pingCache;if(v===null){v=a.pingCache=new Yb;var M=new Set;v.set(u,M)}else M=v.get(u),M===void 0&&(M=new Set,v.set(u,M));M.has(h)||(M.add(h),a=lA.bind(null,a,u,h),u.then(a,a))}function i_(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function r_(a,u,h,v,M){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(u=ts(-1,1),u.tag=2,Ns(h,u))),h.lanes|=1),a):(a.flags|=65536,a.lanes=M,a)}function Fr(a){a.flags|=4}function s_(a,u){if(a!==null&&a.child===u.child)return!0;if((u.flags&16)!==0)return!1;for(a=u.child;a!==null;){if((a.flags&12854)!==0||(a.subtreeFlags&12854)!==0)return!1;a=a.sibling}return!0}var ju,qu,sd,od;if(Ze)ju=function(a,u){for(var h=u.child;h!==null;){if(h.tag===5||h.tag===6)de(a,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},qu=function(){},sd=function(a,u,h,v,M){if(a=a.memoizedProps,a!==v){var T=u.stateNode,F=Nr(qi.current);h=Ye(T,h,a,v,M,F),(u.updateQueue=h)&&Fr(u)}},od=function(a,u,h,v){h!==v&&Fr(u)};else if(ce){ju=function(a,u,h,v){for(var M=u.child;M!==null;){if(M.tag===5){var T=M.stateNode;h&&v&&(T=qa(T,M.type,M.memoizedProps,M)),de(a,T)}else if(M.tag===6)T=M.stateNode,h&&v&&(T=Iu(T,M.memoizedProps,M)),de(a,T);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)T=M.child,T!==null&&(T.return=M),ju(a,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===u)break;for(;M.sibling===null;){if(M.return===null||M.return===u)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var o_=function(a,u,h,v){for(var M=u.child;M!==null;){if(M.tag===5){var T=M.stateNode;h&&v&&(T=qa(T,M.type,M.memoizedProps,M)),If(a,T)}else if(M.tag===6)T=M.stateNode,h&&v&&(T=Iu(T,M.memoizedProps,M)),If(a,T);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)T=M.child,T!==null&&(T.return=M),o_(a,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===u)break;for(;M.sibling===null;){if(M.return===null||M.return===u)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};qu=function(a,u){var h=u.stateNode;if(!s_(a,u)){a=h.containerInfo;var v=Si(a);o_(v,u,!1,!1),h.pendingChildren=v,Fr(u),ja(a,v)}},sd=function(a,u,h,v,M){var T=a.stateNode,F=a.memoizedProps;if((a=s_(a,u))&&F===v)u.stateNode=T;else{var G=u.stateNode,se=Nr(qi.current),xe=null;F!==v&&(xe=Ye(G,h,F,v,M,se)),a&&xe===null?u.stateNode=T:(T=Ui(T,xe,h,F,v,u,a,G),ve(T,h,v,M,se)&&Fr(u),u.stateNode=T,a?Fr(u):ju(T,u,!1,!1))}},od=function(a,u,h,v){h!==v?(a=Nr(el.current),h=Nr(qi.current),u.stateNode=ae(v,a,h,u),Fr(u)):u.stateNode=a.stateNode}}else qu=function(){},sd=function(){},od=function(){};function Xu(a,u){if(!Zt)switch(a.tailMode){case"hidden":u=a.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:v.sibling=null}}function Un(a){var u=a.alternate!==null&&a.alternate.child===a.child,h=0,v=0;if(u)for(var M=a.child;M!==null;)h|=M.lanes|M.childLanes,v|=M.subtreeFlags&14680064,v|=M.flags&14680064,M.return=a,M=M.sibling;else for(M=a.child;M!==null;)h|=M.lanes|M.childLanes,v|=M.subtreeFlags,v|=M.flags,M.return=a,M=M.sibling;return a.subtreeFlags|=v,a.childLanes=h,u}function Zb(a,u,h){var v=u.pendingProps;switch(Gm(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(u),null;case 1:return ci(u.type)&&zf(),Un(u),null;case 3:return v=u.stateNode,tl(),Ft(ui),Ft(kn),Zm(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(a===null||a.child===null)&&(ku(u)?Fr(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,dr!==null&&(Eg(dr),dr=null))),qu(a,u),Un(u),null;case 5:Xm(u),h=Nr(el.current);var M=u.type;if(a!==null&&u.stateNode!=null)sd(a,u,M,v,h),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!v){if(u.stateNode===null)throw Error(o(166));return Un(u),null}if(a=Nr(qi.current),ku(u)){if(!le)throw Error(o(175));a=ut(u.stateNode,u.type,u.memoizedProps,h,a,u,!Fu),u.updateQueue=a,a!==null&&Fr(u)}else{var T=oe(M,v,h,a,u);ju(T,u,!1,!1),u.stateNode=T,ve(T,M,v,h,a)&&Fr(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Un(u),null;case 6:if(a&&u.stateNode!=null)od(a,u,a.memoizedProps,v);else{if(typeof v!="string"&&u.stateNode===null)throw Error(o(166));if(a=Nr(el.current),h=Nr(qi.current),ku(u)){if(!le)throw Error(o(176));if(a=u.stateNode,v=u.memoizedProps,(h=lt(a,v,u,!Fu))&&(M=Mi,M!==null))switch(T=(M.mode&1)!==0,M.tag){case 3:Hi(M.stateNode.containerInfo,a,v,T);break;case 5:bt(M.type,M.memoizedProps,M.stateNode,a,v,T)}h&&Fr(u)}else u.stateNode=ae(v,a,h,u)}return Un(u),null;case 13:if(Ft(Kt),v=u.memoizedState,Zt&&Ei!==null&&(u.mode&1)!==0&&(u.flags&128)===0){for(a=Ei;a;)a=J(a);return Ka(),u.flags|=98560,u}if(v!==null&&v.dehydrated!==null){if(v=ku(u),a===null){if(!v)throw Error(o(318));if(!le)throw Error(o(344));if(a=u.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));Dt(a,u)}else Ka(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;return Un(u),null}return dr!==null&&(Eg(dr),dr=null),(u.flags&128)!==0?(u.lanes=h,u):(v=v!==null,h=!1,a===null?ku(u):h=a.memoizedState!==null,v&&!h&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(Kt.current&1)!==0?_n===0&&(_n=3):bg())),u.updateQueue!==null&&(u.flags|=4),Un(u),null);case 4:return tl(),qu(a,u),a===null&&ze(u.stateNode.containerInfo),Un(u),null;case 10:return Fm(u.type._context),Un(u),null;case 17:return ci(u.type)&&zf(),Un(u),null;case 19:if(Ft(Kt),M=u.memoizedState,M===null)return Un(u),null;if(v=(u.flags&128)!==0,T=M.rendering,T===null)if(v)Xu(M,!1);else{if(_n!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(T=Jf(a),T!==null){for(u.flags|=128,Xu(M,!1),a=T.updateQueue,a!==null&&(u.updateQueue=a,u.flags|=4),u.subtreeFlags=0,a=h,v=u.child;v!==null;)h=v,M=a,h.flags&=14680066,T=h.alternate,T===null?(h.childLanes=0,h.lanes=M,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=T.childLanes,h.lanes=T.lanes,h.child=T.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=T.memoizedProps,h.memoizedState=T.memoizedState,h.updateQueue=T.updateQueue,h.type=T.type,M=T.dependencies,h.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),v=v.sibling;return ht(Kt,Kt.current&1|2),u.child}a=a.sibling}M.tail!==null&&Tn()>_g&&(u.flags|=128,v=!0,Xu(M,!1),u.lanes=4194304)}else{if(!v)if(a=Jf(T),a!==null){if(u.flags|=128,v=!0,a=a.updateQueue,a!==null&&(u.updateQueue=a,u.flags|=4),Xu(M,!0),M.tail===null&&M.tailMode==="hidden"&&!T.alternate&&!Zt)return Un(u),null}else 2*Tn()-M.renderingStartTime>_g&&h!==1073741824&&(u.flags|=128,v=!0,Xu(M,!1),u.lanes=4194304);M.isBackwards?(T.sibling=u.child,u.child=T):(a=M.last,a!==null?a.sibling=T:u.child=T,M.last=T)}return M.tail!==null?(u=M.tail,M.rendering=u,M.tail=u.sibling,M.renderingStartTime=Tn(),u.sibling=null,a=Kt.current,ht(Kt,v?a&1|2:a&1),u):(Un(u),null);case 22:case 23:return Tg(),v=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==v&&(u.flags|=8192),v&&(u.mode&1)!==0?(bi&1073741824)!==0&&(Un(u),Ze&&u.subtreeFlags&6&&(u.flags|=8192)):Un(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}var Qb=l.ReactCurrentOwner,Ti=!1;function Yn(a,u,h,v){u.child=a===null?N1(u,null,h,v):$a(u,a.child,h,v)}function a_(a,u,h,v,M){h=h.render;var T=u.ref;return Za(u,M),v=Jm(a,u,h,v,T,M),h=Km(),a!==null&&!Ti?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~M,ss(a,u,M)):(Zt&&h&&Hm(u),u.flags|=1,Yn(a,u,v,M),u.child)}function l_(a,u,h,v,M){if(a===null){var T=h.type;return typeof T=="function"&&!Ag(T)&&T.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(u.tag=15,u.type=T,u_(a,u,T,v,M)):(a=Ad(h.type,null,v,u,u.mode,M),a.ref=u.ref,a.return=u,u.child=a)}if(T=a.child,(a.lanes&M)===0){var F=T.memoizedProps;if(h=h.compare,h=h!==null?h:Gf,h(F,v)&&a.ref===u.ref)return ss(a,u,M)}return u.flags|=1,a=Os(T,v),a.ref=u.ref,a.return=u,u.child=a}function u_(a,u,h,v,M){if(a!==null&&Gf(a.memoizedProps,v)&&a.ref===u.ref)if(Ti=!1,(a.lanes&M)!==0)(a.flags&131072)!==0&&(Ti=!0);else return u.lanes=a.lanes,ss(a,u,M);return rg(a,u,h,v,M)}function c_(a,u,h){var v=u.pendingProps,M=v.children,T=a!==null?a.memoizedState:null;if(v.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null},ht(il,bi),bi|=h;else if((h&1073741824)!==0)u.memoizedState={baseLanes:0,cachePool:null},v=T!==null?T.baseLanes:h,ht(il,bi),bi|=v;else return a=T!==null?T.baseLanes|h:h,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null},u.updateQueue=null,ht(il,bi),bi|=a,null;else T!==null?(v=T.baseLanes|h,u.memoizedState=null):v=h,ht(il,bi),bi|=v;return Yn(a,u,M,h),u.child}function f_(a,u){var h=u.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(u.flags|=512,u.flags|=2097152)}function rg(a,u,h,v,M){var T=ci(h)?Oo:kn.current;return T=Xa(u,T),Za(u,M),h=Jm(a,u,h,v,T,M),v=Km(),a!==null&&!Ti?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~M,ss(a,u,M)):(Zt&&v&&Hm(u),u.flags|=1,Yn(a,u,h,M),u.child)}function d_(a,u,h,v,M){if(ci(h)){var T=!0;Ff(u)}else T=!1;if(Za(u,M),u.stateNode===null)a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),b1(u,h,v),Um(u,h,v,M),v=!0;else if(a===null){var F=u.stateNode,G=u.memoizedProps;F.props=G;var se=F.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=Vi(xe):(xe=ci(h)?Oo:kn.current,xe=Xa(u,xe));var Ne=h.getDerivedStateFromProps,rt=typeof Ne=="function"||typeof F.getSnapshotBeforeUpdate=="function";rt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(G!==v||se!==xe)&&A1(u,F,v,xe),Is=!1;var Xe=u.memoizedState;F.state=Xe,qf(u,v,F,M),se=u.memoizedState,G!==v||Xe!==se||ui.current||Is?(typeof Ne=="function"&&(Om(u,h,Ne,v),se=u.memoizedState),(G=Is||T1(u,h,G,v,Xe,se,xe))?(rt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(u.flags|=4194308)):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=se),F.props=v,F.state=se,F.context=xe,v=G):(typeof F.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{F=u.stateNode,w1(a,u),G=u.memoizedProps,xe=u.type===u.elementType?G:fr(u.type,G),F.props=xe,rt=u.pendingProps,Xe=F.context,se=h.contextType,typeof se=="object"&&se!==null?se=Vi(se):(se=ci(h)?Oo:kn.current,se=Xa(u,se));var Bt=h.getDerivedStateFromProps;(Ne=typeof Bt=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(G!==rt||Xe!==se)&&A1(u,F,v,se),Is=!1,Xe=u.memoizedState,F.state=Xe,qf(u,v,F,M);var He=u.memoizedState;G!==rt||Xe!==He||ui.current||Is?(typeof Bt=="function"&&(Om(u,h,Bt,v),He=u.memoizedState),(xe=Is||T1(u,h,xe,v,Xe,He,se)||!1)?(Ne||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(v,He,se),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(v,He,se)),typeof F.componentDidUpdate=="function"&&(u.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof F.componentDidUpdate!="function"||G===a.memoizedProps&&Xe===a.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Xe===a.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=He),F.props=v,F.state=He,F.context=se,v=xe):(typeof F.componentDidUpdate!="function"||G===a.memoizedProps&&Xe===a.memoizedState||(u.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Xe===a.memoizedState||(u.flags|=1024),v=!1)}return sg(a,u,h,v,T,M)}function sg(a,u,h,v,M,T){f_(a,u);var F=(u.flags&128)!==0;if(!v&&!F)return M&&g1(u,h,!1),ss(a,u,T);v=u.stateNode,Qb.current=u;var G=F&&typeof h.getDerivedStateFromError!="function"?null:v.render();return u.flags|=1,a!==null&&F?(u.child=$a(u,a.child,null,T),u.child=$a(u,null,G,T)):Yn(a,u,G,T),u.memoizedState=v.state,M&&g1(u,h,!0),u.child}function h_(a){var u=a.stateNode;u.pendingContext?p1(a,u.pendingContext,u.pendingContext!==u.context):u.context&&p1(a,u.context,!1),qm(a,u.containerInfo)}function p_(a,u,h,v,M){return Ka(),jm(M),u.flags|=256,Yn(a,u,h,v),u.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function ld(a){return{baseLanes:a,cachePool:null}}function m_(a,u,h){var v=u.pendingProps,M=Kt.current,T=!1,F=(u.flags&128)!==0,G;if((G=F)||(G=a!==null&&a.memoizedState===null?!1:(M&2)!==0),G?(T=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(M|=1),ht(Kt,M&1),a===null)return Wm(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:Y(a)?u.lanes=8:u.lanes=1073741824,null):(M=v.children,a=v.fallback,T?(v=u.mode,T=u.child,M={mode:"hidden",children:M},(v&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=M):T=Cd(M,v,0,null),a=Yo(a,v,h,null),T.return=u,a.return=u,T.sibling=a,u.child=T,u.child.memoizedState=ld(h),u.memoizedState=ad,a):og(u,M));if(M=a.memoizedState,M!==null){if(G=M.dehydrated,G!==null){if(F)return u.flags&256?(u.flags&=-257,ud(a,u,h,Error(o(422)))):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(T=v.fallback,M=u.mode,v=Cd({mode:"visible",children:v.children},M,0,null),T=Yo(T,M,h,null),T.flags|=2,v.return=u,T.return=u,v.sibling=T,u.child=v,(u.mode&1)!==0&&$a(u,a.child,null,h),u.child.memoizedState=ld(h),u.memoizedState=ad,T);if((u.mode&1)===0)u=ud(a,u,h,null);else if(Y(G))u=ud(a,u,h,Error(o(419)));else if(v=(h&a.childLanes)!==0,Ti||v){if(v=mn,v!==null){switch(h&-h){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}v=(T&(v.suspendedLanes|h))!==0?0:T,v!==0&&v!==M.retryLane&&(M.retryLane=v,Yi(a,v,-1))}bg(),u=ud(a,u,h,Error(o(421)))}else z(G)?(u.flags|=128,u.child=a.child,u=uA.bind(null,a),re(G,u),u=null):(h=M.treeContext,le&&(Ei=it(G),Mi=u,Zt=!0,dr=null,Fu=!1,h!==null&&(Wi[ji++]=ns,Wi[ji++]=is,Wi[ji++]=Uo,ns=h.id,is=h.overflow,Uo=u)),u=og(u,u.pendingProps.children),u.flags|=4096);return u}return T?(v=v_(a,u,v.children,v.fallback,h),T=u.child,M=a.child.memoizedState,T.memoizedState=M===null?ld(h):{baseLanes:M.baseLanes|h,cachePool:null},T.childLanes=a.childLanes&~h,u.memoizedState=ad,v):(h=g_(a,u,v.children,h),u.memoizedState=null,h)}return T?(v=v_(a,u,v.children,v.fallback,h),T=u.child,M=a.child.memoizedState,T.memoizedState=M===null?ld(h):{baseLanes:M.baseLanes|h,cachePool:null},T.childLanes=a.childLanes&~h,u.memoizedState=ad,v):(h=g_(a,u,v.children,h),u.memoizedState=null,h)}function og(a,u){return u=Cd({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function g_(a,u,h,v){var M=a.child;return a=M.sibling,h=Os(M,{mode:"visible",children:h}),(u.mode&1)===0&&(h.lanes=v),h.return=u,h.sibling=null,a!==null&&(v=u.deletions,v===null?(u.deletions=[a],u.flags|=16):v.push(a)),u.child=h}function v_(a,u,h,v,M){var T=u.mode;a=a.child;var F=a.sibling,G={mode:"hidden",children:h};return(T&1)===0&&u.child!==a?(h=u.child,h.childLanes=0,h.pendingProps=G,u.deletions=null):(h=Os(a,G),h.subtreeFlags=a.subtreeFlags&14680064),F!==null?v=Os(F,v):(v=Yo(v,T,M,null),v.flags|=2),v.return=u,h.return=u,h.sibling=v,u.child=h,v}function ud(a,u,h,v){return v!==null&&jm(v),$a(u,a.child,null,h),a=og(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function y_(a,u,h){a.lanes|=u;var v=a.alternate;v!==null&&(v.lanes|=u),km(a.return,u,h)}function ag(a,u,h,v,M){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:M}:(T.isBackwards=u,T.rendering=null,T.renderingStartTime=0,T.last=v,T.tail=h,T.tailMode=M)}function x_(a,u,h){var v=u.pendingProps,M=v.revealOrder,T=v.tail;if(Yn(a,u,v.children,h),v=Kt.current,(v&2)!==0)v=v&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&y_(a,h,u);else if(a.tag===19)y_(a,h,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}v&=1}if(ht(Kt,v),(u.mode&1)===0)u.memoizedState=null;else switch(M){case"forwards":for(h=u.child,M=null;h!==null;)a=h.alternate,a!==null&&Jf(a)===null&&(M=h),h=h.sibling;h=M,h===null?(M=u.child,u.child=null):(M=h.sibling,h.sibling=null),ag(u,!1,M,h,T);break;case"backwards":for(h=null,M=u.child,u.child=null;M!==null;){if(a=M.alternate,a!==null&&Jf(a)===null){u.child=M;break}a=M.sibling,M.sibling=h,h=M,M=a}ag(u,!0,h,null,T);break;case"together":ag(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function ss(a,u,h){if(a!==null&&(u.dependencies=a.dependencies),rl|=u.lanes,(h&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(o(153));if(u.child!==null){for(a=u.child,h=Os(a,a.pendingProps),u.child=h,h.return=u;a.sibling!==null;)a=a.sibling,h=h.sibling=Os(a,a.pendingProps),h.return=u;h.sibling=null}return u.child}function Jb(a,u,h){switch(u.tag){case 3:h_(u),Ka();break;case 5:z1(u);break;case 1:ci(u.type)&&Ff(u);break;case 4:qm(u,u.stateNode.containerInfo);break;case 10:_1(u,u.type._context,u.memoizedProps.value);break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(ht(Kt,Kt.current&1),u.flags|=128,null):(h&u.child.childLanes)!==0?m_(a,u,h):(ht(Kt,Kt.current&1),a=ss(a,u,h),a!==null?a.sibling:null);ht(Kt,Kt.current&1);break;case 19:if(v=(h&u.childLanes)!==0,(a.flags&128)!==0){if(v)return x_(a,u,h);u.flags|=128}var M=u.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),ht(Kt,Kt.current),v)break;return null;case 22:case 23:return u.lanes=0,c_(a,u,h)}return ss(a,u,h)}function Kb(a,u){switch(Gm(u),u.tag){case 1:return ci(u.type)&&zf(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return tl(),Ft(ui),Ft(kn),Zm(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return Xm(u),null;case 13:if(Ft(Kt),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(o(340));Ka()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return Ft(Kt),null;case 4:return tl(),null;case 10:return Fm(u.type._context),null;case 22:case 23:return Tg(),null;case 24:return null;default:return null}}var cd=!1,Vo=!1,$b=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function fd(a,u){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(v){hi(a,u,v)}else h.current=null}function lg(a,u,h){try{h()}catch(v){hi(a,u,v)}}var __=!1;function eA(a,u){for(q(a.containerInfo),Ae=u;Ae!==null;)if(a=Ae,u=a.child,(a.subtreeFlags&1028)!==0&&u!==null)u.return=a,Ae=u;else for(;Ae!==null;){a=Ae;try{var h=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var v=h.memoizedProps,M=h.memoizedState,T=a.stateNode,F=T.getSnapshotBeforeUpdate(a.elementType===a.type?v:fr(a.type,v),M);T.__reactInternalSnapshotBeforeUpdate=F}break;case 3:Ze&&yt(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(G){hi(a,a.return,G)}if(u=a.sibling,u!==null){u.return=a.return,Ae=u;break}Ae=a.return}return h=__,__=!1,h}function Wo(a,u,h){var v=u.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var M=v=v.next;do{if((M.tag&a)===a){var T=M.destroy;M.destroy=void 0,T!==void 0&&lg(u,h,T)}M=M.next}while(M!==v)}}function Yu(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&a)===a){var v=h.create;h.destroy=v()}h=h.next}while(h!==u)}}function ug(a){var u=a.ref;if(u!==null){var h=a.stateNode;switch(a.tag){case 5:a=X(h);break;default:a=h}typeof u=="function"?u(a):u.current=a}}function w_(a,u,h){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(Uf,u)}catch{}switch(u.tag){case 0:case 11:case 14:case 15:if(a=u.updateQueue,a!==null&&(a=a.lastEffect,a!==null)){var v=a=a.next;do{var M=v,T=M.destroy;M=M.tag,T!==void 0&&((M&2)!==0||(M&4)!==0)&&lg(u,h,T),v=v.next}while(v!==a)}break;case 1:if(fd(u,h),a=u.stateNode,typeof a.componentWillUnmount=="function")try{a.props=u.memoizedProps,a.state=u.memoizedState,a.componentWillUnmount()}catch(F){hi(u,h,F)}break;case 5:fd(u,h);break;case 4:Ze?A_(a,u,h):ce&&ce&&(u=u.stateNode.containerInfo,h=Si(u),Nf(u,h))}}function S_(a,u,h){for(var v=u;;)if(w_(a,v,h),v.child===null||Ze&&v.tag===4){if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}else v.child.return=v,v=v.child}function M_(a){var u=a.alternate;u!==null&&(a.alternate=null,M_(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&$e(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function E_(a){return a.tag===5||a.tag===3||a.tag===4}function T_(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||E_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function b_(a){if(Ze){e:{for(var u=a.return;u!==null;){if(E_(u))break e;u=u.return}throw Error(o(160))}var h=u;switch(h.tag){case 5:u=h.stateNode,h.flags&32&&(Me(u),h.flags&=-33),h=T_(a),fg(a,h,u);break;case 3:case 4:u=h.stateNode.containerInfo,h=T_(a),cg(a,h,u);break;default:throw Error(o(161))}}}function cg(a,u,h){var v=a.tag;if(v===5||v===6)a=a.stateNode,u?fe(h,a,u):ue(h,a);else if(v!==4&&(a=a.child,a!==null))for(cg(a,u,h),a=a.sibling;a!==null;)cg(a,u,h),a=a.sibling}function fg(a,u,h){var v=a.tag;if(v===5||v===6)a=a.stateNode,u?N(h,a,u):je(h,a);else if(v!==4&&(a=a.child,a!==null))for(fg(a,u,h),a=a.sibling;a!==null;)fg(a,u,h),a=a.sibling}function A_(a,u,h){for(var v=u,M=!1,T,F;;){if(!M){M=v.return;e:for(;;){if(M===null)throw Error(o(160));switch(T=M.stateNode,M.tag){case 5:F=!1;break e;case 3:T=T.containerInfo,F=!0;break e;case 4:T=T.containerInfo,F=!0;break e}M=M.return}M=!0}if(v.tag===5||v.tag===6)S_(a,v,h),F?Ie(T,v.stateNode):he(T,v.stateNode);else if(v.tag===18)F?Ps(T,v.stateNode):$r(T,v.stateNode);else if(v.tag===4){if(v.child!==null){T=v.stateNode.containerInfo,F=!0,v.child.return=v,v=v.child;continue}}else if(w_(a,v,h),v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return,v.tag===4&&(M=!1)}v.sibling.return=v.return,v=v.sibling}}function dg(a,u){if(Ze){switch(u.tag){case 0:case 11:case 14:case 15:Wo(3,u,u.return),Yu(3,u),Wo(5,u,u.return);return;case 1:return;case 5:var h=u.stateNode;if(h!=null){var v=u.memoizedProps;a=a!==null?a.memoizedProps:v;var M=u.type,T=u.updateQueue;u.updateQueue=null,T!==null&&H(h,T,M,a,v,u)}return;case 6:if(u.stateNode===null)throw Error(o(162));h=u.memoizedProps,tt(u.stateNode,a!==null?a.memoizedProps:h,h);return;case 3:le&&a!==null&&a.memoizedState.isDehydrated&&St(u.stateNode.containerInfo);return;case 12:return;case 13:dd(u);return;case 19:dd(u);return;case 17:return}throw Error(o(163))}switch(u.tag){case 0:case 11:case 14:case 15:Wo(3,u,u.return),Yu(3,u),Wo(5,u,u.return);return;case 12:return;case 13:dd(u);return;case 19:dd(u);return;case 3:le&&a!==null&&a.memoizedState.isDehydrated&&St(u.stateNode.containerInfo);break;case 22:case 23:return}e:if(ce){switch(u.tag){case 1:case 5:case 6:break e;case 3:case 4:u=u.stateNode,Nf(u.containerInfo,u.pendingChildren);break e}throw Error(o(163))}}function dd(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new $b),u.forEach(function(v){var M=cA.bind(null,a,v);h.has(v)||(h.add(v),v.then(M,M))})}}function tA(a,u){for(Ae=u;Ae!==null;){u=Ae;var h=u.deletions;if(h!==null)for(var v=0;v<h.length;v++){var M=h[v];try{var T=a;Ze?A_(T,M,u):S_(T,M,u);var F=M.alternate;F!==null&&(F.return=null),M.return=null}catch(Oe){hi(M,u,Oe)}}if(h=u.child,(u.subtreeFlags&12854)!==0&&h!==null)h.return=u,Ae=h;else for(;Ae!==null;){u=Ae;try{var G=u.flags;if(G&32&&Ze&&Me(u.stateNode),G&512){var se=u.alternate;if(se!==null){var xe=se.ref;xe!==null&&(typeof xe=="function"?xe(null):xe.current=null)}}if(G&8192)switch(u.tag){case 13:if(u.memoizedState!==null){var Ne=u.alternate;(Ne===null||Ne.memoizedState===null)&&(xg=Tn())}break;case 22:var rt=u.memoizedState!==null,Xe=u.alternate,Bt=Xe!==null&&Xe.memoizedState!==null;if(h=u,Ze){e:if(v=h,M=rt,T=null,Ze)for(var He=v;;){if(He.tag===5){if(T===null){T=He;var Hn=He.stateNode;M?qe(Hn):Ve(He.stateNode,He.memoizedProps)}}else if(He.tag===6){if(T===null){var Qi=He.stateNode;M?Se(Qi):gt(Qi,He.memoizedProps)}}else if((He.tag!==22&&He.tag!==23||He.memoizedState===null||He===v)&&He.child!==null){He.child.return=He,He=He.child;continue}if(He===v)break;for(;He.sibling===null;){if(He.return===null||He.return===v)break e;T===He&&(T=null),He=He.return}T===He&&(T=null),He.sibling.return=He.return,He=He.sibling}}if(rt&&!Bt&&(h.mode&1)!==0){Ae=h;for(var Z=h.child;Z!==null;){for(h=Ae=Z;Ae!==null;){v=Ae;var j=v.child;switch(v.tag){case 0:case 11:case 14:case 15:Wo(4,v,v.return);break;case 1:fd(v,v.return);var te=v.stateNode;if(typeof te.componentWillUnmount=="function"){var Le=v.return;try{te.props=v.memoizedProps,te.state=v.memoizedState,te.componentWillUnmount()}catch(Oe){hi(v,Le,Oe)}}break;case 5:fd(v,v.return);break;case 22:if(v.memoizedState!==null){P_(h);continue}}j!==null?(j.return=v,Ae=j):P_(h)}Z=Z.sibling}}}switch(G&4102){case 2:b_(u),u.flags&=-3;break;case 6:b_(u),u.flags&=-3,dg(u.alternate,u);break;case 4096:u.flags&=-4097;break;case 4100:u.flags&=-4097,dg(u.alternate,u);break;case 4:dg(u.alternate,u)}}catch(Oe){hi(u,u.return,Oe)}if(h=u.sibling,h!==null){h.return=u.return,Ae=h;break}Ae=u.return}}}function nA(a,u,h){Ae=a,C_(a)}function C_(a,u,h){for(var v=(a.mode&1)!==0;Ae!==null;){var M=Ae,T=M.child;if(M.tag===22&&v){var F=M.memoizedState!==null||cd;if(!F){var G=M.alternate,se=G!==null&&G.memoizedState!==null||Vo;G=cd;var xe=Vo;if(cd=F,(Vo=se)&&!xe)for(Ae=M;Ae!==null;)F=Ae,se=F.child,F.tag===22&&F.memoizedState!==null?L_(M):se!==null?(se.return=F,Ae=se):L_(M);for(;T!==null;)Ae=T,C_(T),T=T.sibling;Ae=M,cd=G,Vo=xe}R_(a)}else(M.subtreeFlags&8772)!==0&&T!==null?(T.return=M,Ae=T):R_(a)}}function R_(a){for(;Ae!==null;){var u=Ae;if((u.flags&8772)!==0){var h=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Vo||Yu(5,u);break;case 1:var v=u.stateNode;if(u.flags&4&&!Vo)if(h===null)v.componentDidMount();else{var M=u.elementType===u.type?h.memoizedProps:fr(u.type,h.memoizedProps);v.componentDidUpdate(M,h.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var T=u.updateQueue;T!==null&&M1(u,T,v);break;case 3:var F=u.updateQueue;if(F!==null){if(h=null,u.child!==null)switch(u.child.tag){case 5:h=X(u.child.stateNode);break;case 1:h=u.child.stateNode}M1(u,F,h)}break;case 5:var G=u.stateNode;h===null&&u.flags&4&&nt(G,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(le&&u.memoizedState===null){var se=u.alternate;if(se!==null){var xe=se.memoizedState;if(xe!==null){var Ne=xe.dehydrated;Ne!==null&&Yt(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Vo||u.flags&512&&ug(u)}catch(rt){hi(u,u.return,rt)}}if(u===a){Ae=null;break}if(h=u.sibling,h!==null){h.return=u.return,Ae=h;break}Ae=u.return}}function P_(a){for(;Ae!==null;){var u=Ae;if(u===a){Ae=null;break}var h=u.sibling;if(h!==null){h.return=u.return,Ae=h;break}Ae=u.return}}function L_(a){for(;Ae!==null;){var u=Ae;try{switch(u.tag){case 0:case 11:case 15:var h=u.return;try{Yu(4,u)}catch(se){hi(u,h,se)}break;case 1:var v=u.stateNode;if(typeof v.componentDidMount=="function"){var M=u.return;try{v.componentDidMount()}catch(se){hi(u,M,se)}}var T=u.return;try{ug(u)}catch(se){hi(u,T,se)}break;case 5:var F=u.return;try{ug(u)}catch(se){hi(u,F,se)}}}catch(se){hi(u,u.return,se)}if(u===a){Ae=null;break}var G=u.sibling;if(G!==null){G.return=u.return,Ae=G;break}Ae=u.return}}var hd=0,pd=1,md=2,gd=3,vd=4;if(typeof Symbol=="function"&&Symbol.for){var Zu=Symbol.for;hd=Zu("selector.component"),pd=Zu("selector.has_pseudo_class"),md=Zu("selector.role"),gd=Zu("selector.test_id"),vd=Zu("selector.text")}function hg(a){var u=ye(a);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(a=Lt(a),a===null)throw Error(o(362));return a.stateNode.current}function pg(a,u){switch(u.$$typeof){case hd:if(a.type===u.value)return!0;break;case pd:e:{u=u.value,a=[a,0];for(var h=0;h<a.length;){var v=a[h++],M=a[h++],T=u[M];if(v.tag!==5||!ie(v)){for(;T!=null&&pg(v,T);)M++,T=u[M];if(M===u.length){u=!0;break e}else for(v=v.child;v!==null;)a.push(v,M),v=v.sibling}}u=!1}return u;case md:if(a.tag===5&&me(a.stateNode,u.value))return!0;break;case vd:if((a.tag===5||a.tag===6)&&(a=I(a),a!==null&&0<=a.indexOf(u.value)))return!0;break;case gd:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function mg(a){switch(a.$$typeof){case hd:return"<"+(P(a.value)||"Unknown")+">";case pd:return":has("+(mg(a)||"")+")";case md:return'[role="'+a.value+'"]';case vd:return'"'+a.value+'"';case gd:return'[data-testname="'+a.value+'"]';default:throw Error(o(365))}}function D_(a,u){var h=[];a=[a,0];for(var v=0;v<a.length;){var M=a[v++],T=a[v++],F=u[T];if(M.tag!==5||!ie(M)){for(;F!=null&&pg(M,F);)T++,F=u[T];if(T===u.length)h.push(M);else for(M=M.child;M!==null;)a.push(M,T),M=M.sibling}}return h}function gg(a,u){if(!Tt)throw Error(o(363));a=hg(a),a=D_(a,u),u=[],a=Array.from(a);for(var h=0;h<a.length;){var v=a[h++];if(v.tag===5)ie(v)||u.push(v.stateNode);else for(v=v.child;v!==null;)a.push(v),v=v.sibling}return u}var iA=Math.ceil,yd=l.ReactCurrentDispatcher,vg=l.ReactCurrentOwner,an=l.ReactCurrentBatchConfig,ft=0,mn=null,gn=null,Dn=0,bi=0,il=li(0),_n=0,Qu=null,rl=0,xd=0,yg=0,Ju=null,fi=null,xg=0,_g=1/0;function sl(){_g=Tn()+500}var _d=!1,wg=null,zs=null,wd=!1,Fs=null,Sd=0,Ku=0,Sg=null,Md=-1,Ed=0;function Zn(){return(ft&6)!==0?Tn():Md!==-1?Md:Md=Tn()}function ks(a){return(a.mode&1)===0?1:(ft&2)!==0&&Dn!==0?Dn&-Dn:Ob.transition!==null?(Ed===0&&(a=kf,kf<<=1,(kf&4194240)===0&&(kf=64),Ed=a),Ed):(a=At,a!==0?a:Re())}function Yi(a,u,h){if(50<Ku)throw Ku=0,Sg=null,Error(o(185));var v=Td(a,u);return v===null?null:(zu(v,u,h),((ft&2)===0||v!==mn)&&(v===mn&&((ft&2)===0&&(xd|=u),_n===4&&Bs(v,Dn)),di(v,h),u===1&&ft===0&&(a.mode&1)===0&&(sl(),Hf&&Dr())),v)}function Td(a,u){a.lanes|=u;var h=a.alternate;for(h!==null&&(h.lanes|=u),h=a,a=a.return;a!==null;)a.childLanes|=u,h=a.alternate,h!==null&&(h.childLanes|=u),h=a,a=a.return;return h.tag===3?h.stateNode:null}function di(a,u){var h=a.callbackNode;Pb(a,u);var v=Of(a,a===mn?Dn:0);if(v===0)h!==null&&y1(h),a.callbackNode=null,a.callbackPriority=0;else if(u=v&-v,a.callbackPriority!==u){if(h!=null&&y1(h),u===1)a.tag===0?Bb(N_.bind(null,a)):x1(N_.bind(null,a)),We?Ge(function(){ft===0&&Dr()}):Pm(Lm,Dr),h=null;else{switch(v1(v)){case 1:h=Lm;break;case 4:h=Nb;break;case 16:h=Dm;break;case 536870912:h=zb;break;default:h=Dm}h=V_(h,I_.bind(null,a))}a.callbackPriority=u,a.callbackNode=h}}function I_(a,u){if(Md=-1,Ed=0,(ft&6)!==0)throw Error(o(327));var h=a.callbackNode;if(Xo()&&a.callbackNode!==h)return null;var v=Of(a,a===mn?Dn:0);if(v===0)return null;if((v&30)!==0||(v&a.expiredLanes)!==0||u)u=bd(a,v);else{u=v;var M=ft;ft|=2;var T=k_();(mn!==a||Dn!==u)&&(sl(),jo(a,u));do try{oA();break}catch(G){F_(a,G)}while(1);zm(),yd.current=T,ft=M,gn!==null?u=0:(mn=null,Dn=0,u=_n)}if(u!==0){if(u===2&&(M=Am(a),M!==0&&(v=M,u=Mg(a,M))),u===1)throw h=Qu,jo(a,0),Bs(a,v),di(a,Tn()),h;if(u===6)Bs(a,v);else{if(M=a.current.alternate,(v&30)===0&&!rA(M)&&(u=bd(a,v),u===2&&(T=Am(a),T!==0&&(v=T,u=Mg(a,T))),u===1))throw h=Qu,jo(a,0),Bs(a,v),di(a,Tn()),h;switch(a.finishedWork=M,a.finishedLanes=v,u){case 0:case 1:throw Error(o(345));case 2:qo(a,fi);break;case 3:if(Bs(a,v),(v&130023424)===v&&(u=xg+500-Tn(),10<u)){if(Of(a,0)!==0)break;if(M=a.suspendedLanes,(M&v)!==v){Zn(),a.pingedLanes|=a.suspendedLanes&M;break}a.timeoutHandle=at(qo.bind(null,a,fi),u);break}qo(a,fi);break;case 4:if(Bs(a,v),(v&4194240)===v)break;for(u=a.eventTimes,M=-1;0<v;){var F=31-cr(v);T=1<<F,F=u[F],F>M&&(M=F),v&=~T}if(v=M,v=Tn()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*iA(v/1960))-v,10<v){a.timeoutHandle=at(qo.bind(null,a,fi),v);break}qo(a,fi);break;case 5:qo(a,fi);break;default:throw Error(o(329))}}}return di(a,Tn()),a.callbackNode===h?I_.bind(null,a):null}function Mg(a,u){var h=Ju;return a.current.memoizedState.isDehydrated&&(jo(a,u).flags|=256),a=bd(a,u),a!==2&&(u=fi,fi=h,u!==null&&Eg(u)),a}function Eg(a){fi===null?fi=a:fi.push.apply(fi,a)}function rA(a){for(var u=a;;){if(u.flags&16384){var h=u.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var v=0;v<h.length;v++){var M=h[v],T=M.getSnapshot;M=M.value;try{if(!Lr(T(),M))return!1}catch{return!1}}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Bs(a,u){for(u&=~yg,u&=~xd,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var h=31-cr(u),v=1<<h;a[h]=-1,u&=~v}}function N_(a){if((ft&6)!==0)throw Error(o(327));Xo();var u=Of(a,0);if((u&1)===0)return di(a,Tn()),null;var h=bd(a,u);if(a.tag!==0&&h===2){var v=Am(a);v!==0&&(u=v,h=Mg(a,v))}if(h===1)throw h=Qu,jo(a,0),Bs(a,u),di(a,Tn()),h;if(h===6)throw Error(o(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,qo(a,fi),di(a,Tn()),null}function z_(a){Fs!==null&&Fs.tag===0&&(ft&6)===0&&Xo();var u=ft;ft|=1;var h=an.transition,v=At;try{if(an.transition=null,At=1,a)return a()}finally{At=v,an.transition=h,ft=u,(ft&6)===0&&Dr()}}function Tg(){bi=il.current,Ft(il)}function jo(a,u){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==Je&&(a.timeoutHandle=Je,et(h)),gn!==null)for(h=gn.return;h!==null;){var v=h;switch(Gm(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&zf();break;case 3:tl(),Ft(ui),Ft(kn),Zm();break;case 5:Xm(v);break;case 4:tl();break;case 13:Ft(Kt);break;case 19:Ft(Kt);break;case 10:Fm(v.type._context);break;case 22:case 23:Tg()}h=h.return}if(mn=a,gn=a=Os(a.current,null),Dn=bi=u,_n=0,Qu=null,yg=xd=rl=0,fi=Ju=null,Ir!==null){for(u=0;u<Ir.length;u++)if(h=Ir[u],v=h.interleaved,v!==null){h.interleaved=null;var M=v.next,T=h.pending;if(T!==null){var F=T.next;T.next=M,v.next=F}h.pending=v}Ir=null}return a}function F_(a,u){do{var h=gn;try{if(zm(),Kf.current=rd,$f){for(var v=rn.memoizedState;v!==null;){var M=v.queue;M!==null&&(M.pending=null),v=v.next}$f=!1}if(nl=0,bn=Bn=rn=null,Hu=!1,Gu=0,vg.current=null,h===null||h.return===null){_n=1,Qu=u,gn=null;break}e:{var T=a,F=h.return,G=h,se=u;if(u=Dn,G.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var xe=se,Ne=G,rt=Ne.tag;if((Ne.mode&1)===0&&(rt===0||rt===11||rt===15)){var Xe=Ne.alternate;Xe?(Ne.updateQueue=Xe.updateQueue,Ne.memoizedState=Xe.memoizedState,Ne.lanes=Xe.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Bt=i_(F);if(Bt!==null){Bt.flags&=-257,r_(Bt,F,G,T,u),Bt.mode&1&&n_(T,xe,u),u=Bt,se=xe;var He=u.updateQueue;if(He===null){var Hn=new Set;Hn.add(se),u.updateQueue=Hn}else He.add(se);break e}else{if((u&1)===0){n_(T,xe,u),bg();break e}se=Error(o(426))}}else if(Zt&&G.mode&1){var Qi=i_(F);if(Qi!==null){(Qi.flags&65536)===0&&(Qi.flags|=256),r_(Qi,F,G,T,u),jm(se);break e}}T=se,_n!==4&&(_n=2),Ju===null?Ju=[T]:Ju.push(T),se=ng(se,G),G=F;do{switch(G.tag){case 3:G.flags|=65536,u&=-u,G.lanes|=u;var Z=e_(G,se,u);S1(G,Z);break e;case 1:T=se;var j=G.type,te=G.stateNode;if((G.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(zs===null||!zs.has(te)))){G.flags|=65536,u&=-u,G.lanes|=u;var Le=t_(G,T,u);S1(G,Le);break e}}G=G.return}while(G!==null)}O_(h)}catch(Oe){u=Oe,gn===h&&h!==null&&(gn=h=h.return);continue}break}while(1)}function k_(){var a=yd.current;return yd.current=rd,a===null?rd:a}function bg(){(_n===0||_n===3||_n===2)&&(_n=4),mn===null||(rl&268435455)===0&&(xd&268435455)===0||Bs(mn,Dn)}function bd(a,u){var h=ft;ft|=2;var v=k_();mn===a&&Dn===u||jo(a,u);do try{sA();break}catch(M){F_(a,M)}while(1);if(zm(),ft=h,yd.current=v,gn!==null)throw Error(o(261));return mn=null,Dn=0,_n}function sA(){for(;gn!==null;)B_(gn)}function oA(){for(;gn!==null&&!Db();)B_(gn)}function B_(a){var u=G_(a.alternate,a,bi);a.memoizedProps=a.pendingProps,u===null?O_(a):gn=u,vg.current=null}function O_(a){var u=a;do{var h=u.alternate;if(a=u.return,(u.flags&32768)===0){if(h=Zb(h,u,bi),h!==null){gn=h;return}}else{if(h=Kb(h,u),h!==null){h.flags&=32767,gn=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{_n=6,gn=null;return}}if(u=u.sibling,u!==null){gn=u;return}gn=u=a}while(u!==null);_n===0&&(_n=5)}function qo(a,u){var h=At,v=an.transition;try{an.transition=null,At=1,aA(a,u,h)}finally{an.transition=v,At=h}return null}function aA(a,u,h){do Xo();while(Fs!==null);if((ft&6)!==0)throw Error(o(327));var v=a.finishedWork,M=a.finishedLanes;if(v===null)return null;if(a.finishedWork=null,a.finishedLanes=0,v===a.current)throw Error(o(177));a.callbackNode=null,a.callbackPriority=0;var T=v.lanes|v.childLanes;if(Lb(a,T),a===mn&&(gn=mn=null,Dn=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||wd||(wd=!0,V_(Dm,function(){return Xo(),null})),T=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||T){T=an.transition,an.transition=null;var F=At;At=1;var G=ft;ft|=4,vg.current=null,eA(a,v),tA(a,v),Q(a.containerInfo),a.current=v,nA(v),Ib(),ft=G,At=F,an.transition=T}else a.current=v;if(wd&&(wd=!1,Fs=a,Sd=M),T=a.pendingLanes,T===0&&(zs=null),Fb(v.stateNode),di(a,Tn()),u!==null)for(h=a.onRecoverableError,v=0;v<u.length;v++)h(u[v]);if(_d)throw _d=!1,a=wg,wg=null,a;return(Sd&1)!==0&&a.tag!==0&&Xo(),T=a.pendingLanes,(T&1)!==0?a===Sg?Ku++:(Ku=0,Sg=a):Ku=0,Dr(),null}function Xo(){if(Fs!==null){var a=v1(Sd),u=an.transition,h=At;try{if(an.transition=null,At=16>a?16:a,Fs===null)var v=!1;else{if(a=Fs,Fs=null,Sd=0,(ft&6)!==0)throw Error(o(331));var M=ft;for(ft|=4,Ae=a.current;Ae!==null;){var T=Ae,F=T.child;if((Ae.flags&16)!==0){var G=T.deletions;if(G!==null){for(var se=0;se<G.length;se++){var xe=G[se];for(Ae=xe;Ae!==null;){var Ne=Ae;switch(Ne.tag){case 0:case 11:case 15:Wo(8,Ne,T)}var rt=Ne.child;if(rt!==null)rt.return=Ne,Ae=rt;else for(;Ae!==null;){Ne=Ae;var Xe=Ne.sibling,Bt=Ne.return;if(M_(Ne),Ne===xe){Ae=null;break}if(Xe!==null){Xe.return=Bt,Ae=Xe;break}Ae=Bt}}}var He=T.alternate;if(He!==null){var Hn=He.child;if(Hn!==null){He.child=null;do{var Qi=Hn.sibling;Hn.sibling=null,Hn=Qi}while(Hn!==null)}}Ae=T}}if((T.subtreeFlags&2064)!==0&&F!==null)F.return=T,Ae=F;else e:for(;Ae!==null;){if(T=Ae,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:Wo(9,T,T.return)}var Z=T.sibling;if(Z!==null){Z.return=T.return,Ae=Z;break e}Ae=T.return}}var j=a.current;for(Ae=j;Ae!==null;){F=Ae;var te=F.child;if((F.subtreeFlags&2064)!==0&&te!==null)te.return=F,Ae=te;else e:for(F=j;Ae!==null;){if(G=Ae,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:Yu(9,G)}}catch(Oe){hi(G,G.return,Oe)}if(G===F){Ae=null;break e}var Le=G.sibling;if(Le!==null){Le.return=G.return,Ae=Le;break e}Ae=G.return}}if(ft=M,Dr(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(Uf,a)}catch{}v=!0}return v}finally{At=h,an.transition=u}}return!1}function U_(a,u,h){u=ng(h,u),u=e_(a,u,1),Ns(a,u),u=Zn(),a=Td(a,1),a!==null&&(zu(a,1,u),di(a,u))}function hi(a,u,h){if(a.tag===3)U_(a,a,h);else for(;u!==null;){if(u.tag===3){U_(u,a,h);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(zs===null||!zs.has(v))){a=ng(h,a),a=t_(u,a,1),Ns(u,a),a=Zn(),u=Td(u,1),u!==null&&(zu(u,1,a),di(u,a));break}}u=u.return}}function lA(a,u,h){var v=a.pingCache;v!==null&&v.delete(u),u=Zn(),a.pingedLanes|=a.suspendedLanes&h,mn===a&&(Dn&h)===h&&(_n===4||_n===3&&(Dn&130023424)===Dn&&500>Tn()-xg?jo(a,0):yg|=h),di(a,u)}function H_(a,u){u===0&&((a.mode&1)===0?u=1:(u=Bf,Bf<<=1,(Bf&130023424)===0&&(Bf=4194304)));var h=Zn();a=Td(a,u),a!==null&&(zu(a,u,h),di(a,h))}function uA(a){var u=a.memoizedState,h=0;u!==null&&(h=u.retryLane),H_(a,h)}function cA(a,u){var h=0;switch(a.tag){case 13:var v=a.stateNode,M=a.memoizedState;M!==null&&(h=M.retryLane);break;case 19:v=a.stateNode;break;default:throw Error(o(314))}v!==null&&v.delete(u),H_(a,h)}var G_;G_=function(a,u,h){if(a!==null)if(a.memoizedProps!==u.pendingProps||ui.current)Ti=!0;else{if((a.lanes&h)===0&&(u.flags&128)===0)return Ti=!1,Jb(a,u,h);Ti=(a.flags&131072)!==0}else Ti=!1,Zt&&(u.flags&1048576)!==0&&C1(u,Zf,u.index);switch(u.lanes=0,u.tag){case 2:var v=u.type;a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),a=u.pendingProps;var M=Xa(u,kn.current);Za(u,h),M=Jm(null,u,v,a,M,h);var T=Km();return u.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,ci(v)?(T=!0,Ff(u)):T=!1,u.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,Bm(u),M.updater=Xf,u.stateNode=M,M._reactInternals=u,Um(u,v,a,h),u=sg(null,u,v,!0,T,h)):(u.tag=0,Zt&&T&&Hm(u),Yn(null,u,M,h),u=u.child),u;case 16:v=u.elementType;e:{switch(a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),a=u.pendingProps,M=v._init,v=M(v._payload),u.type=v,M=u.tag=dA(v),a=fr(v,a),M){case 0:u=rg(null,u,v,a,h);break e;case 1:u=d_(null,u,v,a,h);break e;case 11:u=a_(null,u,v,a,h);break e;case 14:u=l_(null,u,v,fr(v.type,a),h);break e}throw Error(o(306,v,""))}return u;case 0:return v=u.type,M=u.pendingProps,M=u.elementType===v?M:fr(v,M),rg(a,u,v,M,h);case 1:return v=u.type,M=u.pendingProps,M=u.elementType===v?M:fr(v,M),d_(a,u,v,M,h);case 3:e:{if(h_(u),a===null)throw Error(o(387));v=u.pendingProps,T=u.memoizedState,M=T.element,w1(a,u),qf(u,v,null,h);var F=u.memoizedState;if(v=F.element,le&&T.isDehydrated)if(T={element:v,isDehydrated:!1,cache:F.cache,transitions:F.transitions},u.updateQueue.baseState=T,u.memoizedState=T,u.flags&256){M=Error(o(423)),u=p_(a,u,v,h,M);break e}else if(v!==M){M=Error(o(424)),u=p_(a,u,v,h,M);break e}else for(le&&(Ei=Ke(u.stateNode.containerInfo),Mi=u,Zt=!0,dr=null,Fu=!1),h=N1(u,null,v,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ka(),v===M){u=ss(a,u,h);break e}Yn(a,u,v,h)}u=u.child}return u;case 5:return z1(u),a===null&&Wm(u),v=u.type,M=u.pendingProps,T=a!==null?a.memoizedProps:null,F=M.children,Ue(v,M)?F=null:T!==null&&Ue(v,T)&&(u.flags|=32),f_(a,u),Yn(a,u,F,h),u.child;case 6:return a===null&&Wm(u),null;case 13:return m_(a,u,h);case 4:return qm(u,u.stateNode.containerInfo),v=u.pendingProps,a===null?u.child=$a(u,null,v,h):Yn(a,u,v,h),u.child;case 11:return v=u.type,M=u.pendingProps,M=u.elementType===v?M:fr(v,M),a_(a,u,v,M,h);case 7:return Yn(a,u,u.pendingProps,h),u.child;case 8:return Yn(a,u,u.pendingProps.children,h),u.child;case 12:return Yn(a,u,u.pendingProps.children,h),u.child;case 10:e:{if(v=u.type._context,M=u.pendingProps,T=u.memoizedProps,F=M.value,_1(u,v,F),T!==null)if(Lr(T.value,F)){if(T.children===M.children&&!ui.current){u=ss(a,u,h);break e}}else for(T=u.child,T!==null&&(T.return=u);T!==null;){var G=T.dependencies;if(G!==null){F=T.child;for(var se=G.firstContext;se!==null;){if(se.context===v){if(T.tag===1){se=ts(-1,h&-h),se.tag=2;var xe=T.updateQueue;if(xe!==null){xe=xe.shared;var Ne=xe.pending;Ne===null?se.next=se:(se.next=Ne.next,Ne.next=se),xe.pending=se}}T.lanes|=h,se=T.alternate,se!==null&&(se.lanes|=h),km(T.return,h,u),G.lanes|=h;break}se=se.next}}else if(T.tag===10)F=T.type===u.type?null:T.child;else if(T.tag===18){if(F=T.return,F===null)throw Error(o(341));F.lanes|=h,G=F.alternate,G!==null&&(G.lanes|=h),km(F,h,u),F=T.sibling}else F=T.child;if(F!==null)F.return=T;else for(F=T;F!==null;){if(F===u){F=null;break}if(T=F.sibling,T!==null){T.return=F.return,F=T;break}F=F.return}T=F}Yn(a,u,M.children,h),u=u.child}return u;case 9:return M=u.type,v=u.pendingProps.children,Za(u,h),M=Vi(M),v=v(M),u.flags|=1,Yn(a,u,v,h),u.child;case 14:return v=u.type,M=fr(v,u.pendingProps),M=fr(v.type,M),l_(a,u,v,M,h);case 15:return u_(a,u,u.type,u.pendingProps,h);case 17:return v=u.type,M=u.pendingProps,M=u.elementType===v?M:fr(v,M),a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2),u.tag=1,ci(v)?(a=!0,Ff(u)):a=!1,Za(u,h),b1(u,v,M),Um(u,v,M,h),sg(null,u,v,!0,a,h);case 19:return x_(a,u,h);case 22:return c_(a,u,h)}throw Error(o(156,u.tag))};function V_(a,u){return Pm(a,u)}function fA(a,u,h,v){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(a,u,h,v){return new fA(a,u,h,v)}function Ag(a){return a=a.prototype,!(!a||!a.isReactComponent)}function dA(a){if(typeof a=="function")return Ag(a)?1:0;if(a!=null){if(a=a.$$typeof,a===y)return 11;if(a===_)return 14}return 2}function Os(a,u){var h=a.alternate;return h===null?(h=Zi(a.tag,u,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=u,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,u=a.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Ad(a,u,h,v,M,T){var F=2;if(v=a,typeof a=="function")Ag(a)&&(F=1);else if(typeof a=="string")F=5;else e:switch(a){case d:return Yo(h.children,M,T,u);case p:F=8,M|=8;break;case m:return a=Zi(12,h,u,M|2),a.elementType=m,a.lanes=T,a;case w:return a=Zi(13,h,u,M),a.elementType=w,a.lanes=T,a;case S:return a=Zi(19,h,u,M),a.elementType=S,a.lanes=T,a;case b:return Cd(h,M,T,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case g:F=10;break e;case x:F=9;break e;case y:F=11;break e;case _:F=14;break e;case E:F=16,v=null;break e}throw Error(o(130,a==null?a:typeof a,""))}return u=Zi(F,h,u,M),u.elementType=a,u.type=v,u.lanes=T,u}function Yo(a,u,h,v){return a=Zi(7,a,v,u),a.lanes=h,a}function Cd(a,u,h,v){return a=Zi(22,a,v,u),a.elementType=b,a.lanes=h,a.stateNode={},a}function Cg(a,u,h){return a=Zi(6,a,null,u),a.lanes=h,a}function Rg(a,u,h){return u=Zi(4,a.children!==null?a.children:[],a.key,u),u.lanes=h,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function hA(a,u,h,v,M){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cm(0),this.expirationTimes=Cm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cm(0),this.identifierPrefix=v,this.onRecoverableError=M,le&&(this.mutableSourceEagerHydrationData=null)}function W_(a,u,h,v,M,T,F,G,se){return a=new hA(a,u,h,G,se),u===1?(u=1,T===!0&&(u|=8)):u=0,T=Zi(3,null,null,u),a.current=T,T.stateNode=a,T.memoizedState={element:v,isDehydrated:h,cache:null,transitions:null},Bm(T),a}function j_(a){if(!a)return Ds;a=a._reactInternals;e:{if(V(a)!==a||a.tag!==1)throw Error(o(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(ci(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(a.tag===1){var h=a.type;if(ci(h))return m1(a,h,u)}return u}function q_(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=k(u),a===null?null:a.stateNode}function X_(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<u?h:u}}function Pg(a,u){X_(a,u),(a=a.alternate)&&X_(a,u)}function pA(a){return a=k(a),a===null?null:a.stateNode}function mA(){return null}return t.attemptContinuousHydration=function(a){if(a.tag===13){var u=Zn();Yi(a,134217728,u),Pg(a,134217728)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var u=Zn(),h=ks(a);Yi(a,h,u),Pg(a,h)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var h=Nu(u.pendingLanes);h!==0&&(Rm(u,h|1),di(u,Tn()),(ft&6)===0&&(sl(),Dr()))}break;case 13:var v=Zn();z_(function(){return Yi(a,1,v)}),Pg(a,1)}},t.batchedUpdates=function(a,u){var h=ft;ft|=1;try{return a(u)}finally{ft=h,ft===0&&(sl(),Hf&&Dr())}},t.createComponentSelector=function(a){return{$$typeof:hd,value:a}},t.createContainer=function(a,u,h,v,M,T,F){return W_(a,u,!1,null,h,v,M,T,F)},t.createHasPseudoClassSelector=function(a){return{$$typeof:pd,value:a}},t.createHydrationContainer=function(a,u,h,v,M,T,F,G,se){return a=W_(h,v,!0,a,M,T,F,G,se),a.context=j_(null),h=a.current,v=Zn(),M=ks(h),T=ts(v,M),T.callback=u!=null?u:null,Ns(h,T),a.current.lanes=M,zu(a,M,v),di(a,v),a},t.createPortal=function(a,u,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:v==null?null:""+v,children:a,containerInfo:u,implementation:h}},t.createRoleSelector=function(a){return{$$typeof:md,value:a}},t.createTestNameSelector=function(a){return{$$typeof:gd,value:a}},t.createTextSelector=function(a){return{$$typeof:vd,value:a}},t.deferredUpdates=function(a){var u=At,h=an.transition;try{return an.transition=null,At=16,a()}finally{At=u,an.transition=h}},t.discreteUpdates=function(a,u,h,v,M){var T=At,F=an.transition;try{return an.transition=null,At=1,a(u,h,v,M)}finally{At=T,an.transition=F,ft===0&&sl()}},t.findAllNodes=gg,t.findBoundingRects=function(a,u){if(!Tt)throw Error(o(363));u=gg(a,u),a=[];for(var h=0;h<u.length;h++)a.push(B(u[h]));for(u=a.length-1;0<u;u--){h=a[u];for(var v=h.x,M=v+h.width,T=h.y,F=T+h.height,G=u-1;0<=G;G--)if(u!==G){var se=a[G],xe=se.x,Ne=xe+se.width,rt=se.y,Xe=rt+se.height;if(v>=xe&&T>=rt&&M<=Ne&&F<=Xe){a.splice(u,1);break}else if(v!==xe||h.width!==se.width||Xe<T||rt>F){if(!(T!==rt||h.height!==se.height||Ne<v||xe>M)){xe>v&&(se.width+=xe-v,se.x=v),Ne<M&&(se.width=M-xe),a.splice(u,1);break}}else{rt>T&&(se.height+=rt-T,se.y=T),Xe<F&&(se.height=F-rt),a.splice(u,1);break}}}return a},t.findHostInstance=q_,t.findHostInstanceWithNoPortals=function(a){return a=C(a),a=a!==null?W(a):null,a===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return q_(a)},t.flushControlled=function(a){var u=ft;ft|=1;var h=an.transition,v=At;try{an.transition=null,At=1,a()}finally{At=v,an.transition=h,ft=u,ft===0&&(sl(),Dr())}},t.flushPassiveEffects=Xo,t.flushSync=z_,t.focusWithin=function(a,u){if(!Tt)throw Error(o(363));for(a=hg(a),u=D_(a,u),u=Array.from(u),a=0;a<u.length;){var h=u[a++];if(!ie(h)){if(h.tag===5&&be(h.stateNode))return!0;for(h=h.child;h!==null;)u.push(h),h=h.sibling}}return!1},t.getCurrentUpdatePriority=function(){return At},t.getFindAllNodesFailureDescription=function(a,u){if(!Tt)throw Error(o(363));var h=0,v=[];a=[hg(a),0];for(var M=0;M<a.length;){var T=a[M++],F=a[M++],G=u[F];if((T.tag!==5||!ie(T))&&(pg(T,G)&&(v.push(mg(G)),F++,F>h&&(h=F)),F<u.length))for(T=T.child;T!==null;)a.push(T,F),T=T.sibling}if(h<u.length){for(a=[];h<u.length;h++)a.push(mg(u[h]));return`findAllNodes was able to match part of the selector:
  `+(v.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},t.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return X(a.child.stateNode);default:return a.child.stateNode}},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:pA,findFiberByHostInstance:a.findFiberByHostInstance||mA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")a=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)a=!0;else{try{Uf=u.inject(a),Pr=u}catch{}a=!!u.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,u,h,v){if(!Tt)throw Error(o(363));a=gg(a,u);var M=De(a,h,v).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(a,u){var h=u._getVersion;h=h(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,h]:a.mutableSourceEagerHydrationData.push(u,h)},t.runWithPriority=function(a,u){var h=At;try{return At=a,u()}finally{At=h}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,u,h,v){var M=u.current,T=Zn(),F=ks(M);return h=j_(h),u.context===null?u.context=h:u.pendingContext=h,u=ts(T,F),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),Ns(M,u),a=Yi(M,F,T),a!==null&&jf(a,M,F),F},t};lb.exports=OF;var UF=lb.exports;const ub=n=>n&&n.isOrthographicCamera,HF=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Df=HF?_e.exports.useEffect:_e.exports.useLayoutEffect;function cb(n){const e=_e.exports.useRef(n);return Df(()=>void(e.current=n),[n]),e}function GF({set:n}){return Df(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class fb extends _e.exports.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}fb.getDerivedStateFromError=()=>({error:!0});const db="__default",VF=n=>n&&!!n.memoized&&!!n.changes;function hb(n){return Array.isArray(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const kh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},en={obj:n=>n===Object(n)&&!en.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(en.str(n)||en.num(n))return n===e;const s=en.obj(n);if(s&&i==="reference")return n===e;const o=en.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;for(l in r?e:n)if(n[l]!==e[l])return!1;if(en.und(l)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function WF(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function bl(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f=It({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},e)),n}function My(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const zM=/-\d+$/;function B0(n,e,t){if(en.str(t)){if(zM.test(t)){const s=t.replace(zM,""),{target:o,key:l}=My(n,s);Array.isArray(o[l])||(o[l]=[])}const{target:i,key:r}=My(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function FM(n,e,t){var i,r;if(en.str(t)){const{target:s,key:o}=My(n,t);s[o]=e.__r3f.previousAttach}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function pb(n,d,m={},f=!1){var p=d,{children:e,key:t,ref:i}=p,r=Ji(p,["children","key","ref"]);var g=m,{children:s,key:o,ref:l}=g,c=Ji(g,["children","key","ref"]);var x;const y=(x=n==null?void 0:n.__r3f)!=null?x:{},w=Object.entries(r),S=[];if(f){const E=Object.keys(c);for(let b=0;b<E.length;b++)r.hasOwnProperty(E[b])||w.unshift([E[b],db+"remove"])}w.forEach(([E,b])=>{var A;if((A=n.__r3f)!=null&&A.primitive&&E==="object"||en.equ(b,c[E]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(E))return S.push([E,b,!0,[]]);let R=[];E.includes("-")&&(R=E.split("-")),S.push([E,b,!1,R])});const _=It({},r);return y.memoizedProps&&y.memoizedProps.args&&(_.args=y.memoizedProps.args),y.memoizedProps&&y.memoizedProps.attach&&(_.attach=y.memoizedProps.attach),{memoized:_,changes:S}}function O0(n,e){var t,i;const r=(t=n==null?void 0:n.__r3f)!=null?t:{},s=r.root,o=(i=s==null||s.getState==null?void 0:s.getState())!=null?i:{},{memoized:l,changes:c}=VF(e)?e:pb(n,e),f=r.eventCount;if(n.__r3f&&(n.__r3f.memoizedProps=l),c.forEach(([d,p,m,g])=>{let x=n,y=x[d];if(g.length&&(y=g.reduce((_,E)=>_[E],n),!(y&&y.set))){const[_,...E]=g.reverse();x=E.reverse().reduce((b,A)=>b[A],n),d=_}if(p===db+"remove")if(y&&y.constructor){var w;p=new y.constructor(...(w=l.args)!=null?w:[])}else if(x.constructor){var S;const _=new x.constructor(...(S=x.__r3f.memoizedProps.args)!=null?S:[]);p=_[y],_.dispose&&_.dispose()}else p=0;if(m)p?r.handlers[d]=p:delete r.handlers[d],r.eventCount=Object.keys(r.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Ma)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&y.constructor.name===p.constructor.name)y.copy(p);else if(p!==void 0){const _=y instanceof Te;!_&&y.setScalar?y.setScalar(p):y instanceof Ma&&p instanceof Ma?y.mask=p.mask:y.set(p),!Jn&&!o.linear&&_&&y.convertSRGBToLinear()}}else x[d]=p,!o.linear&&x[d]instanceof hn&&(x[d].encoding=dt);Al(n)}),r.parent&&o.internal&&n.raycast&&f!==r.eventCount){const d=o.internal.interaction.indexOf(n);d>-1&&o.internal.interaction.splice(d,1),r.eventCount&&o.internal.interaction.push(n)}return c.length&&n.parent&&Ey(n),n}function Al(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function Ey(n){n.onUpdate==null||n.onUpdate(n)}function jF(n,e){n.manual||(ub(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function U0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function qF(){var n,e;switch((n=window)==null||(e=n.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ql.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ql.exports.ContinuousEventPriority;default:return Ql.exports.DefaultEventPriority}}function mb(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function XF(n,e){const{events:t,internal:i}=n.getState();i.interaction=i.interaction.filter(r=>r!==e),i.initialHits=i.initialHits.filter(r=>r!==e),i.hovered.forEach((r,s)=>{(r.eventObject===e||r.object===e)&&i.hovered.delete(s)}),i.capturedMap.forEach((r,s)=>{mb(i.capturedMap,e,r,s)})}function YF(n){const e=new L;function t(f){const{internal:d}=n.getState(),p=f.offsetX-d.initialClick[0],m=f.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function i(f){return f.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=d.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function r(f,d){const p=n.getState(),m=new Set,g=[],x=d?d(p.internal.interaction):p.internal.interaction;x.forEach(S=>{const _=kh(S);_&&(_.raycaster.camera=void 0)}),p.previousRoot||p.events.compute==null||p.events.compute(f,p);let y=x.flatMap(S=>{const _=kh(S);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var E;_.events.compute==null||_.events.compute(f,_,(E=_.previousRoot)==null?void 0:E.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(S,!0):[]}).sort((S,_)=>{const E=kh(S.object),b=kh(_.object);return!E||!b?0:b.events.priority-E.events.priority||S.distance-_.distance}).filter(S=>{const _=U0(S);return m.has(_)?!1:(m.add(_),!0)});p.events.filter&&(y=p.events.filter(y,p));for(const S of y){let _=S.object;for(;_;){var w;(w=_.__r3f)!=null&&w.eventCount&&g.push(Ai(It({},S),{eventObject:_})),_=_.parent}}if("pointerId"in f&&p.internal.capturedMap.has(f.pointerId))for(let S of p.internal.capturedMap.get(f.pointerId).values())g.push(S.intersection);return g}function s(f,d,p,m){const{raycaster:g,pointer:x,camera:y,internal:w}=n.getState();if(f.length){const S=e.set(x.x,x.y,0).unproject(y),_={stopped:!1};for(const E of f){const b=V=>{var U,C;return(U=(C=w.capturedMap.get(V))==null?void 0:C.has(E.eventObject))!=null?U:!1},A=V=>{const U={intersection:E,target:d.target};w.capturedMap.has(V)?w.capturedMap.get(V).set(E.eventObject,U):w.capturedMap.set(V,new Map([[E.eventObject,U]])),d.target.setPointerCapture(V)},R=V=>{const U=w.capturedMap.get(V);U&&mb(w.capturedMap,E.eventObject,U,V)};let P={};for(let V in d){let U=d[V];typeof U!="function"&&(P[V]=U)}let D=Ai(It(It({},E),P),{pointer:x,intersections:f,stopped:_.stopped,delta:p,unprojectedPoint:S,ray:g.ray,camera:y,stopPropagation:()=>{const V="pointerId"in d&&w.capturedMap.get(d.pointerId);if((!V||V.has(E.eventObject))&&(D.stopped=_.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(U=>U.eventObject===E.eventObject))){const U=f.slice(0,f.indexOf(E));o([...U,E])}},target:{hasPointerCapture:b,setPointerCapture:A,releasePointerCapture:R},currentTarget:{hasPointerCapture:b,setPointerCapture:A,releasePointerCapture:R},nativeEvent:d});if(m(D),_.stopped===!0)break}}return f}function o(f){const{internal:d}=n.getState();Array.from(d.hovered.values()).forEach(p=>{if(!f.length||!f.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const g=p.eventObject.__r3f,x=g==null?void 0:g.handlers;if(d.hovered.delete(U0(p)),g!=null&&g.eventCount){const y=Ai(It({},p),{intersections:f||[]});x.onPointerOut==null||x.onPointerOut(y),x.onPointerLeave==null||x.onPointerLeave(y)}}})}const l=f=>{switch(f){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return d=>{const{internal:p}=n.getState();"pointerId"in d&&!p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),o([]))}}return d=>{const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=d;const g=f==="onPointerMove",x=f==="onClick"||f==="onContextMenu"||f==="onDoubleClick",w=r(d,g?i:void 0),S=x?t(d):0;f==="onPointerDown"&&(m.initialClick=[d.offsetX,d.offsetY],m.initialHits=w.map(_=>_.eventObject)),x&&!w.length&&S<=2&&(c(d,m.interaction),p&&p(d)),g&&o(w),s(w,d,S,_=>{const E=_.eventObject,b=E.__r3f,A=b==null?void 0:b.handlers;if(!!(b!=null&&b.eventCount))if(g){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const R=U0(_),P=m.hovered.get(R);P?P.stopped&&_.stopPropagation():(m.hovered.set(R,_),A.onPointerOver==null||A.onPointerOver(_),A.onPointerEnter==null||A.onPointerEnter(_))}A.onPointerMove==null||A.onPointerMove(_)}else{const R=A[f];R?(!x||m.initialHits.includes(E))&&(c(d,m.interaction.filter(P=>!m.initialHits.includes(P))),R(_)):x&&m.initialHits.includes(E)&&c(d,m.interaction.filter(P=>!m.initialHits.includes(P)))}})}};function c(f,d){d.forEach(p=>{var m;return(m=p.__r3f)==null||m.handlers.onPointerMissed==null?void 0:m.handlers.onPointerMissed(f)})}return{handlePointer:l}}let Ty={},ZF=n=>void(Ty=It(It({},Ty),n));function QF(n,e){function t(f,x,g){var y=x,{args:d=[],attach:p}=y,m=Ji(y,["args","attach"]);let w=`${f[0].toUpperCase()}${f.slice(1)}`,S;if(p===void 0&&(w.endsWith("Geometry")?p="geometry":w.endsWith("Material")&&(p="material")),f==="primitive"){if(m.object===void 0)throw"Primitives without 'object' are invalid!";const _=m.object;S=bl(_,{type:f,root:g,attach:p,primitive:!0})}else{const _=Ty[w];if(!_)throw`${w} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(d))throw"The args prop must be an array!";S=bl(new _(...d),{type:f,root:g,attach:p,memoizedProps:{args:d}})}return w!=="inject"&&O0(S,m),S}function i(f,d){let p=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?B0(f,d,d.__r3f.attach):d.isObject3D&&f.isObject3D&&(f.add(d),p=!0),p||(g=f.__r3f)==null||g.objects.push(d),d.__r3f||bl(d,{}),d.__r3f.parent=f,Ey(d),Al(d)}}function r(f,d,p){let m=!1;if(d){var g,x;if((g=d.__r3f)!=null&&g.attach)B0(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){d.parent=f,d.dispatchEvent({type:"added"});const y=f.children.filter(S=>S!==d),w=y.indexOf(p);f.children=[...y.slice(0,w),d,...y.slice(w)],m=!0}m||(x=f.__r3f)==null||x.objects.push(d),d.__r3f||bl(d,{}),d.__r3f.parent=f,Ey(d),Al(d)}}function s(f,d,p=!1){f&&[...f].forEach(m=>o(d,m,p))}function o(f,d,p){if(d){var m,g,x;if(d.__r3f&&(d.__r3f.parent=null),(m=f.__r3f)!=null&&m.objects&&(f.__r3f.objects=f.__r3f.objects.filter(E=>E!==d)),(g=d.__r3f)!=null&&g.attach)FM(f,d,d.__r3f.attach);else if(d.isObject3D&&f.isObject3D){var y;f.remove(d),(y=d.__r3f)!=null&&y.root&&XF(d.__r3f.root,d)}const S=(x=d.__r3f)==null?void 0:x.primitive,_=p===void 0?d.dispose!==null&&!S:p;if(!S){var w;s((w=d.__r3f)==null?void 0:w.objects,d,_),s(d.children,d,_)}d.__r3f&&(delete d.__r3f.root,delete d.__r3f.objects,delete d.__r3f.handlers,delete d.__r3f.memoizedProps,S||delete d.__r3f),_&&d.dispose&&d.type!=="Scene"&&zc.exports.unstable_scheduleCallback(zc.exports.unstable_IdlePriority,()=>{try{d.dispose()}catch{}}),Al(f)}}function l(f,d,p,m){var g,x;const y=(g=f.__r3f)==null?void 0:g.parent;if(!y)return;const w=t(d,p,(x=f.__r3f)==null?void 0:x.root);d!=="primitive"&&f.children&&(f.children.forEach(S=>i(w,S)),f.children=[]),f.__r3f.objects.forEach(S=>i(w,S)),f.__r3f.objects=[],o(y,f),i(y,w),w.raycast&&w.__r3f.eventCount&&w.__r3f.root.getState().internal.interaction.push(w),[m,m.alternate].forEach(S=>{S!==null&&(S.stateNode=w,S.ref&&(typeof S.ref=="function"?S.ref(w):S.ref.current=w))})}return{reconciler:UF({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMicrotask:!0,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,noTimeout:-1,appendChildToContainer:(f,d)=>{const p=f.getState().scene;p.__r3f.root=f,i(p,d)},removeChildFromContainer:(f,d)=>o(f.getState().scene,d),insertInContainerBefore:(f,d,p)=>r(f.getState().scene,d,p),getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var d;return!!((d=f==null?void 0:f.__r3f)!=null?d:{}).handlers},prepareUpdate(f,d,p,m){if(f.__r3f.primitive&&m.object&&m.object!==f)return[!0];{const g=m,{args:y=[],children:w}=g,S=Ji(g,["args","children"]),x=p,{args:_=[],children:E}=x,b=Ji(x,["args","children"]);if(!Array.isArray(y))throw"The args prop must be an array!";if(y.some((R,P)=>R!==_[P]))return[!0];const A=pb(f,S,b,!0);return A.changes.length?[!1,A]:null}},commitUpdate(f,[d,p],m,g,x,y){d?l(f,m,x,y):O0(f,p)},commitMount(f,d,p,m){var g;const x=(g=f==null?void 0:f.__r3f)!=null?g:{};f.raycast&&x.handlers&&x.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,shouldDeprioritizeSubtree:()=>!1,prepareForCommit:()=>null,preparePortalMount:f=>bl(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,detachDeletedInstance:()=>{},createTextInstance:()=>{},hideInstance(f){var d;const{attach:p,parent:m}=(d=f==null?void 0:f.__r3f)!=null?d:{};p&&m&&FM(m,f,p),f.isObject3D&&(f.visible=!1),Al(f)},unhideInstance(f,d){var p;const{attach:m,parent:g}=(p=f==null?void 0:f.__r3f)!=null?p:{};m&&g&&B0(g,f,m),(f.isObject3D&&d.visible==null||d.visible)&&(f.visible=!0),Al(f)},hideTextInstance:()=>{throw new Error("Text is not allowed in the R3F tree.")},getCurrentEventPriority:()=>e?e():Ql.exports.DefaultEventPriority,now:typeof performance!="undefined"&&en.fun(performance.now)?performance.now:en.fun(Date.now)?Date.now:void 0,scheduleTimeout:en.fun(setTimeout)?setTimeout:void 0,cancelTimeout:en.fun(clearTimeout)?clearTimeout:void 0,setTimeout:en.fun(setTimeout)?setTimeout:void 0,clearTimeout:en.fun(clearTimeout)?clearTimeout:void 0}),applyProps:O0}}const gb=n=>!!(n!=null&&n.render),vb=_e.exports.createContext(null),JF=(n,e)=>{const t=BF((o,l)=>{const c=new L,f=new L,d=new L;function p(y=l().camera,w=f,S=l().size){const{width:_,height:E}=S,b=_/E;w instanceof L?d.copy(w):d.set(...w);const A=y.getWorldPosition(c).distanceTo(d);if(ub(y))return{width:_/y.zoom,height:E/y.zoom,factor:1,distance:A,aspect:b};{const R=y.fov*Math.PI/180,P=2*Math.tan(R/2)*A,D=P*(_/E);return{width:D,height:P,factor:_/D,distance:A,aspect:b}}}let m;const g=y=>o(w=>({performance:Ai(It({},w.performance),{current:y})})),x=new ne;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:()=>n(l()),advance:(y,w)=>e(y,w,l()),legacy:!1,linear:!1,flat:!1,scene:bl(new ws),controls:null,clock:new l1,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();m&&clearTimeout(m),y.performance.current!==y.performance.min&&g(y.performance.min),m=setTimeout(()=>g(l().performance.max),y.performance.debounce)}},size:{width:0,height:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:y=>o(w=>Ai(It({},w),{events:It(It({},w.events),y)})),setSize:(y,w)=>{const S=l().camera,_={width:y,height:w};o(E=>({size:_,viewport:It(It({},E.viewport),p(S,f,_))}))},setDpr:y=>o(w=>{const S=hb(y);return{viewport:Ai(It({},w.viewport),{dpr:S,initialDpr:w.viewport.initialDpr||S})}}),setFrameloop:(y="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,y!=="never"&&(w.start(),w.elapsedTime=0),o(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:_e.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,w,S)=>(o(({internal:_})=>({internal:Ai(It({},_),{priority:_.priority+(w>0?1:0),subscribers:[..._.subscribers,{ref:y,priority:w,store:S}].sort((E,b)=>E.priority-b.priority)})})),()=>{o(({internal:_})=>({internal:Ai(It({},_),{priority:_.priority-(w>0?1:0),subscribers:_.subscribers.filter(E=>E.ref!==y)})}))})}}}),i=t.getState();let r=i.size,s=i.viewport.dpr;return t.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:f}=t.getState();(l!==r||c.dpr!==s)&&(jF(o,l),f.setPixelRatio(c.dpr),f.setSize(l.width,l.height),r=l,s=c.dpr)}),t.subscribe(o=>n(o)),t};let so,H0=[],G0=[],kM=[];function gc(n,e){for(so=0;so<n.length;so++)n[so](e)}let V0,W0;function j0(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),V0=e.internal.subscribers,so=0;so<V0.length;so++)W0=V0[so],W0.ref.current(W0.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function KF(n){let e=!1,t,i,r;function s(c){if(i=requestAnimationFrame(s),e=!0,t=0,H0.length&&gc(H0,c),n.forEach(f=>{var d;r=f.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((d=r.gl.xr)!=null&&d.isPresenting)&&(t+=j0(c,r))}),G0.length&&gc(G0,c),t===0)return kM.length&&gc(kM,c),e=!1,cancelAnimationFrame(i)}function o(c){var f;if(!c)return n.forEach(d=>o(d.store.getState()));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+1),e||(e=!0,requestAnimationFrame(s)))}function l(c,f=!0,d,p){f&&gc(H0,c),d?j0(c,d,p):n.forEach(m=>j0(c,m.store.getState())),f&&gc(G0,c)}return{loop:s,invalidate:o,advance:l}}function yb(){const n=_e.exports.useContext(vb);if(!n)throw"R3F hooks can only be used within the Canvas component!";return n}function $i(n=t=>t,e){return yb()(n,e)}function Mm(n,e=0){const t=yb(),i=t.getState().internal.subscribe,r=cb(n);return Df(()=>i(r,e,t),[e,i,t]),null}const _u=new Map,{invalidate:$F,advance:BM}=KF(_u),{reconciler:zp,applyProps:Bh}=QF(_u,qF),Tl={objects:"shallow",strict:!1},ek=(n,e)=>{const t=typeof n=="function"?n(e):n;return gb(t)?t:new zt(It({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},n))};function tk(n){let e=_u.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=i||JF($F,BM),s=t||zp.createContainer(r,Ql.exports.ConcurrentRoot,!1,null);e||_u.set(n,{fiber:s,store:r});let o,l=!1;return{configure(c={}){var f,d,p,m;let{gl:g,size:x,events:y,onCreated:w,shadows:S=!1,linear:_=!1,flat:E=!1,legacy:b=!1,orthographic:A=!1,frameloop:R="always",dpr:P=[1,2],performance:D,raycaster:V,camera:U,onPointerMissed:C}=c,k=r.getState(),ee=k.gl;k.gl||k.set({gl:ee=ek(g,n)});let W=k.raycaster;W||k.set({raycaster:W=new K3});const q=V||{},{params:K}=q,X=Ji(q,["params"]);if(en.equ(X,W,Tl)||Bh(W,It({},X)),en.equ(K,W.params,Tl)||Bh(W,{params:It(It({},W.params),K)}),!k.camera){const Q=U instanceof Oa,oe=Q?U:A?new _s(0,0,0,0,.1,1e3):new Ht(75,0,.1,1e3);Q||(oe.position.z=5,U&&Bh(oe,U),U!=null&&U.rotation||oe.lookAt(0,0,0)),k.set({camera:oe})}if(!k.xr){const Q=(ve,Ye)=>{const Ue=r.getState();Ue.frameloop!=="never"&&BM(ve,!0,Ue,Ye)},oe=()=>{const ve=r.getState().gl;ve.xr.enabled=ve.xr.isPresenting,ve.xr.setAnimationLoop(ve.xr.isPresenting?Q:null)},de={connect(){const ve=r.getState().gl;ve.xr.addEventListener("sessionstart",oe),ve.xr.addEventListener("sessionend",oe)},disconnect(){const ve=r.getState().gl;ve.xr.removeEventListener("sessionstart",oe),ve.xr.removeEventListener("sessionend",oe)}};ee.xr&&de.connect(),k.set({xr:de})}if(ee.shadowMap){const Q=en.boo(S);if(Q&&ee.shadowMap.enabled!==S||!en.equ(S,ee.shadowMap,Tl)){const oe=ee.shadowMap.enabled;ee.shadowMap.enabled=!!S,Q?ee.shadowMap.type=Sx:Object.assign(ee.shadowMap,S),oe!==ee.shadowMap.enabled&&(ee.shadowMap.needsUpdate=!0)}}Jn&&(Jn.legacyMode=b);const $=_?Tr:dt,O=E?Er:bx;return ee.outputEncoding!==$&&(ee.outputEncoding=$),ee.toneMapping!==O&&(ee.toneMapping=O),k.legacy!==b&&k.set(()=>({legacy:b})),k.linear!==_&&k.set(()=>({linear:_})),k.flat!==E&&k.set(()=>({flat:E})),g&&!en.fun(g)&&!gb(g)&&!en.equ(g,ee,Tl)&&Bh(ee,g),y&&!k.events.handlers&&k.set({events:y(r)}),P&&k.viewport.dpr!==hb(P)&&k.setDpr(P),x=x||{width:(f=(d=n.parentElement)==null?void 0:d.clientWidth)!=null?f:0,height:(p=(m=n.parentElement)==null?void 0:m.clientHeight)!=null?p:0},en.equ(x,k.size,Tl)||k.setSize(x.width,x.height),k.frameloop!==R&&k.setFrameloop(R),k.onPointerMissed||k.set({onPointerMissed:C}),D&&!en.equ(D,k.performance,Tl)&&k.set(Q=>({performance:It(It({},Q.performance),D)})),o=w,l=!0,this},render(c){return l||this.configure(),zp.updateContainer(_e.exports.createElement(nk,{store:r,children:c,onCreated:o,rootElement:n}),s,null,()=>{}),r},unmount(){xb(n)}}}function nk({store:n,children:e,onCreated:t,rootElement:i}){return Df(()=>{const r=n.getState();r.set(s=>({internal:Ai(It({},s.internal),{active:!0})})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),_e.exports.createElement(vb.Provider,{value:n},e)}function xb(n,e){const t=_u.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),zp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),WF(r),_u.delete(n),e&&e(n)}catch{}},500)})}}zp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"18.0.0"});function wu(){return wu=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wu.apply(this,arguments)}function by(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Ay(n,e,t){var i,r,s,o,l;e==null&&(e=100);function c(){var d=Date.now()-o;d<e&&d>=0?i=setTimeout(c,e-d):(i=null,t||(l=n.apply(s,r),s=r=null))}var f=function(){s=this,r=arguments,o=Date.now();var d=t&&!i;return i||(i=setTimeout(c,e)),d&&(l=n.apply(s,r),s=r=null),l};return f.clear=function(){i&&(clearTimeout(i),i=null)},f.flush=function(){i&&(l=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},f}Ay.debounce=Ay;var OM=Ay;function ik(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,l]=_e.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=_e.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,p=_e.exports.useRef(!1);_e.exports.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[m,g,x]=_e.exports.useMemo(()=>{const _=()=>{if(!c.current.element)return;const{left:E,top:b,width:A,height:R,bottom:P,right:D,x:V,y:U}=c.current.element.getBoundingClientRect(),C={left:E,top:b,width:A,height:R,bottom:P,right:D,x:V,y:U};c.current.element instanceof HTMLElement&&r&&(C.height=c.current.element.offsetHeight,C.width=c.current.element.offsetWidth),Object.freeze(C),p.current&&!ak(c.current.lastBounds,C)&&l(c.current.lastBounds=C)};return[_,d?OM(_,d):_,f?OM(_,f):_]},[l,r,f,d]);function y(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",x,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function w(){!c.current.element||(c.current.resizeObserver=new s(x),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(_=>_.addEventListener("scroll",x,{capture:!0,passive:!0})))}const S=_=>{!_||_===c.current.element||(y(),c.current.element=_,c.current.scrollContainers=_b(_),w())};return sk(x,Boolean(t)),rk(g),_e.exports.useEffect(()=>{y(),w()},[t,x,g]),_e.exports.useEffect(()=>y,[]),[S,o,m]}function rk(n){_e.exports.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function sk(n,e){_e.exports.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function _b(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,..._b(n.parentElement)]}const ok=["x","y","top","bottom","left","right","width","height"],ak=(n,e)=>ok.every(t=>n[t]===e[t]),q0={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function lk(n){const{handlePointer:e}=YF(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(q0).reduce((t,i)=>Ai(It({},t),{[i]:e(i)}),{}),connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:Ai(It({},o.events),{connected:t})})),Object.entries((i=s==null?void 0:s.handlers)!=null?i:[]).forEach(([o,l])=>{const[c,f]=q0[o];t.addEventListener(c,l,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[l]=q0[s];i.connected.removeEventListener(l,o)}}),t(s=>({events:Ai(It({},s.events),{connected:void 0})}))}}}}const uk=_e.exports.forwardRef(function(A,b){var R=A,{children:e,fallback:t,resize:i,style:r,gl:s,events:o=lk,shadows:l,linear:c,flat:f,legacy:d,orthographic:p,frameloop:m,dpr:g,performance:x,raycaster:y,camera:w,onPointerMissed:S,onCreated:_}=R,E=Ji(R,["children","fallback","resize","style","gl","events","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"]);_e.exports.useMemo(()=>ZF(zF),[]);const[P,{width:D,height:V}]=ik(It({scroll:!0,debounce:{scroll:50,resize:0}},i)),U=_e.exports.useRef(null),C=_e.exports.useRef(null),[k,ee]=_e.exports.useState(null),W=cb(S),[K,X]=_e.exports.useState(!1),[$,O]=_e.exports.useState(!1);if(K)throw K;if($)throw $;const q=_e.exports.useRef(null);return D>0&&V>0&&k&&(q.current||(q.current=tk(k)),q.current.configure({gl:s,events:o,shadows:l,linear:c,flat:f,legacy:d,orthographic:p,frameloop:m,dpr:g,performance:x,raycaster:y,camera:w,size:{width:D,height:V},onPointerMissed:(...Q)=>W.current==null?void 0:W.current(...Q),onCreated:Q=>{Q.events.connect==null||Q.events.connect(C.current),_==null||_(Q)}}),q.current.render(_e.exports.createElement(fb,{set:O},_e.exports.createElement(_e.exports.Suspense,{fallback:_e.exports.createElement(GF,{set:X})},e)))),Df(()=>{ee(U.current)},[]),_e.exports.useEffect(()=>{if(k)return()=>xb(k)},[k]),_e.exports.createElement("div",wu({ref:by([C,P]),style:It({position:"relative",width:"100%",height:"100%",overflow:"hidden"},r)},E),_e.exports.createElement("canvas",{ref:by([U,b]),style:{display:"block"}},t))});let vc;function ck(){if(vc!==void 0)return vc;try{var n;let e;const t=document.createElement("canvas");return vc=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),vc}catch{return vc=!1}}function ot(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const UM=(n,e)=>(n%e+e)%e;class fk extends ar{constructor(e,t){super(),ot(this,"object",void 0),ot(this,"domElement",void 0),ot(this,"enabled",!0),ot(this,"target",new L),ot(this,"minDistance",0),ot(this,"maxDistance",1/0),ot(this,"minZoom",0),ot(this,"maxZoom",1/0),ot(this,"minPolarAngle",0),ot(this,"maxPolarAngle",Math.PI),ot(this,"minAzimuthAngle",-1/0),ot(this,"maxAzimuthAngle",1/0),ot(this,"enableDamping",!1),ot(this,"dampingFactor",.05),ot(this,"enableZoom",!0),ot(this,"zoomSpeed",1),ot(this,"enableRotate",!0),ot(this,"rotateSpeed",1),ot(this,"enablePan",!0),ot(this,"panSpeed",1),ot(this,"screenSpacePanning",!0),ot(this,"keyPanSpeed",7),ot(this,"autoRotate",!1),ot(this,"autoRotateSpeed",2),ot(this,"reverseOrbit",!1),ot(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ot(this,"mouseButtons",{LEFT:sa.ROTATE,MIDDLE:sa.DOLLY,RIGHT:sa.PAN}),ot(this,"touches",{ONE:oa.ROTATE,TWO:oa.DOLLY_PAN}),ot(this,"target0",void 0),ot(this,"position0",void 0),ot(this,"zoom0",void 0),ot(this,"_domElementKeyEvents",null),ot(this,"getPolarAngle",void 0),ot(this,"getAzimuthalAngle",void 0),ot(this,"setPolarAngle",void 0),ot(this,"setAzimuthalAngle",void 0),ot(this,"getDistance",void 0),ot(this,"listenToKeyEvents",void 0),ot(this,"saveState",void 0),ot(this,"reset",void 0),ot(this,"update",void 0),ot(this,"connect",void 0),ot(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Ht?this.object.zoom:1,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=H=>{let N=UM(H,2*Math.PI),fe=d.phi;fe<0&&(fe+=2*Math.PI),N<0&&(N+=2*Math.PI);let he=Math.abs(N-fe);2*Math.PI-he<he&&(N<fe?N+=2*Math.PI:fe+=2*Math.PI),p.phi=N-fe,i.update()},this.setAzimuthalAngle=H=>{let N=UM(H,2*Math.PI),fe=d.theta;fe<0&&(fe+=2*Math.PI),N<0&&(N+=2*Math.PI);let he=Math.abs(N-fe);2*Math.PI-he<he&&(N<fe?N+=2*Math.PI:fe+=2*Math.PI),p.theta=N-fe,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=H=>{H.addEventListener("keydown",ie),this._domElementKeyEvents=H},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof Ht?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof Ht&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(r),i.update(),c=l.NONE},this.update=(()=>{const H=new L,N=new En().setFromUnitVectors(e.up,new L(0,1,0)),fe=N.clone().invert(),he=new L,Ie=new En,Me=2*Math.PI;return function(){const Se=i.object.position;H.copy(Se).sub(i.target),H.applyQuaternion(N),d.setFromVector3(H),i.autoRotate&&c===l.NONE&&k(U()),i.enableDamping?(d.theta+=p.theta*i.dampingFactor,d.phi+=p.phi*i.dampingFactor):(d.theta+=p.theta,d.phi+=p.phi);let Ve=i.minAzimuthAngle,gt=i.maxAzimuthAngle;return isFinite(Ve)&&isFinite(gt)&&(Ve<-Math.PI?Ve+=Me:Ve>Math.PI&&(Ve-=Me),gt<-Math.PI?gt+=Me:gt>Math.PI&&(gt-=Me),Ve<=gt?d.theta=Math.max(Ve,Math.min(gt,d.theta)):d.theta=d.theta>(Ve+gt)/2?Math.max(Ve,d.theta):Math.min(gt,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=m,d.radius=Math.max(i.minDistance,Math.min(i.maxDistance,d.radius)),i.enableDamping===!0?i.target.addScaledVector(g,i.dampingFactor):i.target.add(g),H.setFromSpherical(d),H.applyQuaternion(fe),Se.copy(i.target).add(H),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,g.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),g.set(0,0,0)),m=1,x||he.distanceToSquared(i.object.position)>f||8*(1-Ie.dot(i.object.quaternion))>f?(i.dispatchEvent(r),he.copy(i.object.position),Ie.copy(i.object.quaternion),x=!1,!0):!1}})(),this.connect=H=>{H===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=H,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",De),i.domElement.addEventListener("pointerdown",$e),i.domElement.addEventListener("pointercancel",Tt),i.domElement.addEventListener("wheel",I)},this.dispose=()=>{var H,N,fe,he,Ie,Me;(H=i.domElement)===null||H===void 0||H.removeEventListener("contextmenu",De),(N=i.domElement)===null||N===void 0||N.removeEventListener("pointerdown",$e),(fe=i.domElement)===null||fe===void 0||fe.removeEventListener("pointercancel",Tt),(he=i.domElement)===null||he===void 0||he.removeEventListener("wheel",I),(Ie=i.domElement)===null||Ie===void 0||Ie.ownerDocument.removeEventListener("pointermove",We),(Me=i.domElement)===null||Me===void 0||Me.ownerDocument.removeEventListener("pointerup",Ge),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ie)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const f=1e-6,d=new Sy,p=new Sy;let m=1;const g=new L;let x=!1;const y=new ne,w=new ne,S=new ne,_=new ne,E=new ne,b=new ne,A=new ne,R=new ne,P=new ne,D=[],V={};function U(){return 2*Math.PI/60/60*i.autoRotateSpeed}function C(){return Math.pow(.95,i.zoomSpeed)}function k(H){i.reverseOrbit?p.theta+=H:p.theta-=H}function ee(H){i.reverseOrbit?p.phi+=H:p.phi-=H}const W=(()=>{const H=new L;return function(fe,he){H.setFromMatrixColumn(he,0),H.multiplyScalar(-fe),g.add(H)}})(),K=(()=>{const H=new L;return function(fe,he){i.screenSpacePanning===!0?H.setFromMatrixColumn(he,1):(H.setFromMatrixColumn(he,0),H.crossVectors(i.object.up,H)),H.multiplyScalar(fe),g.add(H)}})(),X=(()=>{const H=new L;return function(fe,he){const Ie=i.domElement;if(Ie&&i.object instanceof Ht&&i.object.isPerspectiveCamera){const Me=i.object.position;H.copy(Me).sub(i.target);let qe=H.length();qe*=Math.tan(i.object.fov/2*Math.PI/180),W(2*fe*qe/Ie.clientHeight,i.object.matrix),K(2*he*qe/Ie.clientHeight,i.object.matrix)}else Ie&&i.object instanceof _s&&i.object.isOrthographicCamera?(W(fe*(i.object.right-i.object.left)/i.object.zoom/Ie.clientWidth,i.object.matrix),K(he*(i.object.top-i.object.bottom)/i.object.zoom/Ie.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function $(H){i.object instanceof Ht&&i.object.isPerspectiveCamera?m/=H:i.object instanceof _s&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*H)),i.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(H){i.object instanceof Ht&&i.object.isPerspectiveCamera?m*=H:i.object instanceof _s&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/H)),i.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function q(H){y.set(H.clientX,H.clientY)}function Q(H){A.set(H.clientX,H.clientY)}function oe(H){_.set(H.clientX,H.clientY)}function de(H){w.set(H.clientX,H.clientY),S.subVectors(w,y).multiplyScalar(i.rotateSpeed);const N=i.domElement;N&&(k(2*Math.PI*S.x/N.clientHeight),ee(2*Math.PI*S.y/N.clientHeight)),y.copy(w),i.update()}function ve(H){R.set(H.clientX,H.clientY),P.subVectors(R,A),P.y>0?$(C()):P.y<0&&O(C()),A.copy(R),i.update()}function Ye(H){E.set(H.clientX,H.clientY),b.subVectors(E,_).multiplyScalar(i.panSpeed),X(b.x,b.y),_.copy(E),i.update()}function Ue(H){H.deltaY<0?O(C()):H.deltaY>0&&$(C()),i.update()}function ae(H){let N=!1;switch(H.code){case i.keys.UP:X(0,i.keyPanSpeed),N=!0;break;case i.keys.BOTTOM:X(0,-i.keyPanSpeed),N=!0;break;case i.keys.LEFT:X(i.keyPanSpeed,0),N=!0;break;case i.keys.RIGHT:X(-i.keyPanSpeed,0),N=!0;break}N&&(H.preventDefault(),i.update())}function at(){if(D.length==1)y.set(D[0].pageX,D[0].pageY);else{const H=.5*(D[0].pageX+D[1].pageX),N=.5*(D[0].pageY+D[1].pageY);y.set(H,N)}}function et(){if(D.length==1)_.set(D[0].pageX,D[0].pageY);else{const H=.5*(D[0].pageX+D[1].pageX),N=.5*(D[0].pageY+D[1].pageY);_.set(H,N)}}function Je(){const H=D[0].pageX-D[1].pageX,N=D[0].pageY-D[1].pageY,fe=Math.sqrt(H*H+N*N);A.set(0,fe)}function we(){i.enableZoom&&Je(),i.enablePan&&et()}function Ze(){i.enableZoom&&Je(),i.enableRotate&&at()}function ce(H){if(D.length==1)w.set(H.pageX,H.pageY);else{const fe=nt(H),he=.5*(H.pageX+fe.x),Ie=.5*(H.pageY+fe.y);w.set(he,Ie)}S.subVectors(w,y).multiplyScalar(i.rotateSpeed);const N=i.domElement;N&&(k(2*Math.PI*S.x/N.clientHeight),ee(2*Math.PI*S.y/N.clientHeight)),y.copy(w)}function le(H){if(D.length==1)E.set(H.pageX,H.pageY);else{const N=nt(H),fe=.5*(H.pageX+N.x),he=.5*(H.pageY+N.y);E.set(fe,he)}b.subVectors(E,_).multiplyScalar(i.panSpeed),X(b.x,b.y),_.copy(E)}function ye(H){const N=nt(H),fe=H.pageX-N.x,he=H.pageY-N.y,Ie=Math.sqrt(fe*fe+he*he);R.set(0,Ie),P.set(0,Math.pow(R.y/A.y,i.zoomSpeed)),$(P.y),A.copy(R)}function ze(H){i.enableZoom&&ye(H),i.enablePan&&le(H)}function Re(H){i.enableZoom&&ye(H),i.enableRotate&&ce(H)}function $e(H){if(i.enabled!==!1){if(D.length===0){var N,fe;(N=i.domElement)===null||N===void 0||N.ownerDocument.addEventListener("pointermove",We),(fe=i.domElement)===null||fe===void 0||fe.ownerDocument.addEventListener("pointerup",Ge)}je(H),H.pointerType==="touch"?me(H):Lt(H)}}function We(H){i.enabled!==!1&&(H.pointerType==="touch"?be(H):B(H))}function Ge(H){if(ue(H),D.length===0){var N,fe,he;(N=i.domElement)===null||N===void 0||N.releasePointerCapture(H.pointerId),(fe=i.domElement)===null||fe===void 0||fe.ownerDocument.removeEventListener("pointermove",We),(he=i.domElement)===null||he===void 0||he.ownerDocument.removeEventListener("pointerup",Ge)}i.dispatchEvent(o),c=l.NONE}function Tt(H){ue(H)}function Lt(H){let N;switch(H.button){case 0:N=i.mouseButtons.LEFT;break;case 1:N=i.mouseButtons.MIDDLE;break;case 2:N=i.mouseButtons.RIGHT;break;default:N=-1}switch(N){case sa.DOLLY:if(i.enableZoom===!1)return;Q(H),c=l.DOLLY;break;case sa.ROTATE:if(H.ctrlKey||H.metaKey||H.shiftKey){if(i.enablePan===!1)return;oe(H),c=l.PAN}else{if(i.enableRotate===!1)return;q(H),c=l.ROTATE}break;case sa.PAN:if(H.ctrlKey||H.metaKey||H.shiftKey){if(i.enableRotate===!1)return;q(H),c=l.ROTATE}else{if(i.enablePan===!1)return;oe(H),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(s)}function B(H){if(i.enabled!==!1)switch(c){case l.ROTATE:if(i.enableRotate===!1)return;de(H);break;case l.DOLLY:if(i.enableZoom===!1)return;ve(H);break;case l.PAN:if(i.enablePan===!1)return;Ye(H);break}}function I(H){i.enabled===!1||i.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(H.preventDefault(),i.dispatchEvent(s),Ue(H),i.dispatchEvent(o))}function ie(H){i.enabled===!1||i.enablePan===!1||ae(H)}function me(H){switch(tt(H),D.length){case 1:switch(i.touches.ONE){case oa.ROTATE:if(i.enableRotate===!1)return;at(),c=l.TOUCH_ROTATE;break;case oa.PAN:if(i.enablePan===!1)return;et(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(i.touches.TWO){case oa.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;we(),c=l.TOUCH_DOLLY_PAN;break;case oa.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ze(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&i.dispatchEvent(s)}function be(H){switch(tt(H),c){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;ce(H),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;le(H),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ze(H),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Re(H),i.update();break;default:c=l.NONE}}function De(H){i.enabled!==!1&&H.preventDefault()}function je(H){D.push(H)}function ue(H){delete V[H.pointerId];for(let N=0;N<D.length;N++)if(D[N].pointerId==H.pointerId){D.splice(N,1);return}}function tt(H){let N=V[H.pointerId];N===void 0&&(N=new ne,V[H.pointerId]=N),N.set(H.pageX,H.pageY)}function nt(H){const N=H.pointerId===D[0].pointerId?D[1]:D[0];return V[N.pointerId]}t!==void 0&&this.connect(t),this.update()}}const dk=_e.exports.forwardRef((i,t)=>{var r=i,{makeDefault:n}=r,e=Ji(r,["makeDefault"]);const s=$i(({set:f})=>f),o=$i(({camera:f})=>f),l=$i(({size:f})=>f),c=_e.exports.useRef();return _e.exports.useLayoutEffect(()=>{const{current:f}=c;f&&!e.manual&&(f.aspect=l.width/l.height,f.updateProjectionMatrix())},[l,e]),_e.exports.useLayoutEffect(()=>{if(n&&c.current){const f=o;return s(()=>({camera:c.current})),()=>s(()=>({camera:f}))}},[c,n,s]),_e.exports.createElement("perspectiveCamera",wu({ref:by([c,t])},e))}),hk=_e.exports.forwardRef((d,f)=>{var p=d,{makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,onChange:s,onStart:o,onEnd:l}=p,c=Ji(p,["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"]);const m=$i(R=>R.invalidate),g=$i(R=>R.camera),x=$i(R=>R.gl),y=$i(R=>R.events),w=$i(R=>R.set),S=$i(R=>R.get),_=$i(R=>R.performance),E=e||g,b=i||y.connected||x.domElement,A=_e.exports.useMemo(()=>new fk(E),[E]);return Mm(()=>{A.enabled&&A.update()},-1),_e.exports.useEffect(()=>(A.connect(b),()=>void A.dispose()),[b,t,A,m]),_e.exports.useEffect(()=>{const R=P=>{m(),t&&_.regress(),s&&s(P)};return A.addEventListener("change",R),o&&A.addEventListener("start",o),l&&A.addEventListener("end",l),()=>{o&&A.removeEventListener("start",o),l&&A.removeEventListener("end",l),A.removeEventListener("change",R)}},[s,o,l]),_e.exports.useEffect(()=>{if(n){const R=S().controls;return w({controls:A}),()=>w({controls:R})}},[n,A]),_e.exports.createElement("primitive",wu({ref:f,object:A,enableDamping:r},c))});var pk=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class mk extends wm{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${pk}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const gk=_e.exports.forwardRef((i,t)=>{var r=i,{speed:n=1}=r,e=Ji(r,["speed"]);const[s]=_e.exports.useState(()=>new mk);return Mm(o=>s&&(s.time=o.clock.getElapsedTime()*n)),_e.exports.createElement("primitive",wu({object:s,ref:t,attach:"material"},e))});function vk(){const n=_e.exports.useRef();var e=1,t=1;console.log(n),document.addEventListener("mousemove",r=>{e=1-r.clientX/5e3,t=1-r.clientY/5e3}),Mm(()=>{var s,o;var r=window.scrollY/window.innerHeight/10;(s=n.current)==null||s.setPolarAngle(r+t),(o=n.current)==null||o.setAzimuthalAngle(e)});const i=_e.exports.useContext(Xr);return jt($p,{children:[Pe(dk,{rotation:[0,0,0],makeDefault:!0,position:[0,0,4],fov:100,attach:void 0,args:void 0,onUpdate:void 0,visible:void 0,type:void 0,id:void 0,uuid:void 0,name:void 0,parent:void 0,modelViewMatrix:void 0,normalMatrix:void 0,matrixWorld:void 0,matrixAutoUpdate:void 0,matrixWorldNeedsUpdate:void 0,castShadow:void 0,receiveShadow:void 0,frustumCulled:void 0,renderOrder:void 0,animations:void 0,userData:void 0,customDepthMaterial:void 0,customDistanceMaterial:void 0,isObject3D:void 0,onBeforeRender:void 0,onAfterRender:void 0,applyMatrix4:void 0,applyQuaternion:void 0,setRotationFromAxisAngle:void 0,setRotationFromEuler:void 0,setRotationFromMatrix:void 0,setRotationFromQuaternion:void 0,rotateOnAxis:void 0,rotateOnWorldAxis:void 0,rotateX:void 0,rotateY:void 0,rotateZ:void 0,translateOnAxis:void 0,translateX:void 0,translateY:void 0,translateZ:void 0,localToWorld:void 0,worldToLocal:void 0,lookAt:void 0,add:void 0,remove:void 0,removeFromParent:void 0,clear:void 0,getObjectById:void 0,getObjectByName:void 0,getObjectByProperty:void 0,getWorldPosition:void 0,getWorldQuaternion:void 0,getWorldScale:void 0,getWorldDirection:void 0,raycast:void 0,traverse:void 0,traverseVisible:void 0,traverseAncestors:void 0,updateMatrix:void 0,updateMatrixWorld:void 0,updateWorldMatrix:void 0,toJSON:void 0,clone:void 0,copy:void 0,addEventListener:void 0,hasEventListener:void 0,removeEventListener:void 0,dispatchEvent:void 0,zoom:void 0,view:void 0,focus:void 0,near:void 0,far:void 0,updateProjectionMatrix:void 0,setViewOffset:void 0,clearViewOffset:void 0,matrixWorldInverse:void 0,projectionMatrix:void 0,projectionMatrixInverse:void 0,isCamera:void 0,isPerspectiveCamera:void 0,aspect:void 0,filmGauge:void 0,filmOffset:void 0,setFocalLength:void 0,getFocalLength:void 0,getEffectiveFOV:void 0,getFilmWidth:void 0,getFilmHeight:void 0,setLens:void 0},void 0),Pe(hk,{ref:n}),jt("mesh",{position:[0,0,0],rotation:[0,0,0],children:[Pe("torusKnotBufferGeometry",{args:[2,5,10,10]}),Pe(gk,{distort:1,attach:"material",speed:.02,wireframe:!0,color:"#fff"})]}),Pe("fog",{attach:"fog",color:i.primary,near:2,far:3.5,position:[0,0,0]}),Pe("mesh",{position:[0,0,0],children:Pe("hemisphereLight",{args:[i.secondary,i.primary]})})]})}/**
 * postprocessing v6.26.3 build Thu Mar 24 2022
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2022 Raoul van Rschen
 * @license Zlib
 */var yk=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,h1="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",xk=class extends Pn{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new Be(null),luminanceBuffer1:new Be(null),minLuminance:new Be(.01),deltaTime:new Be(0),tau:new Be(1)},extensions:{shaderTextureLOD:!0},blending:ni,depthWrite:!1,depthTest:!1,fragmentShader:yk,vertexShader:h1}),this.toneMapped=!1}set luminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}setLuminanceBuffer0(n){this.uniforms.luminanceBuffer0.value=n}set luminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}setLuminanceBuffer1(n){this.uniforms.luminanceBuffer1.value=n}set mipLevel1x1(n){this.defines.MIP_LEVEL_1X1=n.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(n){this.mipLevel1x1=n}set deltaTime(n){this.uniforms.deltaTime.value=n}setDeltaTime(n){this.uniforms.deltaTime.value=n}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(n){this.uniforms.minLuminance.value=n}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(n){this.uniforms.minLuminance.value=n}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(n){this.uniforms.tau.value=n}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(n){this.uniforms.tau.value=n}},_k=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,wk="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",HM=class extends Pn{constructor(n=new ne){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Be(null),texelSize:new Be(new ne),halfTexelSize:new Be(new ne),kernel:new Be(0),scale:new Be(1)},blending:ni,depthWrite:!1,depthTest:!1,fragmentShader:_k,vertexShader:wk}),this.toneMapped=!1,this.setTexelSize(n.x,n.y)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e),this.uniforms.halfTexelSize.value.set(n,e).multiplyScalar(.5)}setSize(n,e){const t=this.uniforms;t.texelSize.value.set(1/n,1/e),t.halfTexelSize.value.copy(t.texelSize.value).multiplyScalar(.5)}},Sk=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,Mk=class extends Pn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Be(null),opacity:new Be(1)},blending:ni,depthWrite:!1,depthTest:!1,fragmentShader:Sk,vertexShader:h1}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},Ek=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])/4.0;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec2 uvs[4];uvs[0]=vUv0;uvs[1]=vUv1;uvs[2]=vUv2;uvs[3]=vUv3;vec3 n=texture2D(normalBuffer,uvs[index]).rgb;
#else
vec3 n=vec3(0.0);
#endif
gl_FragColor=vec4(n,d[index]);}`,Tk="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",bk=class extends Pn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Be(null),normalBuffer:new Be(null),texelSize:new Be(new ne)},blending:ni,depthWrite:!1,depthTest:!1,fragmentShader:Ek,vertexShader:Tk}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Do){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Ak=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,Ck="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",gr={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Cy=class extends Pn{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Tu.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Be(null),depthBuffer:new Be(null),resolution:new Be(new ne),texelSize:new Be(new ne),cameraNear:new Be(.3),cameraFar:new Be(1e3),aspect:new Be(1),time:new Be(0)},blending:ni,depthWrite:!1,depthTest:!1,dithering:r}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.adoptCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Do){this.depthBuffer=n,this.depthPacking=e}setShaderParts(n){return this.fragmentShader=Ak.replace(gr.FRAGMENT_HEAD,n.get(gr.FRAGMENT_HEAD)).replace(gr.FRAGMENT_MAIN_UV,n.get(gr.FRAGMENT_MAIN_UV)).replace(gr.FRAGMENT_MAIN_IMAGE,n.get(gr.FRAGMENT_MAIN_IMAGE)),this.vertexShader=Ck.replace(gr.VERTEX_HEAD,n.get(gr.VERTEX_HEAD)).replace(gr.VERTEX_MAIN_SUPPORT,n.get(gr.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Ht?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return gr}},Rk=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Pk=class extends Pn{constructor(n=!1,e=null){super({name:"LuminanceMaterial",uniforms:{inputBuffer:new Be(null),threshold:new Be(0),smoothing:new Be(1),range:new Be(null)},blending:ni,depthWrite:!1,depthTest:!1,fragmentShader:Rk,vertexShader:h1}),this.toneMapped=!1,this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},Lk=new Oa,Zs=null;function Dk(){if(Zs===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Zs=new Qe,Zs.setAttribute!==void 0?(Zs.setAttribute("position",new mt(n,3)),Zs.setAttribute("uv",new mt(e,2))):(Zs.addAttribute("position",new mt(n,3)),Zs.addAttribute("uv",new mt(e,2)))}return Zs}var Cr=class{constructor(n="Pass",e=new ws,t=Lk){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.getFullscreenMaterial();e!==null&&(e.needsUpdate=!0),this.rtt=!n}}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new dn(Dk(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new ws),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=Do){}render(n,e,t,i,r){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];if(e!==null&&typeof e.dispose=="function"){if(e instanceof ws||e===this.renderer)continue;this[n].dispose()}}}},wb=class extends Cr{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Mk,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new Xt(1,1,{minFilter:Pt,magFilter:Pt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==_i?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===dt&&(this.renderTarget.texture.encoding=dt))}},Ik=class extends Cr{constructor(n,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new xk,this.needsSwap=!1,this.renderTargetPrevious=new Xt(1,1,{minFilter:Ut,magFilter:Ut,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const i=this.fullscreenMaterial;i.luminanceBuffer0=this.renderTargetPrevious.texture,i.luminanceBuffer1=n,i.minLuminance=e,i.adaptationRate=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new wb(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(n){this.fullscreenMaterial.mipLevel1x1=n}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(n){this.fullscreenMaterial.adaptationRate=n}render(n,e,t,i,r){this.fullscreenMaterial.deltaTime=i,n.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),n.render(this.scene,this.camera),this.copyPass.render(n,this.renderTargetAdapted)}},Nk=class extends Cr{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},X0=new Te,Sb=class extends Cr{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,o=this.overrideClearAlpha,l=n.getClearAlpha(),c=s!==null,f=o>=0;c?(X0.copy(n.getClearColor(X0)),n.setClearColor(s,f?o:l)):f&&n.setClearAlpha(o),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),c?n.setClearColor(X0,l):f&&n.setClearAlpha(l)}},Qs=-1,ei=class extends ar{constructor(n,e=Qs,t=Qs,i=1){super(),this.resizable=n,this.base=new ne(1,1),this.preferred=new ne(e,t),this.target=this.preferred,this.s=i}get width(){const{base:n,preferred:e,scale:t}=this;let i;return e.width!==Qs?i=e.width:e.height!==Qs?i=Math.round(e.height*(n.width/Math.max(n.height,1))):i=Math.round(n.width*t),i}set width(n){this.preferredWidth=n}get height(){const{base:n,preferred:e,scale:t}=this;let i;return e.height!==Qs?i=e.height:e.width!==Qs?i=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):i=Math.round(n.height*t),i}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferred.setScalar(Qs),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.base.width}set baseWidth(n){this.base.width!==n&&(this.base.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(n){this.base.width!==n&&(this.base.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(n){this.base.height!==n&&(this.base.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.base.width!==n||this.base.height!==e)&&(this.base.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(n){this.preferred.width!==n&&(this.preferred.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferred.height}set preferredHeight(n){this.preferred.height!==n&&(this.preferred.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferred.width!==n||this.preferred.height!==e)&&(this.preferred.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(n){this.base.set(n.getBaseWidth(),n.getBaseHeight()),this.preferred.set(n.getPreferredWidth(),n.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Qs}},Y0=!1,GM=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Sr:t=this.materialsFlatShadedDoubleSide;break;case Nn:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Sr:t=this.materialsDoubleSide;break;case Nn:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=wo;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=Nn,i}),this.materialsDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=Sr,i}),this.materialsFlatShaded=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Nn,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Sr,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,Y0){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Y0}static set workaroundEnabled(n){Y0=n}},Mb=class extends Cr{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Sb,this.overrideMaterialManager=t===null?null:new GM(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new GM(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,o=this.camera,l=this.selection,c=o.layers.mask,f=s.background,d=n.shadowMap.autoUpdate,p=this.renderToScreen?null:e;l!==null&&o.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(p),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,o):n.render(s,o),o.layers.mask=c,s.background=f,n.shadowMap.autoUpdate=d}},zk=class extends Cr{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=ei.AUTO_SIZE,height:i=ei.AUTO_SIZE}={}){super("DepthDownsamplingPass");const r=new bk;r.normalBuffer=n,this.fullscreenMaterial=r,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Xt(1,1,{minFilter:Ut,magFilter:Ut,stencilBuffer:!1,depthBuffer:!1,type:Hr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const s=this.resolution=new ei(this,t,i,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Do){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.fullscreenMaterial.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){n.capabilities.isWebGL2||console.error("The DepthDownsamplingPass requires WebGL 2")}},xt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Fk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",kk="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Bk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Ok="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Uk="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Hk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Gk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Vk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Wk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",jk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",qk="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Xk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Yk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Zk="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Qk="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Jk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Kk="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",$k="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",eB=new Map([[xt.SKIP,null],[xt.ADD,Fk],[xt.ALPHA,kk],[xt.AVERAGE,Bk],[xt.COLOR_BURN,Ok],[xt.COLOR_DODGE,Uk],[xt.DARKEN,Hk],[xt.DIFFERENCE,Gk],[xt.EXCLUSION,Vk],[xt.LIGHTEN,Wk],[xt.MULTIPLY,jk],[xt.DIVIDE,qk],[xt.NEGATION,Xk],[xt.NORMAL,Yk],[xt.OVERLAY,Zk],[xt.REFLECT,Qk],[xt.SCREEN,Jk],[xt.SOFT_LIGHT,Kk],[xt.SUBTRACT,$k]]),tB=class extends ar{constructor(n,e=1){super(),this.f=n,this.opacity=new Be(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this.f}set blendFunction(n){this.f=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return eB.get(this.blendFunction)}},Ta={NONE:0,DEPTH:1,CONVOLUTION:2},lr=class extends ar{constructor(n,e,{attributes:t=Ta.NONE,blendFunction:i=xt.SCREEN,defines:r=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:l=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=l,this.defines=r,this.uniforms=s,this.extensions=o,this.blendMode=new tB(i),this.blendMode.addEventListener("change",c=>this.setChanged())}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Do){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];if(e!==null&&typeof e.dispose=="function"){if(e instanceof ws||e===this.renderer)continue;this[n].dispose()}}}};function VM(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const o of t.entries())o[1]!==null&&t.set(o[0],o[1].replace(s,r))}}function nB(n,e,t,i,r,s,o){const l=new Map([["fragment",e.getFragmentShader()],["vertex",e.getVertexShader()]]),c=l.get("fragment")!==void 0&&/mainImage/.test(l.get("fragment")),f=l.get("fragment")!==void 0&&/mainUv/.test(l.get("fragment"));let d=[],p=[],m=!1,g=!1;if(l.get("fragment")===void 0)console.error("Missing fragment shader",e);else if(f&&(o&Ta.CONVOLUTION)!==0)console.error("Effects that transform UV coordinates are incompatible with convolution effects",e);else if(!c&&!f)console.error("The fragment shader contains neither a mainImage nor a mainUv function",e);else{const x=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,y=Cy.Section;if(f){const S=`	${n}MainUv(UV);
`;t.set(y.FRAGMENT_MAIN_UV,t.get(y.FRAGMENT_MAIN_UV)+S),m=!0}if(l.get("vertex")!==null&&/mainSupport/.test(l.get("vertex"))){let S=`	${n}MainSupport(`;S+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(l.get("vertex"))?`vUv);
`:`);
`,t.set(y.VERTEX_MAIN_SUPPORT,t.get(y.VERTEX_MAIN_SUPPORT)+S),d=d.concat([...l.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(_=>_[1])),p=p.concat(d).concat([...l.get("vertex").matchAll(x)].map(_=>_[1]))}p=p.concat([...l.get("fragment").matchAll(x)].map(S=>S[1])),p=p.concat([...e.defines.keys()].map(S=>S.replace(/\([\w\s,]*\)/g,""))),p=p.concat([...e.uniforms.keys()]),e.uniforms.forEach((S,_)=>s.set(n+_.charAt(0).toUpperCase()+_.slice(1),S)),e.defines.forEach((S,_)=>r.set(n+_.charAt(0).toUpperCase()+_.slice(1),S)),VM(n,p,r),VM(n,p,l);const w=e.blendMode;if(i.set(w.blendFunction,w),c){const S=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;let _=`${n}MainImage(color0, UV, `;(o&Ta.DEPTH)!==0&&S.test(l.get("fragment"))&&(_+="depth, ",g=!0),_+=`color1);
	`;const E=n+"BlendOpacity";s.set(E,w.opacity),_+=`color0 = blend${w.blendFunction}(color0, color1, ${E});

	`,t.set(y.FRAGMENT_MAIN_IMAGE,t.get(y.FRAGMENT_MAIN_IMAGE)+_),_=`uniform float ${E};

`,t.set(y.FRAGMENT_HEAD,t.get(y.FRAGMENT_HEAD)+_)}t.set(y.FRAGMENT_HEAD,t.get(y.FRAGMENT_HEAD)+l.get("fragment")+`
`),l.get("vertex")!==null&&t.set(y.VERTEX_HEAD,t.get(y.VERTEX_HEAD)+l.get("vertex")+`
`)}return{varyings:d,transformedUv:m,readDepth:g}}var iB=class extends Cr{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Cy(null,null,null,n),this.effects=e.sort((t,i)=>i.attributes-t.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}verifyResources(){const n=this.renderer.capabilities;let e=Math.min(n.maxFragmentUniforms,n.maxVertexUniforms);this.uniformCount>e&&console.warn("The current rendering context doesn't support more than "+e+" uniforms, but "+this.uniformCount+" were defined"),e=n.maxVaryings,this.varyingCount>e&&console.warn("The current rendering context doesn't support more than "+e+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){const n=Cy.Section,e=new Map([[n.FRAGMENT_HEAD,""],[n.FRAGMENT_MAIN_UV,""],[n.FRAGMENT_MAIN_IMAGE,""],[n.VERTEX_HEAD,""],[n.VERTEX_MAIN_SUPPORT,""]]),t=new Map,i=new Map,r=new Map,s=new Set;let o=0,l=0,c=0,f=!1,d=!1;for(const m of this.effects)if(m.blendMode.blendFunction===xt.SKIP)c|=m.getAttributes()&Ta.DEPTH;else if((c&m.getAttributes()&Ta.CONVOLUTION)!==0)console.error("Convolution effects cannot be merged",m);else{c|=m.getAttributes();const g="e"+o++,x=nB(g,m,e,t,i,r,c);if(l+=x.varyings.length,f=f||x.transformedUv,d=d||x.readDepth,m.extensions!==null)for(const y of m.extensions)s.add(y)}const p=/\bblend\b/g;for(const m of t.values()){const g=m.getShaderCode().replace(p,`blend${m.blendFunction}`);e.set(n.FRAGMENT_HEAD,e.get(n.FRAGMENT_HEAD)+g+`
`)}if((c&Ta.DEPTH)!==0){if(d){const m=`float depth = readDepth(UV);

	`;e.set(n.FRAGMENT_MAIN_IMAGE,m+e.get(n.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(f){const m=`vec2 transformedUv = vUv;
`;e.set(n.FRAGMENT_MAIN_UV,m+e.get(n.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");e.forEach((m,g,x)=>x.set(g,m.trim().replace(/^#/,`
#`))),this.uniformCount=r.size,this.varyingCount=l,this.skipRendering=o===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(e).setExtensions(s).setUniforms(r).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Do){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t),i.addEventListener("change",r=>this.handleEvent(r));this.updateMaterial(),this.verifyResources(),t!==void 0&&t!==_i&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},rB=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],sB=class extends Cr{constructor({resolutionScale:n=.5,width:e=ei.AUTO_SIZE,height:t=ei.AUTO_SIZE,kernelSize:i=Tb.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Xt(1,1,{minFilter:Pt,magFilter:Pt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const r=this.resolution=new ei(this,e,t,n);r.addEventListener("change",s=>this.setSize(r.baseWidth,r.baseHeight)),this.blurMaterial=new HM,this.ditheredBlurMaterial=new HM,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,o=this.camera,l=this.renderTargetA,c=this.renderTargetB,f=rB[this.kernelSize];let d=this.blurMaterial,p=e,m,g;for(this.fullscreenMaterial=d,m=0,g=f.length-1;m<g;++m){const x=(m&1)===0?l:c;d.kernel=f[m],d.inputBuffer=p.texture,n.setRenderTarget(x),n.render(s,o),p=x}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=f[m],d.inputBuffer=p.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(i,r),this.ditheredBlurMaterial.setSize(i,r)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==_i?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===dt&&(this.renderTargetA.texture.encoding=dt,this.renderTargetB.texture.encoding=dt))}static get AUTO_SIZE(){return ei.AUTO_SIZE}},Eb=class extends Cr{constructor({width:n=ei.AUTO_SIZE,height:e=ei.AUTO_SIZE,renderTarget:t,luminanceRange:i,colorOutput:r}={}){super("LuminancePass"),this.fullscreenMaterial=new Pk(r,i),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Xt(1,1,{minFilter:Pt,magFilter:Pt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);const s=this.resolution=new ei(this,n,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==_i&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},oB=class extends Cr{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Sb(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),o=n.state.buffers,l=this.scene,c=this.camera,f=this.clearPass,d=this.inverted?0:1,p=1-d;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,d,4294967295),o.stencil.setClear(p),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(n,null):(f.render(n,e),f.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(l,c)):(n.setRenderTarget(e),n.render(l,c),n.setRenderTarget(t),n.render(l,c)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},aB=class extends Cr{constructor(n,e,{resolutionScale:t=1,width:i=ei.AUTO_SIZE,height:r=ei.AUTO_SIZE,renderTarget:s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Mb(n,e,new Sm);const o=this.renderPass;o.setBackgroundDisabled(!0),o.setShadowMapDisabled(!0);const l=o.getClearPass();l.setOverrideClearColor(new Te(7829503)),l.setOverrideClearAlpha(1),this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new Xt(1,1,{minFilter:Ut,magFilter:Ut,stencilBuffer:!1}),this.renderTarget.texture.name="NormalPass.Target");const c=this.resolution=new ei(this,i,r,t);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},Z0=1/1e3,lB=1e3,uB=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(n){return this.fixedDeltaEnabled=n,this}isAutoResetEnabled(n){return this.autoReset}setAutoResetEnabled(n){return typeof document!="undefined"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=n),this}getDelta(){return this.delta*Z0}getFixedDelta(){return this.fixedDelta*Z0}setFixedDelta(n){return this.fixedDelta=n*lB,this}getElapsed(){return this.elapsed*Z0}getTimescale(){return this.timescale}setTimescale(n){return this.timescale=n,this}update(n){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},cB=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new wb,this.depthTexture=null,this.passes=[],this.timer=new uB,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new ne),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===_i&&n.outputEncoding===dt&&(this.inputBuffer.texture.encoding=dt,this.outputBuffer.texture.encoding=dt,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new um;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Eo,n.type=mo):n.type=Zl,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const r=this.renderer,s=r===null?new ne:r.getDrawingBufferSize(new ne),o={minFilter:Pt,magFilter:Pt,stencilBuffer:e,depthBuffer:n,type:t};let l;return i>0?(l=Number(Tu.replace(/\D+/g,""))<138?new ab(s.width,s.height,o):new Xt(s.width,s.height,o),l.ignoreDepthForMultisampleCopy=!1,l.samples=i):l=new Xt(s.width,s.height,o),t===_i&&r!==null&&r.outputEncoding===dt&&(l.texture.encoding=dt),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}addPass(n,e){const t=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new ne),s=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(r.width,r.height),n.initialize(i,s,o),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(n of t)n.setDepthTexture(l)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const s=(l,c)=>l||c.needsDepthTexture;e.reduce(s,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,s=!1,o,l,c;n===void 0&&(n=this.timer.update().getDelta());for(const f of this.passes)f.enabled&&(f.render(e,i,r,n,s),f.needsSwap&&(s&&(t.renderToScreen=f.renderToScreen,o=e.getContext(),l=e.state.buffers.stencil,l.setFunc(o.NOTEQUAL,1,4294967295),t.render(e,i,r,n,s),l.setFunc(o.EQUAL,1,4294967295)),c=i,i=r,r=c),f instanceof oB?s=!0:f instanceof Nk&&(s=!1))}setSize(n,e,t){const i=this.renderer;if(n===void 0||e===void 0){const s=i.getSize(new ne);n=s.width,e=s.height}i.setSize(n,e,t);const r=i.getDrawingBufferSize(new ne);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const s of this.passes)s.setSize(r.width,r.height)}reset(){const n=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(n)}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Tb={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},fB=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,dB=class extends lr{constructor({blendFunction:n=xt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,resolutionScale:i=.5,intensity:r=1,width:s=ei.AUTO_SIZE,height:o=ei.AUTO_SIZE,kernelSize:l=Tb.LARGE}={}){super("BloomEffect",fB,{blendFunction:n,uniforms:new Map([["map",new Be(null)],["intensity",new Be(r)]])}),this.renderTarget=new Xt(1,1,{minFilter:Pt,magFilter:Pt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Eb({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothingFactor=t,this.blurPass=new sB({resolutionScale:i,width:s,height:o,kernelSize:l});const c=this.blurPass.getResolution();c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(n,e,i),this.blurPass.render(n,i,i)):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.luminancePass.resolution.copy(t)}initialize(n,e,t){this.blurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n.outputEncoding===dt&&(this.renderTarget.texture.encoding=dt))}},hB="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",pB=class extends lr{constructor({blendFunction:n=xt.NORMAL,brightness:e=0,contrast:t=0}={}){super("BrightnessContrastEffect",hB,{blendFunction:n,uniforms:new Map([["brightness",new Be(e)],["contrast",new Be(t)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(n){this.uniforms.get("brightness").value=n}getBrightness(n){return this.brightness}setBrightness(n){this.brightness=n}get contrast(){return this.uniforms.get("contrast").value}set contrast(n){this.uniforms.get("contrast").value=n}getContrast(n){return this.contrast}setContrast(n){this.contrast=n}},mB="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",gB=class extends lr{constructor({blendFunction:n=xt.NORMAL,bits:e=16}={}){super("ColorDepthEffect",mB,{blendFunction:n,uniforms:new Map([["factor",new Be(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(n){this.bits=n,this.uniforms.get("factor").value=Math.pow(2,n/3)}getBitDepth(){return this.bitDepth}setBitDepth(n){this.bitDepth=n}},vB=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,yB=class extends lr{constructor({blendFunction:n=xt.NORMAL,inverted:e=!1}={}){super("DepthEffect",vB,{blendFunction:n,attributes:Ta.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(n){this.inverted!==n&&(n?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(n){this.inverted=n}},xB="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",_B=class extends lr{constructor({blendFunction:n=xt.NORMAL,angle:e=Math.PI*.5,scale:t=1}={}){super("DotScreenEffect",xB,{blendFunction:n,uniforms:new Map([["angle",new Be(new ne)],["scale",new Be(t)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(n){this.uniforms.get("angle").value.set(Math.sin(n),Math.cos(n))}getAngle(){return this.angle}setAngle(n){this.angle=n}get scale(){return this.uniforms.get("scale").value}set scale(n){this.uniforms.get("scale").value=n}};new L;new ke;var wB="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",SB=class extends lr{constructor({blendFunction:n=xt.NORMAL,hue:e=0,saturation:t=0}={}){super("HueSaturationEffect",wB,{blendFunction:n,uniforms:new Map([["hue",new Be(new L)],["saturation",new Be(t)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(n){this.uniforms.get("saturation").value=n}getSaturation(){return this.saturation}setSaturation(n){this.saturation=n}get hue(){const n=this.uniforms.get("hue").value;return Math.acos((n.x*3-1)/2)}set hue(n){const e=Math.sin(n),t=Math.cos(n);this.uniforms.get("hue").value.set((2*t+1)/3,(-Math.sqrt(3)*e-t+1)/3,(Math.sqrt(3)*e-t+1)/3)}getHue(){return this.hue}setHue(n){this.hue=n}};new Te;var MB=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,EB=class extends lr{constructor({blendFunction:n=xt.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",MB,{blendFunction:n}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(n){this.premultiply!==n&&(n?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(n){this.premultiply=n}},TB=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,bB=class extends lr{constructor({blendFunction:n=xt.OVERLAY,density:e=1.25,scrollSpeed:t=0}={}){super("ScanlineEffect",TB,{blendFunction:n,uniforms:new Map([["count",new Be(0)],["scrollSpeed",new Be(0)]])}),this.resolution=new ne,this.d=e,this.scrollSpeed=t}get density(){return this.d}set density(n){this.d=n,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(n){this.density=n}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(n){this.uniforms.get("scrollSpeed").value=n,n===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(n,e){this.resolution.set(n,e),this.uniforms.get("count").value=Math.round(e*this.density)}},AB="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",CB="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",RB=Math.PI*.5,yc=new L,WM=new L,PB=class extends lr{constructor(n,e=new L,{speed:t=2,maxRadius:i=1,waveSize:r=.2,amplitude:s=.05}={}){super("ShockWaveEffect",AB,{vertexShader:CB,uniforms:new Map([["active",new Be(!1)],["center",new Be(new ne(.5,.5))],["cameraDistance",new Be(1)],["size",new Be(1)],["radius",new Be(-r)],["maxRadius",new Be(i)],["waveSize",new Be(r)],["amplitude",new Be(s)]])}),this.position=e,this.speed=t,this.camera=n,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(n){this.uniforms.get("amplitude").value=n}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(n){this.uniforms.get("waveSize").value=n}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(n){this.uniforms.get("maxRadius").value=n}get epicenter(){return this.position}set epicenter(n){this.position=n}getPosition(){return this.position}setPosition(n){this.position=n}getSpeed(){return this.speed}setSpeed(n){this.speed=n}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(n,e,t){const i=this.position,r=this.camera,s=this.uniforms,o=s.get("active");if(this.active){const l=s.get("waveSize").value;r.getWorldDirection(yc),WM.copy(r.position).sub(i),o.value=yc.angleTo(WM)>RB,o.value&&(s.get("cameraDistance").value=r.position.distanceTo(i),yc.copy(i).project(r),this.screenPosition.set((yc.x+1)*.5,(yc.y+1)*.5)),this.time+=t*this.speed;const c=this.time-l;s.get("radius").value=c,c>=(s.get("maxRadius").value+l)*2&&(this.active=!1,o.value=!1)}}},LB="uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0,0.0,0.0)+vec3(-0.607,0.769,0.189)*intensity),dot(inputColor.rgb,vec3(0.0,1.0,0.0)+vec3(0.349,-0.314,0.168)*intensity),dot(inputColor.rgb,vec3(0.0,0.0,1.0)+vec3(0.272,0.534,-0.869)*intensity));outputColor=vec4(color,inputColor.a);}",DB=class extends lr{constructor({blendFunction:n=xt.NORMAL,intensity:e=1}={}){super("SepiaEffect",LB,{blendFunction:n,uniforms:new Map([["intensity",new Be(e)]])})}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}},IB=`#include <tonemapping_pars_fragment>
uniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;
#if TONE_MAPPING_MODE != 2
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=linearToRelativeLuminance(color);
#if TONE_MAPPING_MODE == 2
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,ds={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},NB=class extends lr{constructor({blendFunction:n=xt.NORMAL,adaptive:e=!0,mode:t=e?ds.REINHARD2_ADAPTIVE:ds.REINHARD2,resolution:i=256,maxLuminance:r=16,whitePoint:s=r,middleGrey:o=.6,minLuminance:l=.01,averageLuminance:c=1,adaptationRate:f=1}={}){super("ToneMappingEffect",IB,{blendFunction:n,uniforms:new Map([["luminanceBuffer",new Be(null)],["maxLuminance",new Be(r)],["whitePoint",new Be(s)],["middleGrey",new Be(o)],["averageLuminance",new Be(c)]])}),this.renderTargetLuminance=new Xt(1,1,{minFilter:Lo,magFilter:Pt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetLuminance.texture.name="Luminance",this.renderTargetLuminance.texture.generateMipmaps=!0,this.luminancePass=new Eb({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new Ik(this.luminancePass.texture,{minLuminance:l,adaptationRate:f}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=i,this.mode=t}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(n){if(this.mode!==n){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",n.toFixed(0)),n){case ds.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case ds.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case ds.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=n===ds.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(n){this.mode=n}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(n){const e=Math.max(0,Math.ceil(Math.log2(n))),t=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(t,t),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(n){this.resolution=n}get adaptive(){return this.mode===ds.REINHARD2_ADAPTIVE}set adaptive(n){this.mode=n?ds.REINHARD2_ADAPTIVE:ds.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(n){this.adaptiveLuminanceMaterial.adaptationRate=n}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(n){console.warn(this.name,"distinction was removed.")}update(n,e,t){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(n,e),this.adaptiveLuminancePass.render(n,null,null,t))}initialize(n,e,t){this.adaptiveLuminancePass.initialize(n,e,t)}},zB=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Oh={DEFAULT:0,ESKIL:1},FB=class extends lr{constructor({blendFunction:n=xt.NORMAL,technique:e=Oh.DEFAULT,eskil:t=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",zB,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Be(i)],["darkness",new Be(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Oh.ESKIL}set eskil(n){this.technique=n?Oh.ESKIL:Oh.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}};const ur=function(n,e){return e===void 0&&(e=xt.NORMAL),_e.exports.forwardRef(function(i,r){let d=i,{blendFunction:s,opacity:o}=d,l=Ji(d,["blendFunction","opacity"]);const c=$i(p=>p.invalidate),f=_e.exports.useMemo(()=>new n(l),[l]);return _e.exports.useLayoutEffect(()=>{f.blendMode.blendFunction=!s&&s!==0?e:s,o!==void 0&&(f.blendMode.opacity.value=o),c()},[s,f.blendMode,o]),Pe("primitive",{ref:r,object:f,dispose:null})})};ur(dB,xt.SCREEN);ur(pB);ur(gB);ur(yB);const kB=_e.exports.createContext(null),BB=ys.memo(_e.exports.forwardRef((n,e)=>{let{children:t,camera:i,scene:r,resolutionScale:s,enabled:o=!0,renderPriority:l=1,autoClear:c=!0,depthBuffer:f,disableNormalPass:d,stencilBuffer:p,multisampling:m=8,frameBufferType:g=po}=n;const{gl:x,scene:y,camera:w,size:S}=$i();r=r||y,i=i||w;const[_,E,b]=_e.exports.useMemo(()=>{const P=ck(),D=new cB(x,{depthBuffer:f,stencilBuffer:p,multisampling:m>0&&P?m:0,frameBufferType:g});D.addPass(new Mb(r,i));let V=null,U=null;return d||(U=new aB(r,i),U.enabled=!1,D.addPass(U),s!==void 0&&P&&(V=new zk({normalBuffer:U.texture,resolutionScale:s}),V.enabled=!1,D.addPass(V))),[D,U,V]},[i,x,f,p,m,g,r,d,s]);_e.exports.useEffect(()=>_==null?void 0:_.setSize(S.width,S.height),[_,S]),Mm((P,D)=>{o&&(x.autoClear=c,_.render(D))},o?l:0);const A=_e.exports.useRef(null);_e.exports.useLayoutEffect(()=>{let P;return A.current&&A.current.__r3f&&_&&(P=new iB(i,...A.current.__r3f.objects),P.renderToScreen=!0,_.addPass(P),E&&(E.enabled=!0),b&&(b.enabled=!0)),()=>{P&&(_==null||_.removePass(P)),E&&(E.enabled=!1),b&&(b.enabled=!1)}},[_,t,i,E,b]);const R=_e.exports.useMemo(()=>({composer:_,normalPass:E,downSamplingPass:b,resolutionScale:s,camera:i,scene:r}),[_,E,b,s,i,r]);return _e.exports.useImperativeHandle(e,()=>_,[_]),Pe(kB.Provider,{value:R,children:Pe("group",{ref:A,children:t})})}));ur(_B);ur(SB);const OB=ur(EB,xt.COLOR_DODGE);ur(bB,xt.OVERLAY);ur(DB);ur(NB);const UB=ur(FB);ur(PB);function HB(){var n;localStorage.getItem("dark-mode")=="true"?n=Js.dark:n=Js.light;const[e,t]=_e.exports.useState(n);document.body.style.background=e.primary,document.body.style.color=e.text;const i=Array.from(document.getElementsByClassName("svg-path"));return _e.exports.useEffect(()=>{for(let r=0;r<i.length;r++)i[r].style.fill=e.cta},[e]),jt(Xr.Provider,{value:e,children:[Pe(WR,{children:Pe("button",{"aria-label":"light/dark mode",style:{color:e.secondary},className:"mode-switch",onClick:()=>{e==Js.light?localStorage.setItem("dark-mode","true"):localStorage.removeItem("dark-mode"),t(e==Js.light?Js.dark:Js.light)},children:e==Js.light?Pe(tP,{}):Pe(nP,{})})}),Pe(_e.exports.Suspense,{fallback:"loading...",children:Pe(uk,{className:"canvas",children:jt(Xr.Provider,{value:e,children:[jt(BB,{multisampling:0,disableNormalPass:!0,children:[Pe(OB,{opacity:.3}),Pe(UB,{darkness:.7})]}),Pe(vk,{})]})})}),Pe(n0,{content:Pe(jR,{})}),Pe(n0,{content:Pe(lP,{})}),Pe(n0,{content:Pe(eP,{})}),Pe(aP,{})]})}Q0.createRoot(document.getElementById("root")).render(Pe(ys.StrictMode,{children:Pe(HB,{})}));
